[{"authors":null,"categories":null,"content":"TRAILã«é–¢ã™ã‚‹æœ€æ–°æƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™ï¼\n","date":-62135596800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":-62135596800,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"https://matsuolab.github.io/roomba_hack_course/authors/admin/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack_course/authors/admin/","section":"authors","summary":"TRAILã«é–¢ã™ã‚‹æœ€æ–°æƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™ï¼","tags":null,"title":"TRAIL Admin","type":"authors"},{"authors":["jumpei-arima"],"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":-62135596800,"objectID":"451d184f9c1e53301faf72f3ade4d5c6","permalink":"https://matsuolab.github.io/roomba_hack_course/authors/jumpei-arima/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack_course/authors/jumpei-arima/","section":"authors","summary":"","tags":null,"title":"æœ‰é¦¬ ç´”å¹³","type":"authors"},{"authors":["tatsuya-matsushima"],"categories":null,"content":"äººé–“ã¨å…±ç”Ÿã§ãã‚‹ã‚ˆã†ãªé©å¿œçš„ãªãƒ­ãƒœãƒƒãƒˆã®é–‹ç™ºã¨ï¼Œãã®ã‚ˆã†ãªãƒ­ãƒœãƒƒãƒˆã‚’ä½œã‚‹ã“ã¨ã«ã‚ˆã‚Šç”Ÿå‘½æ€§ã‚„çŸ¥èƒ½ã‚’æ§‹æˆçš„ã«ç†è§£ã™ã‚‹ã“ã¨ã«èˆˆå‘³ãŒã‚ã‚Šã¾ã™ï¼ ç‰¹ã«ç¾åœ¨ã¯ï¼Œæ·±å±¤ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸç’°å¢ƒã®ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹ã®ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ï¼ˆä¸–ç•Œãƒ¢ãƒ‡ãƒ«ï¼‰ãƒ»ãƒ¢ãƒ‡ãƒ«ãƒ™ãƒ¼ã‚¹å¼·åŒ–å­¦ç¿’ãƒ»ãƒ¡ã‚¿æ¨¡å€£å­¦ç¿’ã«é–¢ã—ã¦ç ”ç©¶ã‚’è¡Œã£ã¦ã„ã¾ã™ï¼\n","date":-62135596800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":-62135596800,"objectID":"96eea6d6aacba886dc9c6ad4c3b6f83f","permalink":"https://matsuolab.github.io/roomba_hack_course/authors/tatsuya-matsushima/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack_course/authors/tatsuya-matsushima/","section":"authors","summary":"äººé–“ã¨å…±ç”Ÿã§ãã‚‹ã‚ˆã†ãªé©å¿œçš„ãªãƒ­ãƒœãƒƒãƒˆã®é–‹ç™ºã¨ï¼Œãã®ã‚ˆã†ãªãƒ­","tags":null,"title":"æ¾å¶‹ é”ä¹Ÿ","type":"authors"},{"authors":["yuya-ikeda"],"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":-62135596800,"objectID":"4c9f99a2ef4096b81e6d0a08880581e8","permalink":"https://matsuolab.github.io/roomba_hack_course/authors/yuya-ikeda/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack_course/authors/yuya-ikeda/","section":"authors","summary":"","tags":null,"title":"æ± ç”° æ‚ ä¹Ÿ","type":"authors"},{"authors":null,"categories":null,"content":" é–‹ç™ºç’°å¢ƒ ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºç’°å¢ƒã«ä½¿ã‚ã‚Œã¦ã„ã‚‹è¦ç´ ã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹   ROSã¨ã¯ ãƒ­ãƒœãƒƒãƒˆé–‹ç™ºã«ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹ROSã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"f1fb9b3e706d6a8e7af6ee8a67c187b1","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap1/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap1/","section":"course","summary":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®åŸºç¤çŸ¥è­˜","tags":null,"title":"Chapter 1","type":"book"},{"authors":null,"categories":null,"content":" ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã«ã¤ã„ã¦ç†è§£ã—ã‚ˆã†   ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘  ã‚»ãƒ³ã‚µã®å€¤ã‚’èª­ã¿å–ã‚Šãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"b03bbdc309591542a3a0cf48966f3d87","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap2/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap2/","section":"course","summary":"ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘ ","tags":null,"title":"Chapter 2","type":"book"},{"authors":null,"categories":null,"content":" ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¡ è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†   ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¢ è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"b891a66c1b2d8231b078e52b380c46a1","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap3/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap3/","section":"course","summary":"ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¡","tags":null,"title":"Chapter 3","type":"book"},{"authors":null,"categories":null,"content":" è‡ªå·±ä½ç½®æ¨å®š   ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"ef4ff386bad3919cafa8bb6a9000e1a5","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap4/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap4/","section":"course","summary":"è‡ªå¾‹ç§»å‹•","tags":null,"title":"Chapter 4","type":"book"},{"authors":null,"categories":null,"content":" ä¸‰æ¬¡å…ƒç”»åƒå‡¦ç†   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"c5b6edce25a3188d94c102a439d09587","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap5/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap5/","section":"course","summary":"3æ¬¡å…ƒç”»åƒèªè­˜","tags":null,"title":"Chapter 5","type":"book"},{"authors":null,"categories":null,"content":" serviceã¨actionlib   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"8f714aaf4a960d30c5c5c987c0a4c5d1","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap6/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap6/","section":"course","summary":"è¤‡é›‘ãªãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ãƒ»åˆ†æ•£å‡¦ç†","tags":null,"title":"Chapter 6","type":"book"},{"authors":null,"categories":null,"content":"","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"2f5bc53e4f4c671993cb760f7d80fa51","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap7/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap7/","section":"course","summary":"æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™","tags":null,"title":"Chapter 7","type":"book"},{"authors":null,"categories":null,"content":" æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"2adf7951016803e68618153c45700bf0","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap8/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap8/","section":"course","summary":"æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ","tags":null,"title":"Chapter 8","type":"book"},{"authors":null,"categories":null,"content":" ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆ Roomba Hackã«ãŠã‘ã‚‹ è¨ˆç®—æ©Ÿã‚„Dockerã‚³ãƒ³ãƒ†ãƒŠã®ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ\n  ã‚µãƒ¼ãƒ“ã‚¹é€šä¿¡ã®ä¾‹(ä»®) serviceã‚’ç”¨ã„ãŸnodeé–“é€šä¿¡ã®ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚ task\n  ","date":1692230400,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1692230400,"objectID":"c62293bcd748d64f7b724ca677c4a530","permalink":"https://matsuolab.github.io/roomba_hack_course/course/appendix/","publishdate":"2023-08-17T00:00:00Z","relpermalink":"/roomba_hack_course/course/appendix/","section":"course","summary":"è£œè¶³èª¬æ˜","tags":null,"title":"Appendix","type":"book"},{"authors":null,"categories":null,"content":"  -- Table of Contents  Program overview Courses in this program Meet your instructor    Python programming skills - Statistical concepts and how to apply them in practice - Gain experience with the Scikit, including data visualization with Plotly and data wrangling with Pandas -- Program overview å®Ÿãƒ­ãƒœãƒƒãƒˆ(roomba)ã‚’åˆ©ç”¨ã—ãŸæ¼”ç¿’ã‚’é€šã˜ã¦ã€ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®ä»•çµ„ã¿ã‹ã‚‰ã€ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»èªè­˜ãƒ»è¡Œå‹•ã«ã¤ã„ã¦ç ”ç©¶é–‹ç™ºã«å¿…è¦ãªæœ€ä½é™ã®çŸ¥è­˜ã‚„å®Ÿè£…ã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã™ã‚‹ã€‚\nCourses in this program  Chapter 1 ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®åŸºç¤çŸ¥è­˜\n  Chapter 2 ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘ \n  Chapter 3 ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¡\n  Chapter 4 è‡ªå¾‹ç§»å‹•\n  Chapter 5 3æ¬¡å…ƒç”»åƒèªè­˜\n  Chapter 6 è¤‡é›‘ãªãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ãƒ»åˆ†æ•£å‡¦ç†\n  Chapter 7 æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™\n  Chapter 8 æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ\n  Appendix è£œè¶³èª¬æ˜\n  Meet your instructor TRAIL Admin Are there prerequisites? There are no prerequisites for the first course.\n --  Begin the course   ","date":1611446400,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1611446400,"objectID":"97ede4bb026d52eb5ee887238b8270ea","permalink":"https://matsuolab.github.io/roomba_hack_course/course/","publishdate":"2021-01-24T00:00:00Z","relpermalink":"/roomba_hack_course/course/","section":"course","summary":"roombaã‚’ç”¨ã„ãŸå®Ÿãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ å…¥é–€","tags":null,"title":"ğŸ“Š ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ å…¥é–€","type":"book"},{"authors":null,"categories":null,"content":"Roomba Hackã«ãŠã‘ã‚‹ è¨ˆç®—æ©Ÿã‚„Dockerã‚³ãƒ³ãƒ†ãƒŠã®ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\nå„å›ã®æ¼”ç¿’ã§Roombaã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®æ„å‘³ï¼ˆç›®çš„ï¼‰ã‚’å¤§ã¾ã‹ã«ç†è§£ã—ã€ ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ãŸã„æ™‚ã«ã©ã®Dockerã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹ã¹ãã‹ãŒã‚ã‹ã‚‹ã‚ˆã†ã«ãªã‚‹ ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚\nLecture ã¯ã˜ã‚ã«ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã‚’èª¬æ˜ã—ãŸå¾Œã€ nodeåŒå£«ã®é€šä¿¡ã‚’å¯èƒ½ã«ã™ã‚‹ros masterã®æ©Ÿèƒ½ã«ã¤ã„ã¦èª¬æ˜ã—ã€ æœ€å¾Œã«å„å›ã®è¬›ç¾©ã§å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®æ„å‘³ã‚’èª¬æ˜ã—ã¾ã™ã€‚\nã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ ä»¥ä¸‹ã®å›³ãŒã€ã‚·ã‚¹ãƒ†ãƒ ã®å®Œæˆå½¢ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚\n  Roombaã«è¼‰ã£ã¦ã„ã‚‹Jetsonã¨é–‹ç™ºPCã®ãã‚Œãã‚Œã§ã€Dockerã‚³ãƒ³ãƒ†ãƒŠãŒï¼‘ã¤ã¥ã¤èµ·å‹•ã—ã¦ã„ã¾ã™ã€‚ ä¾¿å®œçš„ã«ã‚³ãƒ³ãƒ†ãƒŠ1ã€ã‚³ãƒ³ãƒ†ãƒŠ2ã¨å‘¼ã³ã¾ã™ã€‚\nJetsonå´ã§ã¯ã€Roombaã®ã‚»ãƒ³ã‚µã‚„ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿ï¼ˆãƒ¢ãƒ¼ã‚¿ãªã©ã€ å‹•åŠ›ã‚’ç”Ÿã¿å‡ºã™ã‚‚ã®ï¼‰ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®ãƒãƒ¼ãƒ‰ãŒå‹•ä½œã—ã¾ã™ã€‚ æ¯”è¼ƒçš„ä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å‹•ä½œã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚\né–‹ç™ºPCå´ã§å‹•ä½œã™ã‚‹ãƒãƒ¼ãƒ‰ã¯ã€Jetsonå´ã®ãƒãƒ¼ãƒ‰ã¨æ¯”ã¹ã¦é«˜ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ©Ÿèƒ½ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚ é–‹ç™ºPCã¯Jetsonã¨æ¯”ã¹ã‚¹ãƒšãƒƒã‚¯ãŒé«˜ãã€è¨ˆç®—é‡ã®å¤§ãã„å‡¦ç†ã‚‚è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚ å„å›ã®æ¼”ç¿’ã§ç·¨é›†ã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã€é–‹ç™ºPCå´ã®Dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã§å‹•ä½œã™ã‚‹ã‚‚ã®ã§ã™ã€‚\nros masterã¨ROS_MASTER_URIã®å½¹å‰² ROSè¬›åº§20 è¤‡æ•°ã®PCã§ROSæ¥ç¶š1ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚\nã‚³ãƒãƒ³ãƒ‰ã®æ„å‘³ ã‚³ãƒ³ãƒ†ãƒŠ1å†…ã®ãƒãƒ¼ãƒ‰ã¨ã‚³ãƒ³ãƒ†ãƒŠ2å†…ã®ãƒãƒ¼ãƒ‰ãŒãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹ãŸã‚ã«ã¯ã€ åŒã˜ros masterã«å•ã„åˆã‚ã›ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\nJetsonå´ã§å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ å„å›ã®æ¼”ç¿’ã§ã¯ã€ åˆã‚ã«Jetsonã«sshæ¥ç¶šã—ã¦\n~/group_x/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh  ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã‚³ãƒ³ãƒ†ãƒŠ1ã‚’èµ·å‹•ã—ã€ ãã®ã¾ã¾ã‚³ãƒ³ãƒ†ãƒŠ1å†…ã§\n~/group_x/roomba_hack$ roslaunch roomba_bringup bringup.launch  ã‚’å®Ÿè¡Œã—ãŸæ™‚ç‚¹ã§ã€ã™ã§ã«ros masterãŒèµ·å‹•ã—ã¦ã„ã¾ã™ã€‚\né–‹ç™ºPCå´ã§å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ ã¤ãã«ã€é–‹ç™ºPCã§\n$ ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x  ã¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒ†ãƒŠ2ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™ã€‚ ã“ã®æ™‚ã€å¼•æ•°ã«Jetsonã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ ã‚³ãƒ³ãƒ†ãƒŠ1ã¨åŒã˜ros masterã«å•ã„åˆã‚ã›ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚\nã“ã“ã¾ã§ã§ã€å¿…è¦ãªæº–å‚™ã¯å®Œäº†ã—ã¦ã„ã¾ã™ã€‚\nä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ–°ãŸã«å®Ÿè¡Œã—ãŸã„å ´åˆã«ã¯ã€ã™ã§ã«å­˜åœ¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒ†ãƒŠ2å†…ã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚ å…·ä½“çš„ã«ã¯ã€é–‹ç™ºPCã§æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã€\n~/group_x/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh  (ã™ã§ã«é–‹ç™ºPCä¸Šã§ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ã‚‹å ´åˆã«ã¯å¼•æ•°ã¯ã„ã‚‰ãªã„) ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã‚³ãƒ³ãƒ†ãƒŠ2å†…ã«å…¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nã‚ã‚‹ã„ã¯ã€æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§\n$ docker exec -it roomba_hack bash  ã‚’å®Ÿè¡Œã—ã¦ã‚‚åŒã˜ã“ã¨ãŒã§ãã¾ã™ã€‚\nãã®å¾Œã€rosrunã‚³ãƒãƒ³ãƒ‰ã‚„roslaunchã‚³ãƒãƒ³ãƒ‰ã§ã€å®Ÿè¡Œã—ãŸã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚ è£œè¶³\n$ ./RUN-DOCKER-CONTAINER.shã‚„\n$ roslaunch roomba_bringup bringup.launchã®ã‚ˆã‚Šè©³ç´°ãªå‹•ä½œãŒçŸ¥ã‚ŠãŸã„å ´åˆã¯ã€ ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’èª­ã‚“ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n","date":1692921600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1692921600,"objectID":"4a7559cf9fd4ad4344aed654ac8f69d9","permalink":"https://matsuolab.github.io/roomba_hack_course/course/appendix/system_structure/","publishdate":"2023-08-25T00:00:00Z","relpermalink":"/roomba_hack_course/course/appendix/system_structure/","section":"course","summary":"Roomba Hackã«ãŠã‘ã‚‹ è¨ˆç®—æ©Ÿã‚„Dockerã‚³ãƒ³ãƒ†ãƒŠã®ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ","tags":null,"title":"ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆ","type":"book"},{"authors":null,"categories":null,"content":"serviceã‚’ç”¨ã„ãŸnodeé–“é€šä¿¡ã®ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚\ntask_manager.pyã§èµ·å‹•ã—ãŸãƒãƒ¼ãƒ‰ã‹ã‚‰ã€ serviceã‚’ç”¨ã„ã¦move_robot.pyã§èµ·å‹•ã—ãŸãƒãƒ¼ãƒ‰ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ä¾‹ã§ã™ã€‚\npythonãƒ•ã‚¡ã‚¤ãƒ«ã®ç”¨æ„ navigation_tutorial/scripts/ã«ä»¥ä¸‹ã®2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ (ã‚³ãƒ”ãƒšã§æ§‹ã„ã¾ã›ã‚“)ã€‚\ntask_manager.py\n#!/usr/bin/env python3 import rospy from navigation_tutorial.srv import MoveTrigger, MoveTriggerRequest class TaskManager: def __init__(self): rospy.init_node('task_manager') # service client self.move_robot = rospy.ServiceProxy('/move_robot', MoveTrigger) self.move_robot.wait_for_service() rospy.loginfo(\u0026quot;Service /move_robot is ready!\u0026quot;) def move(self, straight, turn): command = MoveTriggerRequest() command.straight = straight command.turn = turn rospy.loginfo(f\u0026quot;request: straight={straight}, turn={turn}\u0026quot;) response = self.move_robot(command) # service call return response.success def main(self): \u0026quot;\u0026quot;\u0026quot; ã‚¿ã‚¹ã‚¯ã®æµã‚Œã‚’æ‰‹ç¶šçš„ã«è¨˜è¿°ã™ã‚‹ \u0026quot;\u0026quot;\u0026quot; result = self.move(1.0, 0.0) if result: rospy.loginfo(\u0026quot;move success!\u0026quot;) else: rospy.loginfo(\u0026quot;move failed!\u0026quot;) result = self.move(0.0, 90.0) if result: rospy.loginfo(\u0026quot;turn success!\u0026quot;) else: rospy.loginfo(\u0026quot;turn failed!\u0026quot;) rospy.loginfo(\u0026quot;task completed!\u0026quot;) if __name__ == '__main__': task_manager = TaskManager() task_manager.main()  move_robot.py\n#!/usr/bin/env python3 import numpy as np import rospy import tf from geometry_msgs.msg import Twist from nav_msgs.msg import Odometry from navigation_tutorial.srv import MoveTrigger, MoveTriggerResponse class RobotController: def __init__(self): rospy.init_node('robot_controller', anonymous=True) # Publisher self.cmd_vel_pub = rospy.Publisher('/cmd_vel', Twist, queue_size=10) # Subscriber odom_sub = rospy.Subscriber('/odom', Odometry, self.callback_odom) # Service Server rospy.Service('/move_robot', MoveTrigger, self.callback_move_robot) self.x = None self.y = None self.yaw = None while self.x is None: rospy.sleep(0.1) def callback_move_robot(self, req): res = MoveTriggerResponse() try: self.go_straight(req.straight) if req.turn \u0026gt;= 0: self.turn_left(req.turn) else: self.turn_right(-req.turn) res.success = True return res except rospy.ROSInterruptException: res.success = False return res def callback_odom(self, data): self.x = data.pose.pose.position.x self.y = data.pose.pose.position.y self.yaw = self.get_yaw_from_quaternion(data.pose.pose.orientation) def go_straight(self, dis, velocity=0.3): vel = Twist() x0 = self.x y0 = self.y while(np.sqrt((self.x-x0)**2+(self.y-y0)**2)\u0026lt;dis): vel.linear.x = velocity vel.angular.z = 0.0 self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop() def turn_right(self, yaw, yawrate=-0.5): vel = Twist() yaw0 = self.yaw while(abs(self.yaw-yaw0)\u0026lt;np.deg2rad(yaw)): vel.linear.x = 0.0 vel.angular.z = yawrate self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop() def turn_left(self, yaw, yawrate=0.5): vel = Twist() yaw0 = self.yaw while(abs(self.yaw-yaw0)\u0026lt;np.deg2rad(yaw)): vel.linear.x = 0.0 vel.angular.z = yawrate self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop() def stop(self): vel = Twist() vel.linear.x = 0.0 vel.angular.z = 0.0 self.cmd_vel_pub.publish(vel) def get_yaw_from_quaternion(self, quaternion): e = tf.transformations.euler_from_quaternion( (quaternion.x, quaternion.y, quaternion.z, quaternion.w)) return e[2] if __name__=='__main__': simple_controller = SimpleController() rospy.spin()  move_robot.pyã¯simple_control2.pyã‚’å°‘ã—ä¿®æ­£ã—ãŸç¨‹åº¦ã§ã™ã€‚ simple_control2.pyã«ã¤ã„ã¦ã¯ã€chapter3ã§è©³ã—ãè§£èª¬ã—ã¦ã„ã¾ã™ã€‚\nsrvãƒ•ã‚¡ã‚¤ãƒ«ã®ç”¨æ„ ã¾ãŸã€ã“ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã—ã¦ã€ navigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã« navigation_tutorilal/srv/MoveTrigger.srvãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚\nã¨ãã«ã€navigation_tutorial/CMakeLists.txtã‚’ç·¨é›†ã™ã‚‹ç®‡æ‰€ã‚’æŠœã‹ã•ãªã„ã‚ˆã†ã«æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ ï¼ˆå¯¾å¿œã™ã‚‹èª¬æ˜ï¼‰ã€‚\nMoveTrigger.srv\nfloat32 straight float32 turn --- bool success  å®Ÿè¡Œæ–¹æ³• ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸå¾Œã€\n$ rosrun navigation_tutorial move_robot.py  åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§\n$ rosrun navigation_tutorial task_manager.py  ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ­ãƒœãƒƒãƒˆãŒç›´é€²ã—ã¦å·¦ã«å›è»¢ã—ã¾ã™ã€‚\nè£œè¶³ ãƒ•ã‚¡ã‚¤ãƒ«ãŒã†ã¾ãå®Ÿè¡Œã§ããªã„å ´åˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã«å®Ÿè¡Œæ¨©é™ãŒã‚ãŸãˆã‚‰ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ ã“ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã—ã¦è§£æ±ºã—ã¦ã¿ã¦ãã ã•ã„ã€‚\nãã‚Œã§ã‚‚è§£æ±ºã—ãªã„å ´åˆã¯slackã§æ°—è»½ã«è³ªå•ã—ã¦ãã ã•ã„ã€‚\n","date":1693094400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1693094400,"objectID":"ccbde466e5fce580fbc8f6e985acdb9b","permalink":"https://matsuolab.github.io/roomba_hack_course/course/appendix/service_example/","publishdate":"2023-08-27T00:00:00Z","relpermalink":"/roomba_hack_course/course/appendix/service_example/","section":"course","summary":"serviceã‚’ç”¨ã„ãŸnodeé–“é€šä¿¡ã®ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚ task","tags":null,"title":"ã‚µãƒ¼ãƒ“ã‚¹é€šä¿¡ã®ä¾‹(ä»®)","type":"book"},{"authors":null,"categories":null,"content":"Learn ã“ã‚Œã¾ã§ã¯ï¼Œãƒˆãƒ”ãƒƒã‚¯ã‚’ä½¿ã£ãŸé€šä¿¡ã«ã‚ˆã‚Šãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¦ãã¾ã—ãŸï¼ ãƒˆãƒ”ãƒƒã‚¯é€šä¿¡ã«ã¯ï¼Œ\n é€šä¿¡ã®ç›¸æ‰‹ã‚’ä»®å®šã—ãªã„ \u0026hellip; subscriberãŒã„ãªãã¦ã‚‚publishã§ãã‚‹ éåŒæœŸé€šä¿¡ãƒ»å‡¦ç†ãŒã§ãã‚‹ \u0026hellip; publisherã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’publishã—ãŸã‚‰ã™ãã«æ¬¡ã®å‡¦ç†ã‚’å§‹ã‚ã‚‹ï¼ˆ=subscriberã®å‡¦ç†ãŒçµ‚ã‚ã‚‹ã®ã‚’å¾…ãŸãªã„ï¼‰  ãªã©ã®ç‰¹å¾´ãŒã‚ã‚Šã€ã‚·ãƒ³ãƒ—ãƒ«ã«ãƒãƒ¼ãƒ‰é–“ã®é€šä¿¡ã‚’å®Ÿç¾ã§ãã¾ã—ãŸï¼\nã—ã‹ã—ï¼Œé€†ã«è¨€ãˆã°ï¼Œ\n é€šä¿¡ã®ç›¸æ‰‹ã‚’ä»®å®šã™ã‚‹ \u0026hellip; å‘¼ã³å‡ºã—å´ã®ãƒãƒ¼ãƒ‰ãŒï¼Œå‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ãƒãƒ¼ãƒ‰ã®å‡¦ç†çµæœã«ã‚ˆã£ã¦æŒ¯ã‚‹ã¾ã„ã‚’å¤‰ãˆã‚‹ åŒæœŸé€šä¿¡ãƒ»å‡¦ç† \u0026hellip; å‘¼ã³å‡ºã—å´ã®ãƒãƒ¼ãƒ‰ãŒï¼Œå‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ãƒãƒ¼ãƒ‰ã§å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¤  ã®ã‚ˆã†ãªå‡¦ç†ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒå‹ã®é€šä¿¡ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ãŒå¤šã„ï¼‰ã‚’ ãƒˆãƒ”ãƒƒã‚¯ã«ã‚ˆã£ã¦å®Ÿç¾ã™ã‚‹ã“ã¨ã¯å¤§å¤‰ã§ã™ï¼\nã“ã®ã‚ˆã†ãªæ¯”è¼ƒçš„è¤‡é›‘ãªé€šä¿¡ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®é€šä¿¡æ–¹å¼ã¨ã—ã¦ï¼Œ ROSã¯ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆserviceï¼‰ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆactionlibï¼‰ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ï¼\nservice serviceã¨ã¯ serviceé€šä¿¡ã¯ï¼Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒå‹ã®é€šä¿¡ã‚’å®Ÿç¾ã™ã‚‹æœ€ã‚‚åŸºæœ¬çš„ãªæ–¹æ³•ã§ã™ã€‚\nã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹ãƒãƒ¼ãƒ‰(service server)ã¨ï¼Œã‚µãƒ¼ãƒ“ã‚¹ã‚’å‘¼ã³å‡ºã™ãƒãƒ¼ãƒ‰(service client)ã®é–“ã®é€šä¿¡ã‚’å¯èƒ½ã«ã—ã¾ã™ï¼\nä»¥ä¸‹ã®ã‚ˆã†ãªæµã‚Œã§ä½¿ç”¨ã—ã¾ã™ï¼\n clientãŒserverã«å¼•æ•°ã‚’æ¸¡ã™(å‡¦ç†ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹) å¼•æ•°ã‚’å—ã‘å–ã£ãŸserverãŒä½•ã‚‰ã‹ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ serverãŒå‡¦ç†çµæœã‚’è¿”ã‚Šå€¤ã¨ã—ã¦clientã«è¿”ã™ clientã¯å—ã‘å–ã£ãŸå€¤ã«åŸºã¥ã„ã¦å‡¦ç†ã‚’ç¶šè¡Œã™ã‚‹    pythonã§ã¯ï¼Œrospyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®rospy.Service()ã‚„ rospy.ServiceProxy()ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ï¼Œã‚µãƒ¼ãƒãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ã‚’ç°¡å˜ã«å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ ï¼ˆå‚è€ƒï¼‰ï¼\nä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼\n# ã‚µãƒ¼ãƒã‚’å‘¼ã³å‡ºã™ $ rosservice call \u0026lt;ServiceName\u0026gt; \u0026lt;Arguments\u0026gt; # å­˜åœ¨ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ä¸€è¦§ã‚’è¡¨ç¤º $ rosservice list # ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ã‚’è¡¨ç¤º $ rosservice type \u0026lt;ServiceName\u0026gt;  serviceã®ãƒ‡ãƒ¼ã‚¿å‹ ã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã„ã¦ä½¿ç”¨ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®å‹ã¯.srvãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ï¼ ãƒˆãƒ”ãƒƒã‚¯ã«ãŠã„ã¦ä½¿ç”¨ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®å‹ã¯.msgãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã—ãŸãŒï¼Œ ã‚µãƒ¼ãƒ“ã‚¹ã®å ´åˆã¯å¼•æ•°ã¨è¿”ã‚Šå€¤ã®äºŒã¤ã®å½¢å¼ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ç‚¹ãŒç•°ãªã‚Šã¾ã™ï¼\nä¾‹ã¨ã—ã¦std_srvs/SetBoolã‚’ç¤ºã—ã¾ã™ï¼å¼•æ•°ã¨è¿”ã‚Šå€¤ã®é–“ã«---ã‚’å…¥ã‚Œã¦å®šç¾©ã—ã¾ã™ï¼\nbool data --- bool success string message  actionlib ã‚µãƒ¼ãƒ“ã‚¹é€šä¿¡ã§ã¯ï¼Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã‚µãƒ¼ãƒå´ã®å‡¦ç†ãŒçµ‚ã‚ã‚‹ã¾ã§å‡¦ç†ã‚’åœæ­¢ã™ã‚‹ãŸã‚ï¼Œ ã‚µãƒ¼ãƒã§é•·ã„æ™‚é–“ãŒã‹ã‹ã‚‹ã‚ˆã†ãªå‡¦ç†ã‚’è¡Œã†ï¼ˆè¨ˆç®—é‡ãŒå¤§ãã„ï¼Œã¾ãŸã¯ï¼Œç§»å‹•ã«æ™‚é–“ãŒã‹ã‹ã‚‹ãªã©ï¼‰å ´åˆã«ã¯ï¼Œ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‡¦ç†ãŒé•·ã„é–“åœæ­¢ã—ã¦ã—ã¾ã†ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ï¼\nå‡¦ç†ã®å‘¼ã³å‡ºã—å´ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’åœæ­¢ã•ã›ãšã«ï¼Œã‹ã¤ï¼Œ å‡¦ç†ã®çµæœã‚„é€”ä¸­çµŒéã‚’å—ã‘å–ã£ã¦åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã‚‚ã®ãŒã‚¢ã‚¯ã‚·ãƒ§ãƒ³(actionlib)é€šä¿¡ã§ã™ï¼\nactionlibã¯5ã¤ã®ãƒˆãƒ”ãƒƒã‚¯é€šä¿¡ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§å®Ÿç¾ã•ã‚Œã¦ã„ã¾ã™ï¼ è©³ã—ã„èª¬æ˜ã¯qiitaã®ROSè¬›åº§ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼\npythonã§ã¯ï¼Œactionlibã®ã‚µãƒ¼ãƒã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚‚ï¼Œ\nimport actionlib  ã—ãŸã®ã¡ã«ï¼Œä»–ã®é€šä¿¡æ–¹å¼ã¨åŒæ§˜ã«actionlib.SimpleActionServerã¨ã—ã¦ï¼Œç°¡å˜ã«ä½œæˆã§ãã¾ã™ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰ï¼\nä»Šå›ã®æ¼”ç¿’ã§ã¯ï¼Œç°¡å˜ã®ãŸã‚action serverã®ä½œæˆã¯è¡Œã„ã¾ã›ã‚“ï¼ å¤‰ã‚ã‚Šã«ï¼Œç§»å‹•ã®ãŸã‚ã®actionã¨ã—ã¦ï¼Œmove_baseãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹move_baseã¨ã„ã†actionã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ã‚‡ã†ï¼\nå®Ÿã¯ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯\nroslaunch navigation_tutorial navigation.launch  ã‚’å®Ÿè¡Œã—ã¦move_baseãƒãƒ¼ãƒ‰ã‚’èµ·å‹•ã—ãŸéš›ã«æ—¢ã«åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã—ãŸï¼\n move_baseãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è©³ç´°ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼\nåŒæ§˜ã«ï¼Œaction clientã‚‚actionlib.SimpleActionClientã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ç°¡å˜ã«ä½œæˆã§ãã¾ã™ï¼\nä¾‹ãˆã°ï¼Œmove_baseã®action clientã‚’å®Ÿè£…ã™ã‚‹éš›ã«ã¯ï¼Œ\nimport actionlib import tf from move_base_msgs.msg import MoveBaseAction, MoveBaseGoal from geometry_msgs.msg import Quaternion action_client = actionlib.SimpleActionClient('move_base', MoveBaseAction) action_client.wait_for_server() # action serverã®æº–å‚™ãŒã§ãã‚‹ã¾ã§å¾…ã¤ goal = MoveBaseGoal() # goalã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½œæˆ goal.target_pose.header.frame_id = 'map' # ãƒãƒƒãƒ—åº§æ¨™ç³»ã§ã®ã‚´ãƒ¼ãƒ«ã¨ã—ã¦è¨­å®š goal.target_pose.header.stamp = rospy.Time.now() # ç¾åœ¨æ™‚åˆ» # ã‚´ãƒ¼ãƒ«ã®å§¿å‹¢ã‚’æŒ‡å®š goal.target_pose.pose.position.x = X goal.target_pose.pose.position.y = Y q = tf.transformations.quaternion_from_euler(0, 0, YAW) # å›è»¢ã¯quartanionã§è¨˜è¿°ã™ã‚‹ã®ã§å¤‰æ› goal.target_pose.pose.orientation = Quaternion(q[0], q[1], q[2], q[3]) action_client.send_goal(goal) # ã‚µãƒ¼ãƒã«ã‚´ãƒ¼ãƒ«ã‚’é€ä¿¡  ã®ã‚ˆã†ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®send_goalãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚´ãƒ¼ãƒ«ã‚’æŒ‡å®šã§ãã¾ã™ï¼\nãã®å¾Œï¼Œ\naction_client.wait_for_result(rospy.Duration(30))  ã¨ã™ã‚‹ã¨ï¼ŒçµæœãŒè¿”ã£ã¦ãã‚‹ã¾ã§ï¼ˆã“ã®å ´åˆ30ç§’é–“ï¼‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãï¼Œ\nresult = action_client.wait_for_result(rospy.Duration(30))  ã¨ã™ã‚‹ã“ã¨ã§ï¼Œresultå¤‰æ•°ã«å‡¦ç†ã®çµæœã‚’æ ¼ç´ã§ãã¾ã™ï¼\næ¼”ç¿’ ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘èµ·å‹•æº–å‚™ cd roomba_hack git fetch git checkout feature/integrate (jetson) ./RUN-DOCKER-CONTAINER.sh (é–‹ç™ºãƒã‚·ãƒ³) ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x   ã€é–‹ç™ºãƒã‚·ãƒ³ã€‘scriptãƒ™ãƒ¼ã‚¹ã®navigationã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ (é–‹ç™ºãƒã‚·ãƒ³)(docker) roslaunch navigation_tutorial navigation.launch (é–‹ç™ºãƒã‚·ãƒ³)(docker) rosrun navigation_tutorial topic_goal.py (é–‹ç™ºãƒã‚·ãƒ³)(docker) rosrun navigation_tutorial action_goal.py   ã€é–‹ç™ºãƒã‚·ãƒ³ã€‘RealSenseã§æ¤œå‡ºã—ãŸéšœå®³ç‰©ã‚’ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã«è¿½åŠ ã—ã¦ã¿ã‚ˆã† (é–‹ç™ºãƒã‚·ãƒ³)(docker) roslaunch three-dimensions_tutorial detection_pc.launch   ï¼ˆç·åˆèª²é¡Œï¼‰éšœå®³ç‰©ã‚’é¿ã‘ãªãŒã‚‰navigationã™ã‚‹ Lidarã«æ˜ ã‚‰ãªã„ç‰©ä½“ã‚‚ç”»åƒãƒ™ãƒ¼ã‚¹ã§æ¤œå‡ºã—ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã«è¿½åŠ ã™ã‚‹ã“ã¨ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã«ã¶ã¤ã‹ã‚‰ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚\nãƒ’ãƒ³ãƒˆ\n ç‰©ä½“æ¤œå‡ºçµæœã«åŸºã¥ã„ã¦ç‰©ä½“éƒ¨åˆ†ä»¥å¤–ã‚’ãƒã‚¹ã‚¯ã—ãŸãƒ‡ãƒ—ã‚¹ç”»åƒã‚’publishã™ã‚‹ depth2pc.launchã§ãã‚Œã‚’subscribeã—ã€point(cloud)ã«å¤‰æ›ã™ã‚‹ å¤‰æ›ã•ã‚ŒãŸpointã‹ã‚‰mapåº§æ¨™ç³»ã§ã®ä½ç½®ã‚’å–å¾—ã™ã‚‹ costmapã«åæ˜ ã™ã‚‹ move_baseã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ã‚ˆã†ï¼  ã™ã‚‹ã¨actionãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸå ´åˆã‚„ï¼ŒKeyboardInterruptã•ã‚ŒãŸå ´åˆã«cancel_goalãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã“ã¨ã§actionã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ãã‚‹ã‚ˆã†ã«æ‹¡å¼µã§ãã‚‹ã¯ãšã§ã™ï¼    ã•ã‚‰ã«ï¼ŒPyTorchã‚’ä½¿ç”¨ã—ãŸè‡ªä½œã®åˆ†é¡å™¨ã‚„ãƒãƒƒãƒˆä¸Šã®åˆ†é¡å™¨ã‚’ã‚·ã‚¹ãƒ†ãƒ ã«çµ„ã¿è¾¼ã‚“ã§ï¼ˆä¾‹ãˆã°ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«ãªã©ï¼‰ï¼Œã‚ˆã‚Šã‚ˆãå‹•ä½œã™ã‚‹ã‚ˆã†ã«æ”¹è‰¯ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\n","date":1690329600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1690329600,"objectID":"ba96fee21f24c18e95f236953fe70e74","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap6/service-actionlib/","publishdate":"2023-07-26T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap6/service-actionlib/","section":"course","summary":"","tags":null,"title":"serviceã¨actionlib","type":"book"},{"authors":null,"categories":null,"content":"è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\nLearn å‰å›ä½¿ç”¨ã—ãŸsimple_control.py ã§ã¯ï¼Œé€Ÿåº¦ï¼Œè§’é€Ÿåº¦ï¼Œæ™‚é–“ã‚’æŒ‡å®šã—ï¼Œ \u0026ldquo;é€Ÿåº¦ * æ™‚é–“\u0026rdquo; ã‚ã‚‹ã„ã¯ \u0026ldquo;è§’é€Ÿåº¦ * æ™‚é–“\u0026rdquo; ã¨ã„ã†æ¼”ç®—ã‚’è¡Œã†ã“ã¨ã§ï¼Œ ãƒ­ãƒœãƒƒãƒˆã‚’æ„å›³ã—ãŸå ´æ‰€ã¸ç§»å‹•ã•ã›ã‚‹å‘½ä»¤ã‚’ä¸ãˆã¦ã„ã¾ã—ãŸï¼\nã—ã‹ã—ï¼Œã“ã®åˆ¶å¾¡ã®ä»•æ–¹ã«ã¯ï¼Œã„ãã¤ã‹ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ï¼\n ãƒ›ã‚¤ãƒ¼ãƒ«ã¨åœ°é¢ã¨ã®é–“ã«æ»‘ã‚ŠãŒã‚ã£ãŸå ´åˆï¼Œãƒ­ãƒœãƒƒãƒˆã¯æŒ‡å®šã—ãŸè·é›¢ã‚ˆã‚Šå°ã•ã„è·é›¢ã—ã‹ç§»å‹•ã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ï¼ ãƒ­ãƒœãƒƒãƒˆæœ¬ä½“ã®å•é¡Œã§ï¼ŒæŒ‡å®šã—ãŸé€Ÿåº¦ã‚ˆã‚Šã‚‚å®Ÿéš›ã®é€Ÿåº¦ãŒå¤§ãã„ã¾ãŸã¯å°ã•ã„å ´åˆï¼Œ ãƒ­ãƒœãƒƒãƒˆã¯æŒ‡å®šã—ãŸä½ç½®ã«ã¯ç§»å‹•ã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ï¼  ã“ã‚Œã‚‰ã¯ï¼Œå‹•ä½œã®çµæœã‚’è€ƒæ…®ã›ãšï¼Œã¯ã˜ã‚ã«æŒ‡å®šã—ãŸé€Ÿåº¦ã¨æ™‚é–“ã«ã®ã¿å¾“ã£ã¦å‹•ãï¼Œã¨ã„ã†åˆ¶å¾¡ã®ä»•æ–¹ã®ãŸã‚ã«èµ·ã“ã‚Šã¾ã™ï¼\nã“ã®ã‚ˆã†ã«ï¼Œã‚ã‚‰ã‹ã˜ã‚æŒ‡å®šã•ã‚ŒãŸåˆ¶å¾¡ä¿¡å·ã«ã®ã¿åŸºã¥ã„ã¦åˆ¶å¾¡ã‚’è¡Œã„ï¼Œ ãã®çµæœï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æƒ…å ±ï¼‰ã‚’è€ƒæ…®ã—ãªã„åˆ¶å¾¡ã®ä»•æ–¹ã‚’ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰åˆ¶å¾¡ï¼ˆé–‹ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡ï¼‰ã¨å‘¼ã³ã¾ã™ï¼ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰åˆ¶å¾¡ã¯ï¼Œåˆ¶å¾¡å¯¾è±¡ãŒäºˆæ¸¬å¯èƒ½ã§å¤–ä¹±ãŒå°‘ãªã„å ´åˆã‚„ï¼Œ ã‚·ã‚¹ãƒ†ãƒ ãŒç°¡æ½”ã§ã‚ã‚‹å ´åˆã«ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼\nä¸€æ–¹ã§ï¼Œã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æƒ…å ±ã‚’åˆ©ç”¨ã—ã¦åˆ¶å¾¡ä¿¡å·ã‚’ä¿®æ­£ã™ã‚‹åˆ¶å¾¡ã®ä»•æ–¹ã‚’ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ï¼ˆé–‰ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡ï¼‰ã¨å‘¼ã³ã¾ã™ï¼ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ã¯ï¼Œåˆ¶å¾¡å¯¾è±¡ã®äºˆæ¸¬ãŒé›£ã—ãï¼Œå¤–ä¹±ãŒå¤§ãã„å ´åˆã«æœ‰åŠ¹ã§ã™ï¼\nä»Šå›ã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®ã‚»ãƒ³ã‚µæƒ…å ±ã‚’ç”¨ã„ã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ ã«ã‚ˆã£ã¦ãƒ­ãƒœãƒƒãƒˆã‚’ã‚ˆã‚ŠæŸ”è»Ÿã«å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã¨LiDARã¨ã„ã†2ç¨®é¡ã®ã‚»ãƒ³ã‚µã®æƒ…å ±ã‚’ç”¨ã„ã¾ã™ï¼\nãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ã‚’è¡Œãªã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼-- ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®ã‚»ãƒ³ã‚µæƒ…å ±ã‚’ç”¨ã„ãŸåˆ¶å¾¡ ã¾ãšã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®ã‚¿ã‚¤ãƒ¤ã®å›è»¢é‡ã‹ã‚‰è¨ˆç®—ã•ã‚Œã‚‹ç§»å‹•è·é›¢ã§ã‚ã‚‹ï¼ˆãƒ›ã‚¤ãƒ¼ãƒ«ï¼‰ã‚ªãƒ‰ãƒ¡ãƒˆãƒªï¼ˆodometryï¼‰ã‚’ä½¿ã£ãŸåˆ¶å¾¡ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ/odomï¼‰ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚ˆã† roombaã®ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®æƒ…å ±ã¯ï¼Œ/odomãƒˆãƒ”ãƒƒã‚¯ã«publishã•ã‚Œã¦ã„ã¾ã™ï¼\n$ rostopic echo /odom  ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ã©ã®ã‚ˆã†ãªæƒ…å ±ãŒæµã‚Œã¦ã„ã‚‹ã‹ãŒã‚ã‹ã‚Šã¾ã™ï¼ $ rostopic echo -n 1 /odom root@dynamics:~/roomba_hack# rostopic echo -n 1 /odom header: seq: 2115 stamp: secs: 1649692132 nsecs: 791056254 frame_id: \u0026quot;odom\u0026quot; child_frame_id: \u0026quot;base_footprint\u0026quot; pose: pose: position: x: -0.014664691872894764 y: -0.0010878229513764381 z: 0.0 orientation: x: 0.0 y: 0.0 z: 0.0056752621080531414 w: 0.9999838955703261 covariance: [0.08313143998384476, 0.00019857974257320166, 0.0, 0.0, 0.0, 0.004368376452475786, 0.00019857988809235394, 0.015032557770609856, 0.0, 0.0, 0.0, -0.26573312282562256, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0043683769181370735, -0.26573312282562256, 0.0, 0.0, 0.0, 6.021446704864502] twist: twist: linear: x: 0.0 y: 0.0 z: 0.0 angular: x: 0.0 y: 0.0 z: 0.0 covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0] ---  \nã¾ãŸï¼Œ\n$ rostopic type /odom  ã‚’å®Ÿè¡Œã™ã‚‹ã¨ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ï¼Œnav_msgs/Odometryå‹ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼ $ rostopic type /odom root@dynamics:~/roomba_hack# rostopic type /odom nav_msgs/Odometry  \nnav_msgs/Odometryå‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã™ã‚‹ã¨ï¼Œã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯poseã¨twistã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼\n  poseã¯ï¼ˆchild_frameã‹ã‚‰è¦‹ãŸï¼‰ãƒ­ãƒœãƒƒãƒˆã®æ¨å®šå§¿å‹¢ï¼ˆä½ç½®ã¨å›è»¢è§’ï¼‰ã‚’è¡¨ã—ã¦ã„ã¦ï¼Œcovarianceã«ã¯ãã®ä¸ç¢ºã‹ã•ã‚’è¡¨ã™å…±åˆ†æ•£ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼\n  ä¸€æ–¹ï¼Œtwistã¯ï¼ˆchild_frameã‹ã‚‰è¦‹ãŸï¼‰ãƒ­ãƒœãƒƒãƒˆã®é€Ÿåº¦ã‚’è¡¨ã—ã¦ã„ã¦ï¼Œposeã¨åŒæ§˜ã«covarianceã«ã¯ãã®ä¸ç¢ºã‹ã•ã‚’è¡¨ã™å…±åˆ†æ•£ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼\n  ãªãŠï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ã®å®šç¾©ã¯ï¼Œã‚³ãƒãƒ³ãƒ‰ã§\n$ rosmsg info nav_msgs/Odometry  ã‚’å®Ÿè¡Œã—ã¦ã‚‚ç¢ºèªã§ãã¾ã™ï¼ $ rosmsg info nav_msgs/Odometry root@dynamics:~/roomba_hack# rosmsg info nav_msgs/Odometry std_msgs/Header header uint32 seq time stamp string frame_id string child_frame_id geometry_msgs/PoseWithCovariance pose geometry_msgs/Pose pose geometry_msgs/Point position float64 x float64 y float64 z geometry_msgs/Quaternion orientation float64 x float64 y float64 z float64 w float64[36] covariance geometry_msgs/TwistWithCovariance twist geometry_msgs/Twist twist geometry_msgs/Vector3 linear float64 x float64 y float64 z geometry_msgs/Vector3 angular float64 x float64 y float64 z float64[36] covariance  \nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³(quaternion) ã•ã¦ï¼Œ/odomã®ãƒˆãƒ”ãƒƒã‚¯ã§ã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®å›è»¢è§’ã¯ã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ï¼ˆquaternionï¼‰ã§è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ï¼\nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã¯ï¼Œæ—¥æœ¬èªã§ã¯å››å…ƒæ•°ã¨å‘¼ã°ã‚Œï¼Œ3æ¬¡å…ƒç©ºé–“ä¸Šã§ã®å›è»¢è§’ã‚’è¡¨ç¾ã™ã‚‹æ–¹æ³•ã®ä¸€ã¤ã§ï¼Œ4ã¤ã®è¦ç´ ã‚’æŒã¤ãƒ™ã‚¯ãƒˆãƒ«ã§è¡¨ç¾ã•ã‚Œã¾ã™ï¼\nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã«ã‚ˆã‚‹3æ¬¡å…ƒå›è»¢ã®è¡¨ç¾ã¯ï¼Œè§’åº¦ã‚’é€£ç¶šçš„ã«ã‹ã¤ç°¡æ½”ã«è¡¨ç¾ã§ãã‚‹ãŸã‚ROSã§ã¯ã‚ˆãç”¨ã„ã‚‰ã‚Œã¾ã™ï¼ˆãã®ä»–ã«ã¯ï¼Œã‚ªã‚¤ãƒ©ãƒ¼è§’ã«ã‚ˆã‚‹è¡¨ç¾ã‚„å›è»¢è¡Œåˆ—ã«ã‚ˆã‚‹è¡¨ç¾ãŒã‚ã‚Šã¾ã™ï¼‰ï¼\nãã‚Œãã‚Œã®å›è»¢è§’ã«é–¢ã™ã‚‹è¡¨ç¾ã®ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’èª¿ã¹ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆã€Œã‚¸ãƒ³ãƒãƒ«ãƒ­ãƒƒã‚¯ã€ãªã©ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§èª¿ã¹ã‚‹ã¨ã‚ˆã‚Šã‚ˆãç†è§£ã§ãã‚‹ã¨æ€ã„ã¾ã™ï¼‰ï¼\nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã‹ã‚‰ã‚ªã‚¤ãƒ©ãƒ¼è§’ã¸ã¯ï¼Œtfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®tf.transformations.euler_from_quaternionã‚’ä½¿ã†ã“ã¨ã§å¤‰æ›ã§ãã¾ã™ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰ï¼\nå®Ÿè£…ã®ä¾‹ã‚’è¦‹ã¦ã¿ã‚‹ ãã‚Œã§ã¯ï¼Œã‚ªãƒ‰ãƒ¡ãƒˆãƒª/odomã®æƒ…å ±ã‚’ä½¿ã£ãŸåˆ¶å¾¡ã®å®Ÿè£…ã®ä¾‹ã¨ã—ã¦navigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã®simple_control2.pyã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆgithubï¼‰ï¼\nã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã¿ã‚ˆã† ç”»é¢ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’2ã¤ä¸¦ã¹ã‚‹ãªã©ï¼Œgithubã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã¿ãªãŒã‚‰ä»¥ä¸‹ã®è§£èª¬ã‚’èª­ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ï¼\nsimple_control2.py #!/usr/bin/env python3 import numpy as np import rospy import tf from geometry_msgs.msg import Twist from nav_msgs.msg import Odometry class SimpleController: def __init__(self): rospy.init_node('simple_controller', anonymous=True) # Publisher self.cmd_vel_pub = rospy.Publisher('/cmd_vel', Twist, queue_size=10) # Subscriber odom_sub = rospy.Subscriber('/odom', Odometry, self.callback_odom) self.x = None self.y = None self.yaw = None while self.x is None: rospy.sleep(0.1) def callback_odom(self, data): self.x = data.pose.pose.position.x self.y = data.pose.pose.position.y self.yaw = self.get_yaw_from_quaternion(data.pose.pose.orientation) def go_straight(self, dis, velocity=0.3): vel = Twist() x0 = self.x y0 = self.y while(np.sqrt((self.x-x0)**2+(self.y-y0)**2)\u0026lt;dis): vel.linear.x = velocity vel.angular.z = 0.0 self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop() def turn_right(self, yaw, yawrate=-0.5): vel = Twist() yaw0 = self.yaw while(abs(self.yaw-yaw0)\u0026lt;np.deg2rad(yaw)): vel.linear.x = 0.0 vel.angular.z = yawrate self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop() def turn_left(self, yaw, yawrate=0.5): vel = Twist() yaw0 = self.yaw while(abs(self.yaw-yaw0)\u0026lt;np.deg2rad(yaw)): vel.linear.x = 0.0 vel.angular.z = yawrate self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop() def stop(self): vel = Twist() vel.linear.x = 0.0 vel.angular.z = 0.0 self.cmd_vel_pub.publish(vel) def get_yaw_from_quaternion(self, quaternion): e = tf.transformations.euler_from_quaternion( (quaternion.x, quaternion.y, quaternion.z, quaternion.w)) return e[2] if __name__=='__main__': simple_controller = SimpleController() try: simple_controller.go_straight(1.0) simple_controller.turn_left(90) simple_controller.turn_right(90) except rospy.ROSInitException: pass   ã‹ã‚“ãŸã‚“ãªèª¬æ˜ ä¸Šè¨˜ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å¤§æ ã®ã¿ã‚’æŠœãå‡ºã™ã¨ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ï¼ simple_control2.pyã®å¤§æ  #!/usr/bin/env python3 # 1 import ~ # 2 class SimpleController: # 3 def __init__(self): # 4 pass def callback_odom(self, data): # 5 pass def go_straight(self, dis, velocity=0.3): pass def turn_right(self, yaw, yawrate=-0.5): pass def turn_left(self, yaw, yawrate=0.5): pass def stop(self): pass def get_yaw_from_quaternion(self, quaternion): pass if __name__=='__main__': # 6 simple_controller = SimpleController() # 7 pass  \nãã‚Œãã‚Œã«ã¤ã„ã¦ç°¡æ½”ã«è§£èª¬ã—ã¾ã™ï¼\n#1 shebang shebang(ã‚·ãƒãƒ³)ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ï¼Œã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹éš›ã«ï¼Œã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½¿ã£ã¦å®Ÿè¡Œã™ã‚‹ã‹ã‚’æŒ‡å®šã™ã‚‹ï¼ #!/usr/bin/env python3 ã¨æ›¸ã„ã¦ã‚ã‚‹ã®ã§ï¼Œã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯python3ã§å®Ÿè¡Œã™ã‚‹ã®ã ã¨ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«æ•™ãˆã¦ã„ã‚‹ï¼\n #2 import import numpy as np import rospy import tf from geometry_msgs.msg import Twist from nav_msgs.msg import Odometry   pythonã®æ¨™æº–ã®é–¢æ•°(printãªã©)ã ã‘ã§ã¯æ©Ÿèƒ½ãŒè¶³ã‚Šãªã„ã®ã§ï¼Œåˆ¥ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ï¼ ã“ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ã¯ï¼Œnumpy, rospy, tf ã¨ã„ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ï¼  rospyã¨ã„ã†ã®ãŒï¼Œpythonã§rosã‚’ä½¿ã†ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼   ã¾ãŸï¼Œgeometry_msgs.msgã¨ã„ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰Twistã¨ã„ã†ãƒ‡ãƒ¼ã‚¿å‹, nav_msgs.msgã¨ã„ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰Odometoryã¨ã„ã†ãƒ‡ãƒ¼ã‚¿å‹ã‚’ãã‚Œãã‚Œã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ï¼   #3 class  SimpleControllerã¨ã„ã†åå‰ã®ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã¦ã„ã‚‹ï¼ ã‚¯ãƒ©ã‚¹ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨­è¨ˆå›³ã®ã‚ˆã†ãªã‚‚ã®ï¼  ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯ï¼Œãƒ‡ãƒ¼ã‚¿ã¨ãã®ãƒ‡ãƒ¼ã‚¿ã®æŒ¯ã‚‹èˆã„ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ï¼    classã®ä¾‹1 ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ãŸã¨ã™ã‚‹ï¼\nclass Car: def __init__(self, color, speed): self.color = color self.speed = speed self.fuel = 100 def drive(self): self.fuel -= 20 print(\u0026lsquo;drove!') print(f\u0026rsquo;æ®‹ã‚Šã®ç‡ƒæ–™ã¯{self.fuel}ãƒªãƒƒãƒˆãƒ«ã§ã™\u0026rsquo;)\ndef charge(self): self.fuel = 100 print(\u0026lsquo;charged!') print(f\u0026rsquo;æ®‹ã‚Šã®ç‡ƒæ–™ã¯{self.fuel}ãƒªãƒƒãƒˆãƒ«ã§ã™\u0026rsquo;)\ndef info(self): print(f\u0026rsquo;è‰²ã¯{self.color}ã§ã™') print(f\u0026rsquo;é€Ÿåº¦ã¯{self.speed}km/hã§ã™') print(f\u0026rsquo;æ®‹ã‚Šã®ç‡ƒæ–™ã¯{self.fuel}ãƒªãƒƒãƒˆãƒ«ã§ã™') \nä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ãˆã‚‹ï¼\nmycar = Car('red', 200) mycar.drive() #drove! #æ®‹ã‚Šã®ç‡ƒæ–™ã¯80ãƒªãƒƒãƒˆãƒ«ã§ã™\nmycar.drive() #drove! #æ®‹ã‚Šã®ç‡ƒæ–™ã¯60ãƒªãƒƒãƒˆãƒ«ã§ã™\nmycar.charge() #charged! #æ®‹ã‚Šã®ç‡ƒæ–™ã¯100ãƒªãƒƒãƒˆãƒ«ã§ã™\nmycar.info() #è‰²ã¯redã§ã™ #é€Ÿåº¦ã¯200km/hã§ã™ #æ®‹ã‚Šã®ç‡ƒæ–™ã¯100ãƒªãƒƒãƒˆãƒ«ã§ã™ \n classã®ä¾‹2 pythonã®stringå‹ã‚„ï¼Œintå‹ï¼Œlistå‹ã‚‚ï¼Œå®Ÿã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ï¼\npeople = ['Alice', 'Bob', 'Charlie'] people.append('Dave') print(people) #[\u0026lsquo;Alice\u0026rsquo;, \u0026lsquo;Bob\u0026rsquo;, \u0026lsquo;Charlie\u0026rsquo;, \u0026lsquo;Dave\u0026rsquo;] \nä¸Šã®ä¾‹ã§ã¯ï¼Œlistå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆpeopleã«å¯¾ã—ã¦ï¼Œappendã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰(ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæŒã¤é–¢æ•°)ã‚’å‘¼ã³å‡ºã—ï¼Œæ–°ã—ã„è¦ç´ ã‚’è¿½åŠ ã—ã¦ã„ã‚‹ï¼\n  #4 ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿  ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿__init__()ã¨ã¯ï¼Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆæ™‚ã«å‘¼ã³å‡ºã•ã‚Œã‚‹é–¢æ•°ã®ã“ã¨ï¼ åˆæœŸåŒ–ã®ãŸã‚ã®é–¢æ•°ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼   #5 ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©  ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã¯ï¼Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæŒã¤é–¢æ•°ã®ã“ã¨ï¼ classã®å®šç¾©ã®ä¸­ã§ã¯ï¼Œself.method_name(å¼•æ•°1, å¼•æ•°2)ã¨ã„ã†å½¢ã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ï¼ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¤–ã‹ã‚‰ä½¿ç”¨ã™ã‚‹ã¨ãã«ã¯ï¼Œä¸Šã®Carã®ä¾‹ã®ã‚ˆã†ã«ï¼Œobject_name.method_name(å¼•æ•°1, å¼•æ•°2)ã¨ã„ã†å½¢ã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ï¼ å®šç¾©ã®ç¬¬ä¸€å¼•æ•°ã«ã¯ï¼Œå¿…ãšselfã‚’æŒ‡å®šã™ã‚‹ï¼ã“ã‚Œã¯ï¼Œãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè‡ªèº«ã‚’æŒ‡ã™ï¼  å‘¼ã³å‡ºã™ã¨ãã«ã¯selfã¯çœç•¥ã™ã‚‹ï¼     #6 ãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œæ™‚ã®å‡¦ç†  ã“ã®ifæ–‡ã®ä¸­ã®å‡¦ç†ã¯ï¼Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å®Ÿè¡Œã—ãŸã¨ãã«ã®ã¿å®Ÿè¡Œã•ã‚Œã‚‹ï¼ __name__ã¯ç‰¹æ®Šãªå¤‰æ•°ã§ï¼Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å®Ÿè¡Œã—ãŸã¨ãã«ã¯'__main__'ã¨ã„ã†å€¤ã‚’æŒã¤ï¼  importã•ã‚ŒãŸã¨ãã«ã¯__name__ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«åãŒå…¥ã‚‹ãŸã‚ï¼Œã“ã®ifæ–‡ã®ä¸­ã®å‡¦ç†ã¯å®Ÿè¡Œã•ã‚Œãªã„ï¼ #!/usr/bin/env python3 print(__name__)  ã¨ã ã‘è¨˜è¿°ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ï¼Œãµã‚‹ã¾ã„ãŒç†è§£ã—ã‚„ã™ã„ã‹ã‚‚ã—ã‚Œãªã„ï¼\n     ã‚ˆã‚Šè©³ç´°ãªç†è§£ simple_control2.pyã«ã¤ã„ã¦ã‚ˆã‚Šè©³ç´°ã«è§£èª¬ã—ã¾ã™ï¼\nã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ def __init__(self): rospy.init_node('simple_controller', anonymous=True) # Publisher self.cmd_vel_pub = rospy.Publisher('/cmd_vel', Twist, queue_size=10) # Subscriber odom_sub = rospy.Subscriber('/odom', Odometry, self.callback_odom) self.x = None self.y = None self.yaw = None while self.x is None: rospy.sleep(0.1)  ä¸Šã«ã‚‚è¿°ã¹ãŸé€šã‚Šï¼Œ__init__ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨å‘¼ã°ã‚Œï¼Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆæ™‚ã«è‡ªå‹•ã§å‘¼ã³å‡ºã•ã‚Œã‚‹é–¢æ•°ã§ã™ï¼ å„è¡Œã«ã¤ã„ã¦é †ç•ªã«è¦‹ã¦ã„ãã¾ã™ï¼\nrospy.init_node('simple_controller', anonymous=True)   simple_controllerã¨ã„ã†åå‰ã®ãƒãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ã„ã¾ã™ï¼  self.cmd_vel_pub = rospy.Publisher('/cmd_vel', Twist, queue_size=10)   rospy.Publisher()ã«ã‚ˆã£ã¦ï¼Œä¸Šã§ä½œæˆã—ãŸãƒãƒ¼ãƒ‰ãŒpublisherã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ï¼ ã“ã®ãƒãƒ¼ãƒ‰ã¯ï¼Œ/cmd_velã¨ã„ã†ãƒˆãƒ”ãƒƒã‚¯ã«å¯¾ã—ã¦ï¼ŒTwistã¨ã„ã†ãƒ‡ãƒ¼ã‚¿å‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¦ã„ã¾ã™ï¼  Twistã®æƒ…å ±ã¯ï¼Œgeometry_msgsã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Šç¢ºèªã§ãã¾ã™ï¼ Twistã¯é€Ÿåº¦ï¼“æˆåˆ†ã¨è§’é€Ÿåº¦ï¼“æˆåˆ†ã‚’æ ¼ç´ã™ã‚‹ãƒ‡ãƒ¼ã‚¿å‹ã§ã™ï¼   ç¬¬ï¼’å¼•æ•°ã®queue_sizeã¯ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹å‘½ä»¤ãŒï¼Œè¨±å®¹ã§ãã‚‹å‘¨æœŸã‚ˆã‚ŠçŸ­ã„å ´åˆã«ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚­ãƒ¥ãƒ¼ã«ãŸã‚ã¦ãŠãæ•°ã‚’æŒ‡å®šã—ã¾ã™ï¼  ã“ã“ã§ã¯ï¼Œ10å€‹ã¾ã§ã‚­ãƒ¥ãƒ¼ã«ãŸã‚ã¦ãŠãã“ã¨ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ï¼ ãŸã¾ã£ãŸæ•°ãŒ10å€‹ã‚ˆã‚Šå°‘ãªã„å ´åˆã«ã¯ï¼Œå¤ã„é †ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ã—ã¦ã„ãã¾ã™ï¼ ãŸã¾ã£ãŸæ•°ãŒ10å€‹ã«é”ã—ãŸå ´åˆã«ã¯ï¼Œæœ€ã‚‚å¤ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç ´æ£„ã—ã¾ã™ï¼    odom_sub = rospy.Subscriber('/odom', Odometry, self.callback_odom)   rospy.Subscriber()ã«ã‚ˆã£ã¦ï¼Œä½œæˆã—ãŸãƒãƒ¼ãƒ‰ãŒsubscriberã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ï¼ ã“ã®ãƒãƒ¼ãƒ‰ã¯ï¼Œ/odomã¨ã„ã†ãƒˆãƒ”ãƒƒã‚¯ã‹ã‚‰ï¼ŒOdometryã¨ã„ã†ãƒ‡ãƒ¼ã‚¿å‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ã¦ã„ã¾ã™ï¼  Odometryã®æƒ…å ±ã¯ï¼Œnav_msgsã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ˆã‚Šç¢ºèªã§ãã¾ã™ï¼ Odometryã¯ï¼Œä½ç½®ã¨å§¿å‹¢ï¼ŒåŠã³é€Ÿåº¦ã¨è§’é€Ÿåº¦ã‚’æ ¼ç´ã™ã‚‹ãƒ‡ãƒ¼ã‚¿å‹ã§ã™ï¼ ã“ã“ã§ã¯ï¼ŒOdometryã«ã¯ï¼Œãƒ«ãƒ³ãƒã®ç¾åœ¨ã®ä½ç½®ã‚„é‹å‹•ã®æ§˜å­ãŒæ ¼ç´ã•ã‚Œã¦ãŠã‚Šï¼Œãã‚Œã‚’å—ä¿¡ã—ã¦ã„ã¾ã™ï¼   rospy.Subscriber()ã®ç¬¬ä¸‰å¼•æ•°ã¨ã—ã¦ï¼Œself.callback_odomã¨ã„ã†ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ï¼  subscriberã«ã¯ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã¨ã¯ï¼ŒsubscriberãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°ã®ã“ã¨ã§ã™ï¼  ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã¯ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¼•æ•°ã¨ã—ã¦å®Ÿè¡Œã—ã¾ã™ï¼   ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®ä¸­èº«ã¯ï¼Œå¾Œè¿°ã—ã¾ã™ï¼    self.x = None self.y = None self.yaw = None   ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚’å®šç¾©ã—ã¦ã„ã¾ã™ï¼ ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã®ä¸­ã§self.\u0026lt;name\u0026gt;ã®å½¢å¼ã§è¡¨ã•ã‚Œã‚‹å¤‰æ•°ã¯ï¼Œãã®ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæŒã¤\u0026quot;attribute(ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆ)\u0026ldquo;ã¨å‘¼ã°ã‚Œã¾ã™ï¼  ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã«ã¯ï¼Œãã®classã®å®šç¾©ã®ä¸­ã§ã‚ã‚Œã°ã©ã“ã‹ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼   ã“ã“ã§ã¯ï¼Œself.x, self.y, self.yawã¨ã„ã†ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚’å®šç¾©ã—ã¦ã„ã¾ã™ï¼  ã“ã‚Œã‚‰ã®ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã¯ï¼Œå¾Œè¿°ã™ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®ä¸­ã§å€¤ãŒæ›´æ–°ã•ã‚Œã¾ã™ï¼ ã“ã®ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã«ã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®ç¾åœ¨ã®ä½ç½®ã‚„å§¿å‹¢ãŒæ ¼ç´ã•ã‚Œã¾ã™ï¼    while self.x is None: rospy.sleep(0.1)   self.xãŒNoneã§ã‚ã‚‹é–“ï¼Œ0.1ç§’é–“éš”ã§å¾…æ©Ÿã—ç¶šã‘ã¾ã™ï¼   ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•° def callback_odom(self, data): self.x = data.pose.pose.position.x self.y = data.pose.pose.position.y self.yaw = self.get_yaw_from_quaternion(data.pose.pose.orientation)   ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®é …ç›®ã§èª¬æ˜ã—ãŸé€šã‚Šï¼Œsubscriberã‚’å®šç¾©ã™ã‚‹éš›ã«ã¯ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã¯subscriberãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ãŸéš›ï¼Œãã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¼•æ•°ã¨ã—ã¦å®Ÿè¡Œã™ã‚‹é–¢æ•°ã§ã—ãŸï¼ ä¸Šã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã§ã¯ï¼Œå¼•æ•°dataã«ã¯ï¼ŒOdometryå‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ ¼ç´ã•ã‚Œã¾ã™ï¼  data.pose.pose.positionã¨ã„ã†æ›¸ãæ–¹ã«ã‚ˆã£ã¦ï¼ŒOdometryå‹ã®ä¸­ã®ï¼Œä½ç½®ã‚’è¡¨ã™positionã¨ã„ã†è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã¾ã™ï¼ åŒæ§˜ã«ï¼Œdata.pose.pose.orientationã¨ã„ã†æ›¸ãæ–¹ã«ã‚ˆã£ã¦ï¼ŒOdometryå‹ã®ä¸­ã®ï¼Œå§¿å‹¢ã‚’è¡¨ã™orientationã¨ã„ã†è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã¾ã™ï¼   ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§å®šç¾©ã—ã¦ã„ãŸã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆself.x, self.y, self.yawã«ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸä½ç½®ã¨å§¿å‹¢ã‚’æ ¼ç´ã—ã¦ã„ã¾ã™ï¼  self.yawã«å€¤ã‚’æ ¼ç´ã™ã‚‹æ™‚ã«ä½¿ç”¨ã—ã¦ã„ã‚‹é–¢æ•°get_yaw_from_quaternion()ã«ã¤ã„ã¦ã¯ï¼Œå¾Œè¿°ã—ã¾ã™ï¼   ã“ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ãŒä¸€åº¦ã§ã‚‚å‘¼ã°ã‚Œã‚‹ã¨ï¼Œself.xã«å…¥ã£ã¦ã„ã‚‹Noneã®å€¤ãŒä¸Šæ›¸ãã•ã‚Œï¼Œã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ä¸­ã®whileæ–‡ãŒçµ‚äº†ã—ã¾ã™ï¼   get_yaw_from_quaternioné–¢æ•° go_straighté–¢æ•°ã‚„turn_righté–¢æ•°ã¨ã¯é †ç•ªãŒå‰å¾Œã—ã¾ã™ãŒï¼Œå…ˆã«get_yaw_from_quaternioné–¢æ•°ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ï¼\ndef get_yaw_from_quaternion(self, quaternion): e = tf.transformations.euler_from_quaternion( (quaternion.x, quaternion.y, quaternion.z, quaternion.w)) return e[2]   tfãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®euler_from_quaternioné–¢æ•°ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ï¼  euler_from_quaternion()ã¯ï¼Œã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³(4è¦ç´ )ã‚’å¼•æ•°ã¨ã—ã¦ï¼Œã‚ªã‚¤ãƒ©ãƒ¼è§’(3è¦ç´ )ã‚’è¿”ã™é–¢æ•°ã§ã™ï¼ ã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã«ã¤ã„ã¦ã¯Learn/ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®ã‚»ãƒ³ã‚µæƒ…å ±ã‚’ç”¨ã„ãŸåˆ¶å¾¡/ã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã®é …ç›®ã§èª¬æ˜ã—ã¾ã—ãŸï¼   Odometryå‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã†ã¡ï¼Œå§¿å‹¢ã‚’è¡¨ã™orientationã¨ã„ã†è¦ç´ ã¯ï¼Œã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã§è¡¨ã•ã‚Œã¦ã„ã‚‹ãŸã‚ï¼Œã‚ªã‚¤ãƒ©ãƒ¼è§’ã§åˆ¶å¾¡ã—ãŸã„å ´åˆã«ã¯ï¼Œã“ã®é–¢æ•°ã‚’ç”¨ã„ã¦ã‚ªã‚¤ãƒ©ãƒ¼è§’ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ ãƒ«ãƒ³ãƒã¯xyå¹³é¢ä¸Šã‚’å‹•ããŸã‚ï¼Œzè»¸å‘¨ã‚Šã®ã‚ªã‚¤ãƒ©ãƒ¼è§’ã•ãˆã‚ã‹ã‚Œã°ååˆ†ã§ã™ï¼ãã®ãŸã‚ï¼Œã“ã®get_yaw_from_quaternioné–¢æ•°ã§ã¯ã‚ªã‚¤ãƒ©ãƒ¼è§’ã®zè»¸æˆåˆ†(ç¬¬2æˆåˆ†)ã®ã¿ã‚’è¿”ã—ã¦ã„ã¾ã™ï¼   go_straighté–¢æ•° def go_straight(self, dis, velocity=0.3): vel = Twist() x0 = self.x y0 = self.y while(np.sqrt((self.x-x0)**2+(self.y-y0)**2)\u0026lt;dis): vel.linear.x = velocity vel.angular.z = 0.0 self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop()  ãƒ­ãƒœãƒƒãƒˆã‚’ç›´é€²ã•ã›ã‚‹é–¢æ•°ã§ã™ï¼é †ã«èª¬æ˜ã—ã¾ã™\n vel = Twist()   Twistå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ï¼  x0 = self.x y0 = self.y   self.x, self.yã«ã¯ï¼Œã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã§æ›´æ–°ã•ã‚ŒãŸ(ç›´å‰ã®)ãƒ«ãƒ³ãƒã®ä½ç½®ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ï¼ãã‚Œã‚’x0, y0ã«ä»£å…¥ã—ã¦ã„ã¾ã™ï¼  while(np.sqrt((self.x-x0)**2+(self.y-y0)**2)\u0026lt;dis): vel.linear.x = velocity vel.angular.z = 0.0 self.cmd_vel_pub.publish(vel) rospy.sleep(0.1)   ç‚¹(self.x, self.y)ã¨ç‚¹(x0, y0)ã®è·é›¢ãŒæŒ‡å®šã—ãŸdisã‚ˆã‚Šå°ã•ã„é–“ï¼Œwhileä»¥ä¸‹ã®å‡¦ç†ã‚’ç¹°ã‚Šè¿”ã—ã¾ã™ï¼  velã®ä¸¦é€²æˆåˆ†ã®xæˆåˆ†ã«ï¼Œå¼•æ•°ã§æŒ‡å®šã—ãŸvelocityã®å€¤ã‚’æ ¼ç´ã—ã¾ã™ï¼ velã®å›è»¢æˆåˆ†ã®zæˆåˆ†(zè»¸å‘¨ã‚Šã®è§’é€Ÿåº¦)ã«ï¼Œ0ã‚’æ ¼ç´ã—ã¾ã™ï¼ ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ä¸­ã§å®šç¾©ã—ãŸpublisherã§ã‚ã‚‹self.cmd_vel_pubã®.publish()é–¢æ•°ã‚’ç”¨ã„ã¦ï¼Œpublishã‚’è¡Œã„ã¾ã™ï¼  å¼•æ•°ã«velã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã®ã§ï¼Œç¢ºã‹ã«Twistå‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ã—ã¦ã„ã¾ã™ï¼   rospy.sleep(0.1)ã§0.1ç§’å¾…ã¡ï¼Œæ¬¡ã®ãƒ«ãƒ¼ãƒ—ã«å…¥ã‚Šã¾ã™ï¼    self.stop()   whileæ–‡ãŒçµ‚äº†ã—ãŸã‚‰ï¼Œãƒ­ãƒœãƒƒãƒˆã‚’åœæ­¢ã•ã›ã¾ã™ï¼  stopé–¢æ•°ã«ã¤ã„ã¦ã¯ï¼Œèª¬æ˜ã‚’çœç•¥ã—ã¾ã™ï¼   turn_right, turn_lefté–¢æ•°ã«ã¤ã„ã¦ã‚‚ï¼Œgo_straighté–¢æ•°ã®èª¬æ˜ã¨åŒæ§˜ãªã®ã§çœç•¥ã—ã¾ã™ï¼   å˜ç´”ã« \u0026ldquo;(è§’)é€Ÿåº¦ * æ™‚é–“\u0026rdquo; ã«ã‚ˆã£ã¦ç§»å‹•ã®å§¿å‹¢ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã®ã§ã¯ãªãï¼Œã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®ã‚»ãƒ³ã‚µæƒ…å ±ã‚’ä½¿ã„ãªãŒã‚‰ï¼Œ ç›®æ¨™ã®å§¿å‹¢ã«åˆ°é”ã™ã‚‹ã‚ˆã†ã«åˆ¶å¾¡ã—ã¦ã„ã‚‹ã“ã¨ã‚’å†åº¦å¼·èª¿ã—ã¦ãŠãã¾ã™ï¼\npythonã®ã‚³ãƒ¼ãƒ‰ã®èª­ã¿æ–¹ã«ã¤ã„ã¦ã®åŸºæœ¬çš„ãªèª¬æ˜ã¯ä¸Šã®èª¬æ˜ã§å°½ãã¦ã„ã‚‹ã®ã§ï¼Œ ä½™åŠ›ãŒã‚ã‚Œã°ï¼ˆãªãã¦ã‚‚ï¼‰å„è‡ªroomba_hackãƒªãƒã‚¸ãƒˆãƒª ä¸Šã®æ°—ã«ãªã£ãŸã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã¿ã¾ã—ã‚‡ã†ï¼\næ¼”ç¿’ ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘ãã‚Œãã‚Œdockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹• ï¼ jetsonã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ ssh roomba_dev1 (jetson):~$ cd ~/group_a/roomba_hack (jetson):~/group_a/roomba_hack ./RUN-DOCKER-CONTAINER.sh (jetson)(docker):~/roomba_hack#  é–‹ç™ºPCã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ cd ~/group_a/roomba_hack (é–‹ç™ºPC):~/group_a/roomba_hack ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x (é–‹ç™ºPC)(docker):~/roomba_hack#   ã€jetsonã€‘ROSãƒã‚¹ã‚¿ï¼Œå„ç¨®ãƒãƒ¼ãƒ‰ã‚’èµ·å‹• (jetson)(docker):~/roomba_hack# roslaunch roomba_bringup bringup.launch   ROSãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¯è¦–åŒ– ã€é–‹ç™ºPCã€‘topicã®ç¢ºèª /odomã®å‹ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic type /odom  /odomã®ä¸­èº«ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic echo /odom   ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’ä½¿ã£ãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ ãã‚Œã§ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã‚’é–‹ç™ºPCã«æ¥ç¶šã—ã¦ï¼Œsimple_control2.pyã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ï¼\né–‹ç™ºPCã§teleopã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†\n(é–‹ç™ºPC)(docker):~/roomba_hack# roslaunch roomba_teleop teleop.launch  ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã™ã¨ãã«ã¯ï¼Œã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®Yãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‹ã‚‰Bãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦autoãƒ¢ãƒ¼ãƒ‰ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†ï¼\n1ãƒ¡ãƒ¼ãƒˆãƒ«ã»ã©å‰ã«é€²ã‚“ã ã‚ã¨ï¼Œå·¦ã«90åº¦ç¨‹åº¦æ—‹å›ã—ï¼Œå³ã«90åº¦ç¨‹åº¦æ—‹å›ã—ãŸã‚‰æˆåŠŸã§ã™ï¼\n(é–‹ç™ºPC)(docker):~/roomba_hack# rosrun navigation_tutorial simple_control2.py  try it! simple_control2.pyã®ä¸­èº«ã‚’èª­ã‚“ã§ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ã¿ã‚ˆã†\n","date":1687392e3,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1687392e3,"objectID":"2ee7ed9f0716848dbd6ffe877377e500","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap3/sensing2/","publishdate":"2023-06-22T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap3/sensing2/","section":"course","summary":"è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\n","tags":null,"title":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¡","type":"book"},{"authors":null,"categories":null,"content":" ã“ã‚Œã¯ 2023 å¹´åº¦ã®æƒ…å ±ã§ã™ã€‚ä»Šå¾Œå¤‰æ›´ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚   æœ€çµ‚èª²é¡Œã«ã¤ã„ã¦ æœ€çµ‚èª²é¡Œç™ºè¡¨ä¼šã®æ—¥ç¨‹ã¯8/30ã§ã™ã€‚\nãã‚Œã¾ã§ã«å„ãƒãƒ¼ãƒ ã§ä»¥ä¸‹ã®ã‚¿ã‚¹ã‚¯ã‚’è¡Œã†ã‚³ãƒ¼ãƒ‰ã‚’æº–å‚™ã—ã¦ãã ã•ã„ã€‚ ã¾ãŸã€ãƒãƒ¼ãƒ ã§GitHubã«ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã€æº–å‚™ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚\nã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’å®Œç’§ã«å®Ÿè£…ã—ã‚ˆã†ã¨ã™ã‚‹ã¨å°‘ã—å¤§å¤‰ãªã®ã§ã€ã¾ãšã¯ã€ãƒ’ãƒ³ãƒˆã‚’å‚è€ƒã«ã€Œã¯ã˜ã‚ã®ä¸€æ­©ã€ã‚’å®Ÿè£…ã™ã‚‹ã®ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚\nãƒ«ãƒ¼ãƒ«ã®è³ªå•ã€å®Ÿè£…ã®ã‚„ã‚Šæ–¹ãªã©ã‚ã‹ã‚‰ãªã„ã“ã¨ã¯ #q-roomba ã§è³ªå•ãŠé¡˜ã„ã—ã¾ã™ï¼ ã¾ãŸã€è§’å·ã§ã‚‚è³ªå•å¯¾å¿œãƒ‡ãƒ¼ã‚’è¨­ã‘ã‚‹äºˆå®šã§ã™ã€‚\nãƒ«ãƒ¼ãƒ« 1ãƒãƒ¼ãƒ ãšã¤Task1ã¨Task2ã®2ã¤ã®ã‚¿ã‚¹ã‚¯ã‚’è¡Œã„ã€ãã®åˆè¨ˆç‚¹ã‚’ç«¶ã„ã¾ã™ã€‚\nãã‚Œãã‚Œã®ã‚¿ã‚¹ã‚¯ã¯å›³ã®ç’°å¢ƒã§è¡Œã‚ã‚Œã¾ã™ã€‚(è§’å·ã«ã‚ã‚‹ç’°å¢ƒã§ã™ã€‚)\n  ã‚¿ã‚¹ã‚¯ãŒãŠã“ãªã‚ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å›³  ãã‚Œãã‚Œã®Taskã®Staring Pointã§ã¯ãƒ«ãƒ³ãƒã®è‡ªå·±ä½ç½®ã‚’åˆã‚ã›ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€ä¸€åº¦ãƒ«ãƒ³ãƒãŒå‹•ãå§‹ã‚ãŸã‚‰äººãŒä»‹å…¥ã™ã‚‹ã“ã¨ãŒã§ããªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚(ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã‚’é™¤ã)\nTask1 ãƒ«ãƒ¼ãƒ« Task1ã§ã¯ã€3åˆ†ã®åˆ¶é™æ™‚é–“ã®é–“ã§ã€Room1ã®Starting Pointã‹ã‚‰ãƒ«ãƒ³ãƒã‚’è‡ªå¾‹ç§»å‹•ã•ã›ã€Area1å†…ã«è½ã¡ã¦ã„ã‚‹5ã¤ã®ç‰©ä½“ã‚’é¿ã‘ãªãŒã‚‰Room2ã¸ã¨ç§»å‹•ã™ã‚‹ã“ã¨ãŒç›®æ¨™ã«ãªã‚Šã¾ã™ã€‚\né€”ä¸­ã§ãƒ­ãƒœãƒƒãƒˆãŒåœæ­¢ã—ãŸå ´åˆãªã©ã¯å†ã³Starting Pointã‹ã‚‰ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nã¾ãŸã€Area1å†…ã«è½ã¡ã¦ã„ã‚‹5ã¤ã®ç‰©ä½“ã‚’æ¤œå‡ºã—ã€æ­£ã—ãåˆ†é¡ã™ã‚‹ã“ã¨ã§è¿½åŠ ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nã‚¿ã‚¹ã‚¯çµ‚äº†æ™‚ã«Area1å†…ã§å‡ºã¦ããŸç‰©ä½“ã®åå‰ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚\nã¾ãŸã€5ã¤ã®ç‰©ä½“ã¯ä»¥ä¸‹ã®8å€‹ã®ç‰©ä½“ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã•ã‚Œã¾ã™ã€‚\n  Task1ã§å‡ºç¾ã™ã‚‹ç‰©ä½“  ç‰©ä½“ã®åå‰ã¯å·¦ã‹ã‚‰é †ã«\n chips can mini soccor ball rubic cube banana apple strawberry toy plane wood block ã§ã™ã€‚  å®Ÿéš›ã«ä½¿ç”¨ã™ã‚‹ç‰©ä½“ã¯è§’å·ã«ç½®ã„ã¦ã‚ã‚Šã¾ã™ã€‚\n æ¡ç‚¹åŸºæº– ã‚´ãƒ¼ãƒ«å¾—ç‚¹ã¨ç‰©ä½“æ¤œå‡ºå¾—ç‚¹ãã‚Œãã‚Œ100ç‚¹æº€ç‚¹ã§ã™ã€‚ã¾ãŸã€ã‚´ãƒ¼ãƒ«å¾—ç‚¹ã¨ç‰©ä½“æ¤œå‡ºå¾—ç‚¹ãã‚Œãã‚Œã®å¾—ç‚¹ãŒè² ã«ãªã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\nã‚´ãƒ¼ãƒ«å¾—ç‚¹å†…è¨³(100ç‚¹æº€ç‚¹)\nåˆ¶é™æ™‚é–“ä»¥å†…ã«ã‚´ãƒ¼ãƒ«(Room2)ã«è¾¿ã‚Šç€ã‘ãŸã‚‰100ç‚¹ã€ç‰©ä½“ã«è¡çªã™ã‚‹ãŸã³ã«ç‰©ä½“ã”ã¨ã«-20ç‚¹ã€åŠ ãˆã¦ã€ãƒ­ãƒœãƒƒãƒˆã‚’Starting Pointã‹ã‚‰ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹åº¦ã«-10ç‚¹\nç‰©ä½“æ¤œå‡ºå¾—ç‚¹å†…è¨³(100ç‚¹æº€ç‚¹)\næ¤œå‡ºçµæœã®åˆ†é¡çµæœãŒæ­£ã—ã‘ã‚Œã°ç‰©ä½“ã”ã¨ã«+20ç‚¹ã€é–“é•ã£ã¦ã„ãŸã‚‰-20ç‚¹\n ãƒ’ãƒ³ãƒˆ ã¯ã˜ã‚ã®ä¸€æ­©\n Task1ã¯ã¾ãšã€ã‚´ãƒ¼ãƒ«ã¸ç§»å‹•ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’ç›®æ¨™ã«ã—ã¾ã—ã‚‡ã† (ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ãŸã‚ã®ãƒ’ãƒ³ãƒˆå‚ç…§) ä½™è£•ãŒã‚ã‚Œã°ã€ä»–ã®ãƒ’ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦é«˜å¾—ç‚¹ã‚’ç›®æŒ‡ã—ã¦ã„ãã¾ã—ã‚‡ã†  ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ãŸã‚ã®ãƒ’ãƒ³ãƒˆ\n ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã‚³ãƒ¼ãƒ‰(https://matsuolab.github.io/roomba_hack_course/course/chap6/service-actionlib/ ã®æ¼”ç¿’)ã‚’å‚è€ƒã«ã€æŒ‡å®šã—ãŸä½ç½®ã¸ç§»å‹•ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†  éšœå®³ç‰©ã‚’é¿ã‘ãªãŒã‚‰navigationã™ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆ\n ç‰©ä½“æ¤œå‡ºå™¨ã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆãŠã‚ˆã³ https://matsuolab.github.io/roomba_hack_course/course/chap6/service-actionlib/ ã®ç·åˆèª²é¡Œã‚’å‚ç…§ã—ã€èª²é¡Œç‰©ä½“ã‚’æ¤œå‡ºã—ã€ãã‚Œã‚’ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã«è¿½åŠ ã™ã‚‹ã“ã¨ã§éšœå®³ç‰©ã‚’é¿ã‘ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†  ã‚ˆã‚Šæ­£ç¢ºãªè‡ªå·±ä½ç½®æ¨å®šã‚’è¡Œã†ãŸã‚ã®ãƒ’ãƒ³ãƒˆ\n amclã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ (å‚è€ƒ: https://matsuolab.github.io/roomba_hack_course/course/chap4/localization/ ã®æ¼”ç¿’)ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã† gmappingã‚’ç”¨ã„ã¦ã‚ˆã‚Šæ­£ç¢ºãªåœ°å›³ã‚’ä½œæˆ (å‚è€ƒ: https://matsuolab.github.io/roomba_hack_course/course/chap4/localization/ ã®æ¼”ç¿’)ã—ã¦ã¿ã¾ã—ã‚‡ã† emcl(https://github.com/ryuichiueda/emcl)ç­‰ã®ç•°ãªã‚‹è‡ªå·±ä½ç½®æ¨å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã† Lidarã®ä½ç½®ã‚’åˆã‚ã›ã‚’ã‚ˆã‚Šæ­£ç¢ºã«(https://github.com/matsuolab/roomba_hack/blob/master/catkin_ws/src/roomba/roomba_description/urdf/roomba.urdf.xacro ã‚’ç·¨é›†)åˆã‚ã›ã¦ã¿ã¾ã—ã‚‡ã†  ç‰©ä½“æ¤œå‡ºå™¨ã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆ\n è‡ªä½œãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦æ—¢å­˜ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’ (å‚è€ƒ: https://eng-memo.info/blog/yolo-original-dataset/) ã‚’è¡Œã£ã¦ã¿ã¾ã—ã‚‡ã†   Task2 ãƒ«ãƒ¼ãƒ« Task2ã§ã¯ã€3åˆ†ã®åˆ¶é™æ™‚é–“ã®é–“ã§ã€Room2ã®Starting Pointã‹ã‚‰ãƒ«ãƒ³ãƒã‚’è‡ªå¾‹ç§»å‹•ã•ã›ã€Area2ã«ã„ã‚‹2äººã®äººã®ã†ã¡ã€æ‰‹ã‚’æŒ¯ã£ã¦ã„ã‚‹äººã®å‰ã§åœæ­¢ã™ã‚‹ã“ã¨ãŒç›®æ¨™ã«ãªã‚Šã¾ã™ã€‚\nã¾ãŸã€2äººã®äººãŒArea2ã«ã‚ã‚‹2ã¤ã®æ¤…å­ã«åº§ã£ã¦ãŠã‚Šã€ãã®ã†ã¡ä¸€æ–¹ã®ã¿ãŒæ‰‹ã‚’æŒ¯ã£ã¦ã„ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¦ã„ã¾ã™ã€‚\né€”ä¸­ã§ãƒ­ãƒœãƒƒãƒˆãŒåœæ­¢ã—ãŸå ´åˆãªã©ã¯å†ã³Starting Pointã‹ã‚‰ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n æ¡ç‚¹åŸºæº– Task2å…¨ä½“ã§150ç‚¹æº€ç‚¹ã§ã™ã€ã¾ãŸã€Task2ã®å¾—ç‚¹ãŒè² ã«ãªã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\næ™‚é–“ä»¥å†…ã«ã„ãšã‚Œã‹ã®äººã®å‰ã«ç§»å‹•ãŒæˆåŠŸã—ã€ãã®å ´ã§åœæ­¢ã™ã‚‹(äººã®50cmä»¥å†…ã«åˆ°é”ã™ã‚‹)+70ç‚¹\nä¸Šã«åŠ ãˆã€æ­£ã—ã„äºº(æ‰‹ã‚’æŒ¯ã£ã¦ã„ã‚‹äºº)ã®å‰ã«ç§»å‹•ãŒæˆåŠŸã™ã‚‹+80ç‚¹\nåŠ ãˆã¦ã€ãƒ­ãƒœãƒƒãƒˆã‚’Starting Pointã‹ã‚‰ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹åº¦ã«-10ç‚¹\n ãƒ’ãƒ³ãƒˆ ã¯ã˜ã‚ã®ä¸€æ­©\n Task2ã¯ã¾ãšã€äººã‚’æ¤œå‡ºã—ã¦ç§»å‹•ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’ç›®æ¨™ã«ã—ã¾ã—ã‚‡ã† (äººã‚’æ¤œå‡ºã—ã¦ç§»å‹•ã™ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆå‚ç…§) ä½™è£•ãŒã‚ã‚Œã°æ‰‹ã‚’æŒ¯ã£ã¦ã„ã‚‹äººã®æ¤œå‡ºã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¾ã—ã‚‡ã†  äººã‚’æ¤œå‡ºã—ã¦ç§»å‹•ã™ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆ\n äººã‚’æ¤œå‡ºã™ã‚‹éƒ¨åˆ†ã«ã¤ã„ã¦ã¯ä¸‰æ¬¡å…ƒç”»åƒå‡¦ç†ã§æ‰±ã£ãŸYOLOv3ã§æ¤œå‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ æ¤œå‡ºã—ãŸçµæœã«å¯¾å¿œã™ã‚‹æ·±åº¦ç”»åƒã‹ã‚‰è·é›¢ã‚’å–å¾—ã™ã‚‹ã“ã¨ã§ã€äººã®è¿‘ãã¸ç§»å‹•ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ (å‚è€ƒ: https://matsuolab.github.io/roomba_hack_course/course/chap5/three-dimensions/ ã®detection_distance.py) ã•ã‚‰ã«ä½™è£•ãŒã‚ã‚Œã°ã€æ·±åº¦ç”»åƒã‚’ç‚¹ç¾¤ç­‰ã«å¤‰æ›ã™ã‚‹ã¨ã‚ˆã‚Šæ­£ç¢ºãªç§»å‹•ãŒå¯èƒ½ã«ãªã‚Šã¾ã™  æ‰‹ã‚’æŒ¯ã£ã¦ã„ã‚‹äººã®æ¤œå‡º\n å­¦ç¿’æ¸ˆã¿ã®Keypoint R-CNNã‚’ç”¨ã„ã‚‹ã“ã¨ã§äººé–“ã®æ‰‹ã‚„è…•ã®ä½ç½®ãªã©ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’æ¨å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚   æŠ€è¡“ãƒ—ãƒ¬ã‚¼ãƒ³ã«ã¤ã„ã¦ æœ€çµ‚ç«¶æŠ€ä¼šã®ãŸã‚ã«é–‹ç™ºã—ãŸæŠ€è¡“ã«ã¤ã„ã¦ã€ç™ºè¡¨ä¼šã§ãƒ—ãƒ¬ã‚¼ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚ ãƒ—ãƒ¬ã‚¼ãƒ³ã®è©•ä¾¡æ–¹æ³•ã¯ RoboCup@Home ã®ãƒ«ãƒ¼ãƒ« ã«åŸºã¥ã„ã¦ã„ã¾ã™ï¼ˆ7.2 Evaluating Juries for Final Demonstrations å‚ç…§ï¼‰ã€‚ è©•ä¾¡é …ç›®ã¯ã€internal jury ã¨ external jury ã§ç•°ãªã£ã¦ã„ã¾ã™ã€‚\n internal juryï¼ˆå¤§ä¼šå‚åŠ è€…ã«ã‚ˆã‚‹ç›¸äº’è©•ä¾¡ï¼‰  Efficacy/elegance of the solution  ã‚¿ã‚¹ã‚¯ã®è§£æ±ºç­–ã®åŠ¹æœã®é«˜ã• / ã‚¨ãƒ¬ã‚¬ãƒ³ã‚¹ã•   Difficulty of the overall demonstration  å…¨ä½“çš„ãªæŠ€è¡“çš„é›£æ˜“åº¦ã®é«˜ã•     external juryï¼ˆå¤§ä¼šé‹å–¶è€…ã«ã‚ˆã‚‹å¤–éƒ¨è©•ä¾¡ï¼‰  Originality and presentation (story-telling is to be rewarded)  ã‚ªãƒªã‚¸ãƒŠãƒªãƒ†ã‚£ã€ãƒ—ãƒ¬ã‚¼ãƒ³ã®å®Œæˆåº¦   Elegance/success of overall demonstration  å…¨ä½“çš„ãªã‚¨ãƒ¬ã‚¬ãƒ³ã‚¹ã•ã€é”æˆåº¦      å„é …ç›® 10 ç‚¹æº€ç‚¹ã§è©•ä¾¡ã—ã€internal, external ãã‚Œãã‚Œã®å¹³å‡å€¤ã®åˆè¨ˆã‚’å¾—ç‚¹ã¨ã—ã¾ã™ã€‚\n","date":1687392e3,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1687392e3,"objectID":"b048517e8455bfa798e5d9368632cd92","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap8/final_project/","publishdate":"2023-06-22T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap8/final_project/","section":"course","summary":"","tags":null,"title":"æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ","type":"book"},{"authors":null,"categories":null,"content":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºç’°å¢ƒã«ä½¿ã‚ã‚Œã¦ã„ã‚‹è¦ç´ ã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹\nLearn Linuxã‚³ãƒãƒ³ãƒ‰ ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚„ãƒ­ãƒœãƒƒãƒˆã®ç ”ç©¶ãƒ»é–‹ç™ºã§ã¯ã€Linuxã¨ã„ã†OS(Operating System)ãŒã‚ˆãä½¿ç”¨ã•ã‚Œã¾ã™ã€‚\nROSã¯Linux(ã¨ãã«Ubuntuã¨ã„ã†ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³)ã§å‹•ä½œã™ã‚‹ã“ã¨ã‚’æƒ³å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ROSã‚’ä½¿ã†ã«ã¯ã‚ã‚‹ç¨‹åº¦Linuxã®çŸ¥è­˜ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ Linuxã«ã¤ã„ã¦ã‚ã¾ã‚ŠçŸ¥ã‚‰ãªã„ã¨ã„ã†æ–¹ã¯ã€å‰ã‚‚ã£ã¦èª¿ã¹ã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†(å‚è€ƒ)ã€‚ ç‰¹ã«ã€Linuxã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦è»½ãçŸ¥ã£ã¦ãŠãã¨ROSè‡ªä½“ã®ç†è§£ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™ã€‚\n\u0026quot;\u0026quot;\u0026quot; ã“ã“ã§ã¯Linuxã®ã‚³ãƒãƒ³ãƒ‰ã‚’ååˆ†ã«èª¬æ˜ã§ããªã„ã®ã§ã€ã‚³ãƒãƒ³ãƒ‰ã®ä¾‹ã‚’æŒ™ã’ã‚‹ã“ã¨ã«ç•™ã‚ã¾ã™ã€‚ è©³ã—ã„ã‚µã‚¤ãƒˆã«æ²¿ã£ã¦è‡ªåˆ†ã§ä½¿ã„ãªãŒã‚‰è¦šãˆã¦ã„ãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ \u0026quot;\u0026quot;\u0026quot; # ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª(è‡ªåˆ†ãŒä»Šã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª)ã‚’ç¢ºèª pwd # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¡¨ç¤º ls # ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å¤‰æ›´ cd \u0026lt;DirectoryName\u0026gt; # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ mkdir \u0026lt;NewDirectoryName\u0026gt; # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤ rmdir \u0026lt;DirectoryName\u0026gt; # ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ touch \u0026lt;NewFileName\u0026gt; # ãƒ•ã‚¡ã‚¤ãƒ«æ¶ˆå» rm \u0026lt;FileName\u0026gt; # ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’è¡¨ç¤º cat \u0026lt;FileName\u0026gt;  ã‚¨ãƒ‡ã‚£ã‚¿ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ãã«ä½¿ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’Editorï¼ˆã‚¨ãƒ‡ã‚£ã‚¿ï¼‰ã¨å‘¼ã³ã¾ã™ã€‚\nãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãªã®ã§ãƒ¡ãƒ¢å¸³ã§ã‚‚åŒã˜äº‹ãŒã§ãã‚‹ã®ã§ã™ãŒã€ã‚¨ãƒ‡ã‚£ã‚¿ã«ã¯ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒå¤šãã€åŠ¹ç‡ã‚ˆãã‚³ãƒ¼ãƒ‰ãŒç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nç ”ç©¶å®¤ã®PCã§ã¯ä»¥ä¸‹ã®äºŒã¤ãŒä½¿ç”¨ã§ãã¾ã™ã€‚\n vim  ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ã„ã‚¨ãƒ‡ã‚£ã‚¿ã€‚ macã ã¨æ¨™æº–ã§ä½¿ãˆã‚‹ã€‚  ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§vimtutorã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒå—ã‘ã‚‰ã‚Œã‚‹.   Windowsã ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚   vscode  visual studio code ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ ã•ã¾ã–ã¾ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã§ãã€ã¨ã¦ã‚‚ä¾¿åˆ© è©³ã—ã„å‹•ç”»    Git/GitHub  Gitã¨ã¯   ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒç°¡å˜ã«ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã€‚\nä½¿ã„æ–¹ã‚’çŸ¥ã£ã¦ãŠãã¨é–‹ç™ºãŒå¿«é©ã«ãªã‚Šã¾ã™ã€‚\n  è©³ã—ã„è¨˜äº‹(ã‚³ãƒãƒ³ãƒ‰ãªã—)\n  è©³ã—ã„è¨˜äº‹(ã‚³ãƒãƒ³ãƒ‰ã‚ã‚Š)\n   GitHubã¨ã¯   gitã§ç®¡ç†ã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»–ã®äººã¨å…±æœ‰ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã€‚\nãƒãƒ¼ãƒ é–‹ç™ºã§å¤§å¤‰é‡å®ã—ã¾ã™ã€‚\nè‡ªåˆ†ãŒæ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã‚’å…¬é–‹ã—ã¦ä¸–ç•Œä¸­ã®äººã«ä½¿ã£ã¦ã‚‚ã‚‰ã£ãŸã‚Šã€ä»–ã®äººãŒå…¬é–‹ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã‚ã›ã¦ã‚‚ã‚‰ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n  https://github.co.jp/\n  è©³ã—ã„è¨˜äº‹\n  Gitã¨GitHubã‚’ç”¨ã„ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼\n  ã“ã®ã‚µã‚¤ãƒˆã‚‚GitHubã‚’ä½¿ã£ã¦é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚(ã“ã®ã‚µã‚¤ãƒˆã®ãƒªãƒã‚¸ãƒˆãƒª)\n  å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®ä¾‹\n https://github.com/gundam-global-challenge/gundam_robot      Docker   Dockerã¨ã¯\nã€Œãƒ‡ãƒ¼ã‚¿ã‚„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’éš”é›¢ã§ãã‚‹ã€ä»•çµ„ã¿ã€‚\n  ä¾‹ãˆã°ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ä¸­ã§ã‚·ã‚¹ãƒ†ãƒ Aã¨ã‚·ã‚¹ãƒ†ãƒ Bã‚’å‹•ã‹ã—ãŸã„ã¨ã—ã¾ã™ã€‚ãã—ã¦ã€ã“ã‚Œã‚‰ã¯ä»–ã®ã‚·ã‚¹ãƒ†ãƒ Cã«ä¾å­˜ã—ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚\nã‚‚ã—ã€AãŒCã®ver.2ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¦ã€Bã¯Cã®ver.3ã«ã®ã¿å¯¾å¿œã—ã¦ã„ãŸå ´åˆã€Bã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«Cã‚’ver.3ã«ã—ã¦ã—ã¾ã†ã¨ã€AãŒå®Ÿè¡Œã§ããªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚\n  ã“ã®ã‚ˆã†ãªå ´åˆã€dockerã‚³ãƒ³ãƒ†ãƒŠã‚’è¤‡æ•°ä½œæˆã—ï¼ˆã‚³ãƒ³ãƒ†ãƒŠIã€ã‚³ãƒ³ãƒ†ãƒŠIIã¨ã—ã¾ã™ï¼‰ã€\n ã‚³ãƒ³ãƒ†ãƒŠIã®ä¸­ã«ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ Aã¨Cã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³2ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ã„ã€ ã‚³ãƒ³ãƒ†ãƒŠIIã®ä¸­ã«ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ Bã¨Cã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³3ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ç”¨ã™ã‚‹  ã®ã‚ˆã†ãªã“ã¨ã“ã¨ãŒã§ãã¾ã™ã€‚\n    ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã®ç’°å¢ƒã¯PCæœ¬ä½“ã®ç’°å¢ƒã‹ã‚‰ã¯éš”é›¢ã•ã‚Œã‚‹ãŸã‚ã€å®‰å…¨ã«é–‹ç™ºã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™(ä»–ã®äººãŒæ›¸ã„ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå‹•ã‹ãªããªã‚‹ã¨ã„ã†ã“ã¨ã‚‚é˜²ã’ã‚‹)ã€‚\n    è©³ã—ã„è¨˜äº‹\n  : -f   ``` - Docker Image ``` # Docker imageä¸€è¦§ docker images # Docker Imageã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ docker pull : # å‰Šé™¤ docker rmi  # ä¸è¦ãªDocker imageã‚’æ¶ˆã™ docker image prune ``` - Docker Container ``` # Docker containerã®èµ·å‹• docker run   # Docker containerä¸€è¦§ docker ps -a # Docker containerã«æ¥ç¶š docker exec -it  bash ``` -- ` - ã‚³ãƒ³ãƒ†ãƒŠã®åå‰ã®æŒ‡å®š - `--rm` - ã‚³ãƒ³ãƒ†ãƒŠã‚’æŠœã‘ãŸéš›ã«è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤ã™ã‚‹ - `--gpus all` - ã‚³ãƒ³ãƒ†ãƒŠã«å…¨gpuã‚’æ¸¡ã™ - gpuã®å€‹æ•°ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ all ã®ä»£ã‚ã‚Šã«æ•°å­—(0, 1,...) - gpuã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ `--gpus '\"device=0,1\"'` - `-v ` - ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ãƒ›ã‚¹ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ - `-p :` - ãƒ›ã‚¹ãƒˆã®ãƒãƒ¼ãƒˆã‚’ã‚³ãƒ³ãƒ†ãƒŠã®ãƒãƒ¼ãƒˆã«ãƒãƒƒãƒ—ã™ã‚‹ - ã‚³ãƒ³ãƒ†ãƒŠå†…ã§webã‚µãƒ¼ãƒã‚’å‹•ã‹ã™å ´åˆãªã©ã«ä½¿ã† - `--net=host` - ã‚³ãƒ³ãƒ†ãƒŠã¨ãƒ›ã‚¹ãƒˆã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’å…±æœ‰ã™ã‚‹(IPã‚¢ãƒ‰ãƒ¬ã‚¹ãªã©ãŒåŒã˜ã«ãªã‚‹) - ROSãƒãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å‹•ã‹ã™å ´åˆãªã©ã¯ã“ã‚Œã‚’ä½¿ã†ã¨æ¥½ - `--privileged` - ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã®ãƒ‡ãƒã‚¤ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ - ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰WEBã‚«ãƒ¡ãƒ©ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„ã¨ããªã© -- ssh   sshã¨ã¯\n  sshã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºPCã‹ã‚‰ãƒ«ãƒ³ãƒã«è¼‰ã£ã¦ã„ã‚‹jetsonã¨ã„ã†ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚’é éš”ã§æ“ä½œã™ã‚‹ã“ã¨ã‚„ã€å„è‡ªã®PCã‹ã‚‰é–‹ç™ºPCã‚’é éš”ã§æ“ä½œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n  @ -p  -i  ``` -- æ¼”ç¿’ æ¼”ç¿’ã«ã¯å€‹äººPC, é–‹ç™ºPC, ãƒ«ãƒ³ãƒã«æ­è¼‰ã•ã‚Œã¦ã„ã‚‹jetsonã®3ç¨®é¡ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚’ç”¨ã„ã¾ã™ã€‚\né–‹ç™ºPC : robot_devç³», hsr_devç³»\njetson : roomba_devç³»\nã€sshã€‘é–‹ç™ºç”¨PCã«sshã™ã‚‹ å€‹äººPCã‹ã‚‰é–‹ç™ºPCã«sshã™ã‚‹\n(å€‹äººPC):~$ vim ~/.ssh/config (å€‹äººPC):~$ ssh robot_dev2  sshã«æˆåŠŸã™ã‚‹ã¨\nrobot_dev2@robot-dev2:~$  ãªã©ã¨è¡¨è¨˜ãŒå¤‰ã‚ã‚Šã€é–‹ç™ºPCã«æ¥ç¶šã§ããŸã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚\n -- ã€Linuxã‚³ãƒãƒ³ãƒ‰ã€‘ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ç§»å‹•ã™ã‚‹ (é–‹ç™ºPC):~$ mkdir 23_group_x (é–‹ç™ºPC):~$ cd 23_group_x   ã€gitã€‘roomba_hackãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ç§»å‹•ã™ã‚‹ (é–‹ç™ºPC):~/23_group_x$ git clone https://github.com/matsuolab/roomba_hack.git (é–‹ç™ºPC):~/23_group_x$ ls # 23_group_xãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã«æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã§ãã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª (é–‹ç™ºPC):~/23_group_x$ cd roomba_hack (é–‹ç™ºPC):~/23_group_x/roomba_hack$ ls  https://github.com/matsuolab/roomba_hack ã‚’ãã®ã¾ã¾ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããŸã“ã¨ãŒç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚\n ã€gitã€‘ãƒ–ãƒ©ãƒ³ãƒã‚’ç¢ºèªã™ã‚‹ git branchã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n# ãƒ­ãƒ¼ã‚«ãƒ«ãƒ–ãƒ©ãƒ³ãƒã®ä¸€è¦§ã‚’è¡¨ç¤º (é–‹ç™ºPC):~/23_group_x/roomba_hack$ git branch   ã€dockerã€‘roomba_hackã®é–‹ç™ºç’°å¢ƒã®dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ # shellãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’catã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚ (é–‹ç™ºPC):~/23_group_x/roomba_hack$ cat BUILD-DOCKER-IMAGE.sh # ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ # ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€å¾Œã® # docker build . -f docker/${DOCKERFILE_NAME} -t ${IMAGE_NAME}:${TAG_NAME} --build-arg BASE_IMAGE=${BASE_IMAGE} # ã®éƒ¨åˆ†ã§Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã§ã™ã€‚ # shellãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¦dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã„ã¾ã™ã€‚ (é–‹ç™ºPC):~/23_group_x/roomba_hack$ ./BUILD-DOCKER-IMAGE.sh  ã€Œã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã¨ã¯ã€dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ç´ ã¨ãªã‚‹ã‚‚ã®ã§ã€ã‚³ãƒ³ãƒ†ãƒŠã®è¨­è¨ˆå›³ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚ä¸Šã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€roomba_hackã®é–‹ç™ºç’°å¢ƒã®dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä½œæˆã•ã‚Œã¾ã™ï¼ˆã¾ã ã‚³ãƒ³ãƒ†ãƒŠè‡ªä½“ã¯ä½œã£ã¦ã„ã¾ã›ã‚“ï¼‰ã€‚\n ã€sshã€‘jetsonã«sshã™ã‚‹ é–‹ç™ºç”¨PCã‹ã‚‰ãƒ«ãƒ³ãƒã«è¼‰ã£ã¦ã„ã‚‹jetson nanoã¸sshã—ã¾ã™ã€‚\n(é–‹ç™ºPC):~/23_group_x/roomba_hack$ ssh roomba_dev2 roomba_dev2@roomba-dev-jetson2:~$  å…ˆé ­ã®è¡¨è¨˜ãŒroomba_dev2@roomba-dev-jetson2ã¨å¤‰ã‚ã‚Šã€jetsonã¸æ¥ç¶šã•ã‚ŒãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚\njetsonã§ã‚‚åŒæ§˜ã«ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ç§»å‹•ã—ã€roomba_hackãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n ã€sshã€‘VNCã‚’ä½¿ã† å€‹äººPCã‹ã‚‰é–‹ç™ºPCã«sshã§æ¥ç¶š\n(å€‹äººPC):~$ ssh robot_dev2 -L 5900:localhost:5900  æ‰‹å…ƒã®VNC viewerã§localhost:5900ã‚’é–‹ã\n -- ","date":1686009600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1686009600,"objectID":"2a1ada4f20c1997bdd8592ad8bf5f9b1","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap1/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/","publishdate":"2023-06-06T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap1/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/","section":"course","summary":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºç’°å¢ƒã«ä½¿ã‚ã‚Œã¦ã„ã‚‹è¦ç´ ã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹\n","tags":null,"title":"é–‹ç™ºç’°å¢ƒ","type":"book"},{"authors":null,"categories":null,"content":"Learn  RGBDã‚«ãƒ¡ãƒ©ã‚’ç”¨ã„ã¦ä¸‰æ¬¡å…ƒç”»åƒå‡¦ç†ã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚\nRGBDã‚«ãƒ¡ãƒ©ã«ã¤ã„ã¦ RGBDã‚«ãƒ¡ãƒ©ã¨ã¯ã€è‰²(RGB)ã«åŠ ãˆã€æ·±åº¦(Depth)æƒ…å ±ã‚’å–å¾—ã§ãã‚‹ã‚«ãƒ¡ãƒ©ã®ã“ã¨ã§ã™ã€‚ å‘¨ã‚Šã®ç’°å¢ƒã‚’ä¸‰æ¬¡å…ƒã®ç©ºé–“ã¨ã—ã¦èªè­˜ã™ã‚‹ã“ã¨ã§ã€ãƒ­ãƒœãƒƒãƒˆã¯ã‚ˆã‚Šè¤‡é›‘ã«ãµã‚‹ã¾ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ æ¯”è¼ƒçš„å®‰ä¾¡ã§ã‚ˆãåˆ©ç”¨ã•ã‚Œã‚‹RGBDã‚«ãƒ¡ãƒ©ã¨ã—ã¦ã€Intelç¤¾è£½ã®RealSenseã‚„Microsoftç¤¾è£½ã®Xtion(ã‚¨ã‚¯ã‚·ã‚ªãƒ³)ãªã©ãŒã‚ã‚Šã¾ã™ã€‚\nRealSense ä»Šå›ã¯RGBDã‚«ãƒ¡ãƒ©ã¨ã—ã¦RealSenseD435ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚\nROSã§ç”¨ã„ã‚‹éš›ã«ã¯æ¨™æº–ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚\nroslaunch realsense2_camera rs_camera.launch  ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€2ç¨®é¡ã®ãƒˆãƒ”ãƒƒã‚¯\n/camera/color/image_raw (RGBç”»åƒ)\n/camera/depth/image_raw (ãƒ‡ãƒ—ã‚¹ç”»åƒ)\nãŒåˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nã“ã‚Œã‚‰ã®ãƒˆãƒ”ãƒƒã‚¯ã¯ã„ãšã‚Œã‚‚sensor_msgs/Imageå‹ã§ã™ã€‚\nRealSenseã¯RGBç”»åƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ãƒ‡ãƒ—ã‚¹ç”»åƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒç‰©ç†çš„ã«é›¢ã‚Œã¦ã„ã¾ã™ã€‚ ã“ã®ãŸã‚ã€ã“ã‚Œã‚‰2ã¤ã®ãƒˆãƒ”ãƒƒã‚¯ã¯ã„ãšã‚Œã‚‚ç”»åƒãƒ‡ãƒ¼ã‚¿ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãƒ”ã‚¯ã‚»ãƒ«ã®ä½ç½®é–¢ä¿‚ãŒå¯¾å¿œã—ã¦ãŠã‚‰ãšã€ãã®ã¾ã¾ç”»åƒå‡¦ç†ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚\nRealSenseã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®launchãƒ•ã‚¡ã‚¤ãƒ«(rs_camera.launch)ã‚’èµ·å‹•ã™ã‚‹éš›ã« \u0026ldquo;align_depth\u0026quot;ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’\u0026quot;true\u0026quot;ã«æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ—ã‚¹ç”»åƒã‚’RGBç”»åƒã®ãƒ”ã‚¯ã‚»ãƒ«ã«å¯¾å¿œã™ã‚‹ã‚ˆã†ã«å¤‰æ›ã—ãŸ /camera/aligned_depth_to_color/image_rawãƒˆãƒ”ãƒƒã‚¯ãŒä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nãŸã ã—ã€roomba_bringupãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®bringup.launchãƒ•ã‚¡ã‚¤ãƒ«ã®\n \u0026lt;include file=\u0026quot;$(find realsense2_camera)/launch/rs_camera.launch\u0026quot; if=\u0026quot;$(arg realsense)\u0026quot;\u0026gt; \u0026lt;arg name=\u0026quot;align_depth\u0026quot; value=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;/include\u0026gt;  ã®ç®‡æ‰€ãŒã“ã®æ“ä½œã«å¯¾å¿œã—ã¦ã„ãŸã‚ã€ä»Šå›ã¯ç‰¹åˆ¥ãªæ“ä½œã‚’ã›ãšã¨ã‚‚ /camera/aligned_depth_to_color/image_rawãƒˆãƒ”ãƒƒã‚¯ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚\nç‰©ä½“æ¤œå‡º ã¾ãšã¯3æ¬¡å…ƒæƒ…å ±ã‚’æ‰±ã‚ãšã€RGBç”»åƒ/camera/color/image_rawã®ã¿ã‚’ç”¨ã„ã¦ç”»åƒæ¤œå‡ºã‚’è¡Œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\nä»¥ä¸‹ã¯ã€ three-dementions_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® object_detection.py ã§ã™ã€‚\n /camera/color/image_rawã‚’subscribeã—ã€ ç‰©ä½“æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚‹YOLOv8ã«å…¥åŠ›ã—ã€ ç‰©ä½“æ¤œå‡ºã®çµæœã‚’bounding boxã¨ã—ã¦æç”»ã—ã€ /detection_resultã¨ã—ã¦publish  ã®å‡¦ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚\n#!/usr/bin/env python3 import copy from typing import List import cv2 import rospy from cv_bridge import CvBridge from sensor_msgs.msg import Image from ultralytics import YOLO from ultralytics.engine.results import Results class ObjectDetection: def __init__(self): rospy.init_node('object_detection', anonymous=True) # Publisher self.detection_result_pub = rospy.Publisher('/detection_result', Image, queue_size=10) # Subscriber rospy.Subscriber('/camera/color/image_raw', Image, self.callback_rgb) self.bridge = CvBridge() self.rgb_image = None self.model = YOLO('yolov8n.pt') def callback_rgb(self, data): cv_array = self.bridge.imgmsg_to_cv2(data, 'bgr8') self.rgb_image = cv_array def process(self): while not rospy.is_shutdown(): if self.rgb_image is None: continue results: List[Results] = self.model.predict(self.rgb_image) # plot bounding box tmp_image = copy.deepcopy(self.rgb_image) for result in results: boxes = result.boxes.cpu().numpy() names = result.names for xyxy, conf, cls in zip(boxes.xyxy, boxes.conf, boxes.cls): if conf \u0026lt; 0.5: continue x1, y1, x2, y2 = map(int, xyxy[:4]) cls_pred = cls tmp_image = cv2.rectangle(tmp_image, (x1, y1), (x2, y2), (0, 255, 0), 3) tmp_image = cv2.putText(tmp_image, names[cls_pred], (x1, y1), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0, 255, 0), 2) # publish image detection_result = self.bridge.cv2_to_imgmsg(tmp_image, \u0026quot;bgr8\u0026quot;) self.detection_result_pub.publish(detection_result) if __name__ == '__main__': od = ObjectDetection() try: od.process() except rospy.ROSInitException: pass  ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’ç‰©ä½“æ¤œå‡ºãƒ¢ãƒ‡ãƒ«ã«å…¥åŠ›ã¨ã—ã¦æ¸¡ã™ãŸã‚ã«ã¯ã€ãã®ç”»åƒãƒ‡ãƒ¼ã‚¿ã®å‹ãŒnp.ndarrayå‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ãã®ãŸã‚ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã§ã€å—ã‘å–ã£ãŸsensor_msgs/Imageå‹ã®ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’np.ndarrayå‹ã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚\ncv_array = self.bridge.imgmsg_to_cv2(data, 'bgr8')  ã®éƒ¨åˆ†ãŒã“ã®å‡¦ç†ã«å¯¾å¿œã—ã¾ã™ã€‚\nsubscriberã‚’å®£è¨€ã™ã‚‹ã¨ãã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’æŒ‡å®šã—ã¦ã€ subscribeã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã“ã®é–¢æ•°ã«æ¸¡ã™ã¨ã„ã†åŸºæœ¬çš„ãªå‡¦ç†ã®æµã‚Œã¯ã€ scanãªã©ä»–ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’æ‰±ã†subscriberã¨åŒã˜ã§ã™ã€‚\nã“ã“ã§ã€YOLOã®æ¨è«–éƒ¨åˆ†ã‚’ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°å†…ã§è¡Œã£ã¦ã„ãªã„ã“ã¨ã«æ³¨æ„ã—ã¾ã—ã‚‡ã†ã€‚ ä¸€è¦‹ã€æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ãã‚‹ã¨ãã®ã¿ã«æ¨è«–ã‚’å›ã™ã“ã¨ã¯åˆç†çš„ã«è¦‹ãˆã¾ã™ãŒã€ ã‚»ãƒ³ã‚µã®å…¥åŠ›ã«å¯¾ã—ã¦ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°å†…ã®å‡¦ç†ãŒé‡ã„ã¨å‡¦ç†ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒæœ€æ–°ã®ã‚‚ã®ã‹ã‚‰ã©ã‚“ã©ã‚“é…ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã¯ã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã®æœ€ä½é™ã®å‡¦ç†ã«ã¨ã©ã‚ã€é‡ã„å‡¦ç†ã¯åˆ†ã‘ã¦æ›¸ãã“ã¨ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚\nã¾ãŸã€ã“ã“ã§ã¯æ—¢å­˜ã®ç‰©ä½“æ¤œå‡ºãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã€PyTorchãªã©ã§è‡ªä½œã—ãŸãƒ¢ãƒ‡ãƒ«ã‚‚åŒæ§˜ã®æ çµ„ã¿ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nä¸‰æ¬¡å…ƒç”»åƒå‡¦ç† æ¬¡ã«ã€RGBç”»åƒã¨ãƒ‡ãƒ—ã‚¹ç”»åƒã‚’çµ±åˆã—ã€æ¤œå‡ºã—ãŸç‰©ä½“ã¾ã§ã®è·é›¢ã‚’æ¸¬å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n/camera/color/image_raw (RGBç”»åƒ) /camera/aligned_depth_to_color/image_raw (æ•´åˆ—ã•ã‚ŒãŸDepthç”»åƒ)\nã¯ãƒ”ã‚¯ã‚»ãƒ«åŒå£«ãŒå¯¾å¿œã™ã‚‹ã‚ˆã†ã«å‡¦ç†ã•ã‚Œã¦ã¯ã„ã‚‹ã‚‚ã®ã®ã€ ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ã•ã‚ŒãŸæ™‚åˆ»ã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ã€ ä½µã›ã¦ä½¿ç”¨ã™ã‚‹ã«ã¯æ™‚åˆ»ã®åŒæœŸã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\nç”»åƒã®æ™‚åˆ»åŒæœŸã«ã¯message_filtersãŒã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚\nmessage_filters.ApproximateTimeSynchronizerã‚’ä½¿ã„ã€ä»¥ä¸‹ã®ã‚ˆã†ã«Subscriberã‚’ä½œæˆã—ã¾ã™ã€‚\n#!/usr/bin/env python3 import copy from typing import List import cv2 import message_filters import rospy from cv_bridge import CvBridge from sensor_msgs.msg import Image class DetectionDistance: def __init__(self): rospy.init_node('detection_distance', anonymous=True) # Publisher self.detection_result_pub = rospy.Publisher('/detection_result', Image, queue_size=10) # Subscriber rgb_sub = message_filters.Subscriber('/camera/color/image_raw', Image) depth_sub = message_filters.Subscriber('/camera/aligned_depth_to_color/image_raw', Image) message_filters.ApproximateTimeSynchronizer([rgb_sub, depth_sub], 10, 1.0).registerCallback(self.callback_rgbd) self.bridge = CvBridge() self.rgb_image, self.depth_image = None, None def callback_rgbd(self, data1, data2): cv_array = self.bridge.imgmsg_to_cv2(data1, 'bgr8') cv_array = cv2.cvtColor(cv_array, cv2.COLOR_BGR2RGB) self.rgb_image = cv_array cv_array = self.bridge.imgmsg_to_cv2(data2, 'passthrough') self.depth_image = cv_array # å¾Œç•¥  ã“ã®ä¾‹ã§ã¯ã€\n/camera/color/image_rawã¨\n/camera/aligned_depth_to_color/image_rawã®\nãƒˆãƒ”ãƒƒã‚¯ã‚’åŒæ™‚(1.0ç§’ã¾ã§ã®ãšã‚Œã‚’è¨±å®¹ã™ã‚‹)ã«å—ã‘å–ã£ãŸå ´åˆã®ã¿ã€ 2ã¤ã®ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°callback_rgbdã«æ¸¡ã—ã¾ã™ã€‚\nãã‚Œã§ã¯ã€three-dementions_tutorial ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®detection_distance.py ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\nç‰©ä½“ã‚’æ¤œå‡ºã—ã€ãã®ç‰©ä½“ã¾ã§ã®è·é›¢ã‚’æ¸¬å®šã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚\n#!/usr/bin/env python3 import copy from typing import List import cv2 import message_filters import rospy from cv_bridge import CvBridge from sensor_msgs.msg import Image from ultralytics import YOLO from ultralytics.engine.results import Results class DetectionDistance: def __init__(self): rospy.init_node('detection_distance', anonymous=True) # Publisher self.detection_result_pub = rospy.Publisher('/detection_result', Image, queue_size=10) # Subscriber rgb_sub = message_filters.Subscriber('/camera/color/image_raw', Image) depth_sub = message_filters.Subscriber('/camera/aligned_depth_to_color/image_raw', Image) message_filters.ApproximateTimeSynchronizer([rgb_sub, depth_sub], 10, 1.0).registerCallback(self.callback_rgbd) self.bridge = CvBridge() self.rgb_image, self.depth_image = None, None self.model = YOLO('yolov8n.pt') def callback_rgbd(self, data1, data2): cv_array = self.bridge.imgmsg_to_cv2(data1, 'bgr8') cv_array = cv2.cvtColor(cv_array, cv2.COLOR_BGR2RGB) self.rgb_image = cv_array cv_array = self.bridge.imgmsg_to_cv2(data2, 'passthrough') self.depth_image = cv_array def process(self): while not rospy.is_shutdown(): if self.rgb_image is None: continue # inference tmp_image = copy.copy(self.rgb_image) results: List[Results] = self.model.predict(self.rgb_image, verbose=False) # plot bouding box for result in results: boxes = result.boxes.cpu().numpy() names = result.names if len(boxes.xyxy) == 0: continue x1, y1, x2, y2 = map(int, boxes.xyxy[0][:4]) cls_pred = boxes.cls[0] tmp_image = cv2.rectangle(tmp_image, (x1, y1), (x2, y2), (0, 255, 0), 3) tmp_image = cv2.putText(tmp_image, names[cls_pred], (x1, y1), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0, 255, 0), 2) cx, cy = (x1+x2)//2, (y1+y2)//2 print(names[cls_pred], self.depth_image[cy][cx]/1000, \u0026quot;m\u0026quot;) # publish image tmp_image = cv2.cvtColor(tmp_image, cv2.COLOR_RGB2BGR) detection_result = self.bridge.cv2_to_imgmsg(tmp_image, \u0026quot;bgr8\u0026quot;) self.detection_result_pub.publish(detection_result) if __name__ == '__main__': dd = DetectionDistance() try: dd.process() except rospy.ROSInitException: pass  åŸºæœ¬çš„ã«ã¯ç‰©ä½“æ¤œå‡ºã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨åŒã˜ã§ã™ãŒã€\ncx, cy = (x1+x2)//2, (y1+y2)//2 print(names[cls_pred], self.depth_image[cy][cx]/1000, \u0026quot;m\u0026quot;)  ã§bounding boxã®ä¸­å¿ƒåº§æ¨™ã‚’å¤‰æ›ã—ã€å¯¾å¿œã™ã‚‹è·é›¢ã‚’ãƒ¡ãƒ¼ãƒˆãƒ«å˜ä½ã§è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚\næ•´åˆ—ã•ã‚ŒãŸãƒ‡ãƒ—ã‚¹ç”»åƒã‚’ç”¨ã„ã¦ã„ã‚‹ãŸã‚ã€RGBç”»åƒã«åŸºã¥ãç®—å‡ºã—ãŸåº§æ¨™ã‚’ãã®ã¾ã¾æŒ‡å®šã§ãã¾ã™ã€‚\nç‚¹ç¾¤ã®ä½œæˆ ä¸Šã®ä¾‹ã§ã¯RGBç”»åƒã¨Depthç”»åƒã‚’ç”¨ã„ã¦ã€ç‰©ä½“ä½ç½®ã®ä»£è¡¨ã¨ãªã‚‹ç‚¹ã¨ãƒ­ãƒœãƒƒãƒˆä½ç½®ã®é–¢ä¿‚ã‚’æ‰±ã†ã“ã¨ãŒã§ãã¾ã—ãŸã€‚\nã—ã‹ã—ã€ä»£è¡¨ã¨ãªã‚‹ç‚¹ä»¥å¤–ã®æ·±åº¦ãƒ‡ãƒ¼ã‚¿ã‚‚ä¸‰æ¬¡å…ƒç©ºé–“ã«ç›´æ¥ãƒãƒƒãƒ”ãƒ³ã‚°ã§ãã‚‹ã¨ã€ ç‰©ä½“ã®å¤§ãã•ã‚„å½¢çŠ¶ã¨ã„ã£ãŸæƒ…å ±ã‚‚æ‰±ã†ã“ã¨ãŒã§ãã€ ç’°å¢ƒæƒ…å ±ã‚’ã‚ˆã‚Šç›´æ„Ÿçš„ãƒ»çµ±ä¸€çš„ã«æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«æ€ã‚ã‚Œã¾ã™ã€‚\nãã“ã§Depthç”»åƒã‹ã‚‰ç‚¹ç¾¤ã¨å‘¼ã°ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’è€ƒãˆã¾ã™ã€‚\nç‚¹ç¾¤ã¨ã¯ä¸‰æ¬¡å…ƒåº§æ¨™å€¤ (X, Y, Z) ã§æ§‹æˆã•ã‚ŒãŸç‚¹ã®é›†ã¾ã‚Šã®ã“ã¨ã§ã™ã€‚å„ç‚¹ã®æƒ…å ±ã¨ã—ã¦ã€ä¸‰æ¬¡å…ƒåº§æ¨™å€¤ã«åŠ ãˆè‰²ã®æƒ…å ± (R, G, B) ãŒåŠ ã‚ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ ãƒ‡ãƒ—ã‚¹ç”»åƒã¯ã‚«ãƒ¡ãƒ©ã®å†…éƒ¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”¨ã„ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚(å‚è€ƒ)\nä»Šå›ã¯ã€ãƒ‡ãƒ—ã‚¹ç”»åƒã‚’ç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ROSã®å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹ depth_image_proc ã‚’ä½¿ç”¨ã—ã¦ç‚¹ç¾¤ã‚’ä½œæˆã—ã¾ã™ã€‚\nå¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯~/catkin_ws/srcç­‰ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«é…ç½®ã—ã€ãƒ“ãƒ«ãƒ‰ã—ãƒ‘ã‚¹ã‚’é€šã™ã“ã¨ã§ç°¡å˜ã«ä½¿ç”¨ã§ãã¾ã™ã€‚\ndepth_image_procã®wikiã‚’å‚è€ƒã«ä»¥ä¸‹ã®ã‚ˆã†ãªlaunchãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot;?\u0026gt; \u0026lt;launch\u0026gt; \u0026lt;node pkg=\u0026quot;nodelet\u0026quot; type=\u0026quot;nodelet\u0026quot; name=\u0026quot;nodelet_manager\u0026quot; args=\u0026quot;manager\u0026quot; /\u0026gt; \u0026lt;node pkg=\u0026quot;nodelet\u0026quot; type=\u0026quot;nodelet\u0026quot; name=\u0026quot;nodelet1\u0026quot; args=\u0026quot;load depth_image_proc/point_cloud_xyz nodelet_manager\u0026quot;\u0026gt; \u0026lt;remap from=\u0026quot;camera_info\u0026quot; to=\u0026quot;/camera/color/camera_info\u0026quot;/\u0026gt; \u0026lt;remap from=\u0026quot;image_rect\u0026quot; to=\u0026quot;/camera/aligned_depth_to_color/image_raw\u0026quot;/\u0026gt; \u0026lt;remap from=\u0026quot;points\u0026quot; to=\u0026quot;/camera/depth/points\u0026quot;/\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;/launch\u0026gt;  ã“ã®launchãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã¨\n/camera/color/camera_infoã¨\n/camera/aligned_depth_to_color/image_rawã‚’\nsubscribeã—ã€\n/camera/depth/pointsã‚’publishã™ã‚‹ãƒãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã¾ã™ã€‚\n/camera/color/camera_infoã¯ sensor_msgs/CameraInfoå‹ã®ãƒˆãƒ”ãƒƒã‚¯ã§ã™ã€‚ ã‚«ãƒ¡ãƒ©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ãƒ•ãƒ¬ãƒ¼ãƒ idã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãªã©ã®æƒ…å ±ã‚’ä¿æŒã—ã¦ãŠã‚Šã€ç‚¹ç¾¤ã®å¤‰æ›ã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚\n/camera/aligned_depth_to_color/image_rawã¯RGBç”»åƒã«åˆã‚ã›ã¦æ•´åˆ—ã•ã‚ŒãŸDepthç”»åƒã§ã‚ã‚‹ãŸã‚ã€ /camera/depth/camera_infoã§ã¯ãªã\n/camera/color/camera_infoã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚\n(é–‹ç™ºPC)(docker)# roslaunch three-dimensions_tutorial depth2pc.launch  ã‚’å®Ÿè¡Œã—ã€/camera/depth/pointsãƒˆãƒ”ãƒƒã‚¯ã‚’rvizã§å¯è¦–åŒ–ã‚’ã™ã‚‹ã¨ä¸‰æ¬¡å…ƒç©ºé–“ã«ç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ãŒç¢ºèªã§ãã¾ã™ã€‚\næ¼”ç¿’ (é–‹ç™ºPC, jetson)èµ·å‹•æº–å‚™ (jetson)$ ./RUN-DOCKER-CONTAINER.sh (jetson)(docker)# roslaunch roomba_bringup bringup.launch (é–‹ç™ºPC)$ ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x   (é–‹ç™ºPC)RealSenseã®ãƒˆãƒ”ãƒƒã‚¯ã®å¯è¦–åŒ– (é–‹ç™ºPC)(docker)# rviz  rvizä¸Šã§\n /camera/color/image_raw /camera/depth/image_raw /camera/aligned_depth_to_color/image_raw  ã‚’å¯è¦–åŒ–ã—ã¦é•ã„ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n (é–‹ç™ºPC)ç‰©ä½“æ¤œå‡ºã‚’è¡Œã† (é–‹ç™ºPC)(docker)# cd catkin_ws; catkin_make; source devel/setup.bash (é–‹ç™ºPC)(docker)# rosrun three-dimensions_tutorial object_detection.py # rvizã§`/detection_result`ã‚’è¡¨ç¤ºã—çµæœã‚’ç¢ºèªã—ã¦ã¿ã‚ˆã†ã€‚ (é–‹ç™ºPC)(docker)# rosrun three-dimensions_tutorial detection_distance.py   (é–‹ç™ºPC)å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ (é–‹ç™ºPC)(docker)# cd ~/external_catkin_ws/src (é–‹ç™ºPC)(docker)# git clone https://github.com/ros-perception/image_pipeline (é–‹ç™ºPC)(docker)# cd ../; catkin build; source devel/setup.bash (é–‹ç™ºPC)(docker)# cd ~/roomba_hack/catkin_ws; source devel/setup.bash (é–‹ç™ºPC)(docker)# roslaunch three-dimensions_tutorial depth2pc.launch (é–‹ç™ºPC)(docker)# roslaunch navigation_tutorial navigation.launch  rvizã§/camera/depth/pointsãƒˆãƒ”ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n ä½™è£•ãŒã‚ã‚‹äººå‘ã‘ ç‰©ä½“ã‚’æ¤œå‡ºã—ã€ç‰¹å®šã®ç‰©ä½“ã®æ‰‹å‰ã¾ã§ç§»å‹•ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\nãƒ’ãƒ³ãƒˆ\n ç‰©ä½“æ¤œå‡ºçµæœã«åŸºã¥ã„ã¦ç‰©ä½“éƒ¨åˆ†ä»¥å¤–ã‚’ãƒã‚¹ã‚¯ã—ãŸãƒ‡ãƒ—ã‚¹ç”»åƒã‚’publishã™ã‚‹ depth2pc.launchã§ãã‚Œã‚’subscribeã—ã€point(cloud)ã«å¤‰æ›ã™ã‚‹ å¤‰æ›ã•ã‚ŒãŸpointã‹ã‚‰mapåº§æ¨™ç³»ã§ã®ä½ç½®ã‚’å–å¾—ã™ã‚‹ navigation_tutorial/scripts/set_goal.py (mapåº§æ¨™ç³»ã§æŒ‡å®šã—ãŸä½ç½®ãƒ»å§¿å‹¢ã¾ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ)ãªã©ã‚’å‚è€ƒã«ã€ãã®ä½ç½®ã¸ã¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹  PyTorchã‚’ä½¿ç”¨ã—ãŸè‡ªä½œã®åˆ†é¡å™¨ã‚„ãƒãƒƒãƒˆä¸Šã®åˆ†é¡å™¨ã‚’ã‚·ã‚¹ãƒ†ãƒ ã«çµ„ã¿è¾¼ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã€‚\nLidarã«æ˜ ã‚‰ãªã„ç‰©ä½“ã‚‚ç”»åƒãƒ™ãƒ¼ã‚¹ã§æ¤œå‡ºã—ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã«è¿½åŠ ã™ã‚‹ã“ã¨ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã«ã¶ã¤ã‹ã‚‰ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚\n","date":1642809600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1642809600,"objectID":"6efadb7100ad083ad0bc43c5fd3c3b1a","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap5/three-dimensions/","publishdate":"2022-01-22T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap5/three-dimensions/","section":"course","summary":"","tags":null,"title":"ä¸‰æ¬¡å…ƒç”»åƒå‡¦ç†","type":"book"},{"authors":null,"categories":null,"content":"Learn å‰å›ã®æ¼”ç¿’ã§ã¯ã€ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’ç”¨ã„ã¦ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã—ã¾ã—ãŸã€‚\nãƒ«ãƒ³ãƒãŒç”¨ã„ã¦ã„ã‚‹ãƒ›ã‚¤ãƒ¼ãƒ«ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã¯ã€ãƒ›ã‚¤ãƒ¼ãƒ«ã®å›è»¢é‡ã‚’è¶³ã—åˆã‚ã›ã‚‹ã“ã¨ã§ç®—å‡ºã—ã¦ã„ã¾ã™ã€‚ é•·ã„è·é›¢ã‚’å‹•ã‹ã—ãŸã‚Šã€é•·æ™‚é–“å‹•ã‹ã—ã¦ã„ã‚‹ã¨ã‚»ãƒ³ã‚µã®åƒ…ã‹ãªèª¤å·®ã®ç©ã¿é‡ã­ã§å¾ã€…ã«ãšã‚ŒãŒå¤§ãããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚\nãã“ã§ä»Šå›ã¯ã€ã‚ªãƒ‰ãƒ¡ãƒˆãƒªæƒ…å ±ã ã‘ã§ãªãã€åœ°å›³ã¨LiDARã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ã‚‚åŒæ™‚ã«ä½¿ã„ãªãŒã‚‰ã€ãƒ­ãƒœãƒƒãƒˆè‡ªèº«ã®å°¤ã‚‚ã‚‰ã—ã„ä½ç½®ã‚’æ¨å®šã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚\nROSã«ãŠã‘ã‚‹åº§æ¨™ç³»ã®æ‰±ã„ åº§æ¨™ç³»ã‚’æ‰±ã†ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ­ãƒœãƒƒãƒˆé ­éƒ¨ã®è·é›¢ç”»åƒã‚«ãƒ¡ãƒ©ï¼ˆãƒ‡ãƒ—ã‚¹ã‚«ãƒ¡ãƒ©ï¼‰ã‚’ç”¨ã„ã¦ã€2ãƒ¡ãƒ¼ãƒˆãƒ«å‰ã«ã‚Šã‚“ã”ã‚’è¦‹ã¤ã‘ãŸã¨ã—ã¾ã™ã€‚\nã“ã®æ™‚ã€ãƒ­ãƒœãƒƒãƒˆã®ãƒãƒ³ãƒ‰ã‚’2ãƒ¡ãƒ¼ãƒˆãƒ«å‰ã«å‹•ã‹ã—ã¦ã‚‚ã€ã‚Šã‚“ã”ã«è§¦ã‚Œã‚‰ã‚Œã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚\nãƒ­ãƒœãƒƒãƒˆã«ã¯ä½“ç©ãŒã‚ã‚Šã€å„ã‚»ãƒ³ã‚µã‚„ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿ï¼ˆã“ã“ã§ã¯ã‚«ãƒ¡ãƒ©ã¨ãƒãƒ³ãƒ‰ï¼‰ã¯è·é›¢çš„ã«é›¢ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚\nã‚»ãƒ³ã‚µã‹ã‚‰å¾—ãŸæƒ…å ±ã‚’ç”¨ã„ã¦ãƒ­ãƒœãƒƒãƒˆãŒä½•ã‚‰ã‹ã®å‹•ä½œã‚’è¡Œã†ã«ã¯ã€å¾—ãŸã‚»ãƒ³ã‚µã®æƒ…å ±ã‚„å‹•ä½œã®æŒ‡ä»¤ãŒã©ã®åº§æ¨™ç³»ã‚’å‰æã¨ã—ã¦ã„ã‚‹ã®ã‹ã‚’æ„è­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã¾ãŸã€ç•°ãªã‚‹åº§æ¨™ç³»ã®å¤‰æ›ã‚’é©åˆ‡ã«è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n tf tfã¯ã€\n ãƒ­ãƒœãƒƒãƒˆåº§æ¨™ç³» ã‚»ãƒ³ã‚µã®åº§æ¨™ç³» ãƒ­ãƒœãƒƒãƒˆã®é–¢ç¯€ã®åº§æ¨™ç³» éƒ¨å±‹ã®åº§æ¨™ç³» ç‰©ä½“ã®åº§æ¨™ç³» åœ°å›³ã®åº§æ¨™ç³»  ãªã©å¤šãã®åº§æ¨™ç³»åŒå£«ã‚’ç¹‹ã’ã€ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ä¸Šã§åº§æ¨™ç³»ã®ç®¡ç†ã‚’ã—ã¦ãã‚Œã‚‹ROSã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã€‚\n$ rosrun rqt_tf_tree rqt_tf_tree  ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å„åº§æ¨™ç³»ã®é–“ã®é–¢ä¿‚ã‚’å¯è¦–åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\ntfã¯ã€åº§æ¨™ç³»ã®é–¢ä¿‚ã‚’ãƒ„ãƒªãƒ¼æ§‹é€ ã§ç®¡ç†ã—ã¾ã™ã€‚è¦ªã®åº§æ¨™ç³»ãŒè¤‡æ•°ã‚ã‚‹ã“ã¨ã¯è¨±ã•ã‚Œã¾ã›ã‚“ã€‚\nä»Šå›è‡ªå·±ä½ç½®æ¨å®šã‚’è¡Œã†ã«ã‚ãŸã‚Šç”¨ã„ã‚‹åº§æ¨™ç³»ã®é–¢ä¿‚ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n  tfãƒ„ãƒªãƒ¼ã‚’rqtã§å¯è¦–åŒ–  ã“ã“ã§ã€odomåº§æ¨™ç³»ã¯ã€ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®ç®—å‡ºã‚’å§‹ã‚ãŸä½ç½®(èµ·å‹•ã—ãŸä½ç½®)ã‚’åŸç‚¹ã¨ã—ãŸåº§æ¨™ç³»ã§ã€ ãƒ›ã‚¤ãƒ¼ãƒ«ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®å€¤ã‹ã‚‰ã€ãƒ­ãƒœãƒƒãƒˆã®åŸºæº–ã¨ãªã‚‹base_footprintåº§æ¨™ç³»ã‚’ç¹‹ã’ã¦ã„ã¾ã™ã€‚ base_footprintåº§æ¨™ç³»ã®ä¸‹ã«ã¯ã€ãƒ«ãƒ³ãƒãƒ­ãƒœãƒƒãƒˆã®æ§‹æˆè¦ç´ ã§ã‚ã‚‹ã‚»ãƒ³ã‚µé¡ã‚„ãƒ›ã‚¤ãƒ¼ãƒ«ãªã©ã®åº§æ¨™ç³»ãŒå­ã¨ã—ã¦ç¹‹ãŒã£ã¦ã„ã¾ã™ã€‚\nä¸€ç•ªè¦ªã«ã„ã‚‹mapåº§æ¨™ç³»ã¯ã€åœ°å›³ã®åŸç‚¹ã‚’åŸºæº–ã¨ã—ãŸåº§æ¨™ç³»ã§ã™ãŒã€ ã“ã®åº§æ¨™ç³»ã«ãŠã‘ã‚‹ãƒ­ãƒœãƒƒãƒˆã®åº§æ¨™ç³»(base_footprint)ã‚’ç¹‹ã’ã‚‹ã“ã¨ã€ ã¤ã¾ã‚Šã€ãƒ­ãƒœãƒƒãƒˆãŒåœ°å›³ä¸Šã®ã©ã“ã«ã„ã‚‹ã®ã‹ã‚’æ±ºã‚ã‚‹ã“ã¨ãŒã€ è‡ªå·±ä½ç½®æ¨å®šã®ç›®çš„ã«ãªã‚Šã¾ã™ã€‚\nä»Šå›ã®å ´åˆã€base_footprintã®è¦ªã«ã¯æ—¢ã«odomãŒã„ã‚‹ãŸã‚ã€ mapåº§æ¨™ç³»ã¨odomåº§æ¨™ç³»ã‚’ç¹‹ã’ã‚‹ã“ã¨ã§ã€å…¨ä½“ã‚’ã²ã¨ã¤ã®ãƒ„ãƒªãƒ¼ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nè‡ªå·±ä½ç½®æ¨å®š åœ°å›³ãŒäº‹å‰ã«ä¸ãˆã‚‰ã‚Œã¦ã„ã‚‹ã¨ã„ã†å‰æã®ã‚‚ã¨ã€ ãã®åœ°å›³ä¸Šã®ã©ã“ã«ãƒ­ãƒœãƒƒãƒˆãŒã„ã‚‹ã®ã‹ã€ LiDARã‚„Odometryãªã©ã®ã‚»ãƒ³ã‚µæƒ…å ±ã‚’ç”¨ã„ã¦æ¨å®šã™ã‚‹ã“ã¨ã‚’è‡ªå·±ä½ç½®æ¨å®šã¨ã„ã„ã¾ã™ã€‚\nã“ã“ã§ã¯ã€è‡ªå·±ä½ç½®æ¨å®šæ³•ã®ä¸€èˆ¬çš„ãªæ‰‹æ³•ã®ä¸€ã¤ã§ã‚ã‚‹MCL(Monte Carlo Localization)ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ MCLã¯ã€ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æ³•ï¼ˆMonte Carlo methodï¼‰ã¨å‘¼ã°ã‚Œã‚‹ç¢ºç‡çš„ãªæ‰‹æ³•ã‚’ç”¨ã„ã¦ã€ãƒ­ãƒœãƒƒãƒˆã®ä½ç½®æ¨å®šã‚’è¡Œã„ã¾ã™ã€‚\nä»¥ä¸‹ã®ã‚ˆã†ãªæ‰‹é †ã§å‹•ä½œã—ã¾ã™ã€‚\n ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®ç”Ÿæˆ\nãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ã‚’è¡¨ã™å€™è£œã¨ãªã‚‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«(ç²’å­)ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã¯ã€ãƒ­ãƒœãƒƒãƒˆã®å§¿å‹¢ï¼ˆä½ç½®ã¨è§’åº¦ï¼‰ã®å€™è£œã‚’è¡¨ã™çŠ¶æ…‹ãƒ™ã‚¯ãƒˆãƒ«ã§ã™ã€‚ ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®é‡ã¿ä»˜ã‘\nã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã‚„ãƒ­ãƒœãƒƒãƒˆã®åˆ¶å¾¡å…¥åŠ›ï¼ˆç§»å‹•é‡ãªã©ï¼‰ã¨ã®ä¸€è‡´ã®åº¦åˆã„ã«å¿œã˜ã¦ã€å„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã«é‡ã¿ã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚ ã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã«ã¯ã€LiDARã®ã‚¹ã‚­ãƒ£ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚„ã‚«ãƒ¡ãƒ©ã®ç”»åƒãƒ‡ãƒ¼ã‚¿ãªã©ãŒä½¿ã‚ã‚Œã¾ã™ã€‚ ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°\né‡ã¿ä»˜ã‘ã•ã‚ŒãŸãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‹ã‚‰ã€æ–°ãŸãªãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ é‡ã¿ãŒå¤§ãã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã»ã©ã€æ–°ã—ã„ã‚»ãƒƒãƒˆã«å¤šãå«ã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚ ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ˆã‚Šç¢ºã‹ã‚‰ã—ã„ä½ç½®å€™è£œãŒæ®‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®ç§»å‹•\nãƒ­ãƒœãƒƒãƒˆãŒç§»å‹•ã™ã‚‹ã¨ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚‚åŒæ§˜ã«ç§»å‹•ã—ã¾ã™ã€‚ ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®ç§»å‹•ã«ã¯ã€ãƒ­ãƒœãƒƒãƒˆã®åˆ¶å¾¡å…¥åŠ›ã‚„ãƒã‚¤ã‚ºãƒ¢ãƒ‡ãƒ«ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ ãƒ­ãƒœãƒƒãƒˆã®åˆ¶å¾¡å…¥åŠ›ã¨å®Ÿéš›ã®ç§»å‹•è·é›¢ã«ã¯èª¤å·®ãŒå«ã¾ã‚Œã‚‹ãŸã‚ã€ ã“ã®æ™‚ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®åˆ†å¸ƒã¯åºƒãŒã‚Šã¾ã™ã€‚ ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®æ›´æ–°\nãƒ­ãƒœãƒƒãƒˆãŒã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã¨ã€å„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®é‡ã¿ãŒå†è¨ˆç®—ã•ã‚Œã¾ã™ã€‚ äºˆæ¸¬ã•ã‚ŒãŸã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨å®Ÿéš›ã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¸€è‡´åº¦ã«åŸºã¥ã„ã¦é‡ã¿ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚ æ¨å®šã•ã‚ŒãŸä½ç½®ã®è¨ˆç®—\næ›´æ–°ã•ã‚ŒãŸé‡ã¿ã«åŸºã¥ã„ã¦ã€æ¨å®šã•ã‚ŒãŸãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ ä¸€èˆ¬ã«ã€é‡ã¿ä»˜ãå¹³å‡ã‚„æœ€ã‚‚é‡ã¿ã®å¤§ãã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®ä½ç½®ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚  MCLã¯ã€ã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã®ãƒã‚¤ã‚ºã‚„ç’°å¢ƒã®ä¸ç¢ºå®Ÿæ€§ã«å¯¾ã—ã¦æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹ãŸã‚ã€è‡ªå·±ä½ç½®æ¨å®šã®éš›ã«ã‚ˆãä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ ãŸã ã—ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°ãŒååˆ†ã§ãªã„å ´åˆã‚„ã€ç’°å¢ƒã®å‹•ããŒå¤§ãã„å ´åˆã«ã¯ã€æ­£ç¢ºãªä½ç½®æ¨å®šãŒé›£ã—ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ ã¾ãŸã€MCLã¯è¨ˆç®—ã‚³ã‚¹ãƒˆãŒé«˜ã„ãŸã‚ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®å¿œç”¨ã«ã¯åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ã€‚\nMCLã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ã¯ã€ ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°ã‚„ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã®æˆ¦ç•¥ã®é¸æŠã€ã‚»ãƒ³ã‚µãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦å‘ä¸Šãªã©ã€ ã„ãã¤ã‹ã®æ”¹è‰¯æ‰‹æ³•ãŒã‚ã‚Šã¾ã™ã€‚\nã¾ãŸã€ä»–ã®è‡ªå·±ä½ç½®æ¨å®šæ‰‹æ³•ã¨ã®çµ„ã¿åˆã‚ã›ã‚„çµ±åˆãŒè¡Œã‚ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚\nroomba_hackã§ã¯ã€amcl(Adaptive Monte Carlo Localization)ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ emcl(MCL with Expansion resetting)ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚\n  Monte Carlo Localization(Particle Filter) Dieter Fox et al. 1999, using sonar. http://www.doc.ic.ac.uk/~ajd/Robotics/RoboticsResources/montecarlolocalization.gif  [è©³ã—ã„æ–‡çŒ®]\n \u0026ldquo;Probabilistic Robotics\u0026rdquo; by Sebastian Thrun, Wolfram Burgard, Dieter Fox  é‚¦è¨³ï¼š\u0026ldquo;ç¢ºç‡ãƒ­ãƒœãƒ†ã‚£ã‚¯ã‚¹\u0026rdquo; ä¸Šç”°éš†ä¸€    launchãƒ•ã‚¡ã‚¤ãƒ«ã¨rosparam è‡ªå·±ä½ç½®æ¨å®šã§ã¯ã€åˆæœŸä½ç½®ãŒã©ã“ã‹ã€ãƒ¬ãƒ¼ã‚¶ãƒ¼ã®ã‚¹ãƒšãƒƒã‚¯ã‚„ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®æ•°ãªã©æ•°åå€‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¿æŒã—ã¾ã™ã€‚\nã“ã‚Œã‚‰ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…éƒ¨ã§è¨˜è¿°ã™ã‚‹ã®ã§ã¯ãªãã€launchãƒ•ã‚¡ã‚¤ãƒ«å†…ã§æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ rosã§ã¯ã€rosparamã¨ã„ã†å½¢ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\nä»¥ä¸‹ã«ã€ä»Šå›ç”¨ã„ã‚‹amcl.launch ã‚’ç¤ºã—ã¾ã™ã€‚ launchãƒ•ã‚¡ã‚¤ãƒ«ã¯xmlå½¢å¼ã§è¨˜è¿°ã•ã‚Œã€paramã‚’æŒ‡å®šã™ã‚‹ã“ã¨ä»¥å¤–ã«ã‚‚ã€ launchãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œæ™‚ã«å¼•æ•°ã§æŒ‡å®šå¯èƒ½ãªargã‚„ã€ãƒˆãƒ”ãƒƒã‚¯åãªã©ã®ãƒªãƒãƒƒãƒ—ã‚’ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\nlaunchã®è©³ã—ã„æ›¸ãæ–¹ã¯ã€rosã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot;?\u0026gt; \u0026lt;launch\u0026gt; \u0026lt;arg name=\u0026quot;use_map_topic\u0026quot; default=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;arg name=\u0026quot;odom_topic\u0026quot; default=\u0026quot;/odom\u0026quot; /\u0026gt; \u0026lt;arg name=\u0026quot;scan_topic\u0026quot; default=\u0026quot;/scan\u0026quot; /\u0026gt; \u0026lt;node pkg=\u0026quot;amcl\u0026quot; type=\u0026quot;amcl\u0026quot; name=\u0026quot;amcl\u0026quot; output=\u0026quot;screen\u0026quot;\u0026gt; \u0026lt;remap from=\u0026quot;scan\u0026quot; to=\u0026quot;$(arg scan_topic)\u0026quot;/\u0026gt; \u0026lt;remap from=\u0026quot;odom\u0026quot; to=\u0026quot;$(arg odom_topic)\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;use_map_topic\u0026quot; value=\u0026quot;$(arg use_map_topic)\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_pose_x\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_pose_y\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_pose_a\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_cov_xx\u0026quot; value=\u0026quot;0.1*0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_cov_yy\u0026quot; value=\u0026quot;0.1*0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_cov_aa\u0026quot; value=\u0026quot;0.3*3.14\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;gui_publish_rate\u0026quot; value=\u0026quot;10.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_max_beams\u0026quot; value=\u0026quot;2.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_min_range\u0026quot; value=\u0026quot;0.15\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_max_range\u0026quot; value=\u0026quot;12.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_z_hit\u0026quot; value=\u0026quot;0.8\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_z_short\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_z_max\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_z_rand\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_sigma_hit\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_lambda_short\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_model_type\u0026quot; value=\u0026quot;likelihood_field\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_likelihood_max_dist\u0026quot; value=\u0026quot;2.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;min_particles\u0026quot; value=\u0026quot;100\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;max_particles\u0026quot; value=\u0026quot;1000\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;kld_err\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;kld_z\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;update_min_d\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;update_min_a\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;resample_interval\u0026quot; value=\u0026quot;1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;transform_tolerance\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;recovery_alpha_slow\u0026quot; value=\u0026quot;0.001\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;recovery_alpha_fast\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_frame_id\u0026quot; value=\u0026quot;odom\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_model_type\u0026quot; value=\u0026quot;diff\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha1\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha2\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha3\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha4\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha5\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;/launch\u0026gt;  æ¼”ç¿’ ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘ãã‚Œãã‚Œdockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹• jetsonã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ ssh roomba_dev1 (jetson):~$ cd ~/group_a/roomba_hack (jetson)::~/group_a/roomba_hack$ git pull (jetson):~/group_a/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh (jetson)(docker):~/roomba_hack# roslaunch roomba_bringup bringup.launch  é–‹ç™ºPCã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ cd ~/group_a/roomba_hack (é–‹ç™ºPC):~/group_a/roomba_hack$ git pull (é–‹ç™ºPC):~/group_a/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x   gmappingã§åœ°å›³ä½œæˆ (é–‹ç™ºPC)(docker) roslaunch navigation_tutorial gmapping.launch  åœ°å›³ã®ä¿å­˜ã€‚map.pgmï¼ˆç”»åƒãƒ‡ãƒ¼ã‚¿ï¼‰ã¨map.yaml(åœ°å›³æƒ…å ±)ãŒä¿å­˜ã•ã‚Œã‚‹ã€‚\n(é–‹ç™ºPC)(docker) rosrun map_server map_saver  ~/roomba_hack/catkin_ws/src/navigation_tutorial/map ã®ä¸‹ã«ä¿å­˜ã™ã‚‹ã€‚\n amclã‚’launchã—ã¦ã€è‡ªå·±ä½ç½®æ¨å®šã™ã‚‹ localizationãƒãƒ¼ãƒ‰ã¨åœ°å›³ã‚µãƒ¼ãƒãƒ¼ã‚’åŒæ™‚ã«èµ·å‹•ã€‚\n(é–‹ç™ºPC)(docker) roslaunch navigation_tutorial localization.launch (é–‹ç™ºPC)(docker) roslaunch roomba_teleop teleop.launch (é–‹ç™ºPC)(docker) rviz -d /root/roomba_hack/catkin_ws/src/navigation_tutorial/configs/navigation.rviz   åˆæœŸä½ç½®ã®æŒ‡å®š(rvizã®2D Pose Estimate) ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§ç§»å‹•ã•ã›ã¦ã¿ã¦è‡ªå·±ä½ç½®ã‚’ç¢ºèª rqt_tf_treeã‚’è¦‹ã¦ã¿ã‚‹   amclã®paramã‚’ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ launchãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã¦ã€å€¤ã‚’å¤‰ãˆã¦ã¿ã‚‹ã€‚\nå„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ„å‘³ã¯amclã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nä¾‹ãˆã°ã€ãƒ»ãƒ»ãƒ»\n initial_cov_** ã‚’å¤§ããã—ã¦ã¿ã¦ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒã¡ã‚ƒã‚“ã¨åæŸã™ã‚‹ã‹ã¿ã¦ã¿ã‚‹ã€‚ particleã®æ•°(min_particlesã€max_particles)ã‚’å¤‰ãˆã¦ã¿ã¦æŒ™å‹•ã‚’ã¿ã¦ã¿ã‚‹ã€‚   launchãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µ localization.launchãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦teleop.launchã¨rvizãŒåŒæ™‚ã«èµ·å‹•ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã‚ˆã†ã€‚\n\u0026lt;!-- teleop.launchã‚’èµ·å‹•--\u0026gt; \u0026lt;include file=\u0026quot;$(find roomba_teleop)/launch/teleop.launch\u0026quot;\u0026gt; \u0026lt;/include\u0026gt; \u0026lt;!-- rvizã‚’èµ·å‹•--\u0026gt; \u0026lt;node pkg=\u0026quot;rviz\u0026quot; type=\u0026quot;rviz\u0026quot; name=\u0026quot;navigation_rviz\u0026quot; args=\u0026quot;-d $(find navigation_tutorial)/configs/navigation.rviz\u0026quot;/\u0026gt;  ","date":1642809600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1642809600,"objectID":"29d802971ebbc674f8dd6b80aeddda91","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap4/localization/","publishdate":"2022-01-22T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap4/localization/","section":"course","summary":"","tags":null,"title":"è‡ªå·±ä½ç½®æ¨å®š","type":"book"},{"authors":null,"categories":null,"content":"è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\nLearn LiDARã®ã‚¹ã‚­ãƒ£ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ï¼Œéšœå®³ç‰©ã‚’å›é¿ã—ã¦ã¿ã‚ˆã† æ¬¡ã«ï¼ŒLiDARã§ã‚¹ã‚­ãƒ£ãƒ³ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ï¼Œéšœå®³ç‰©ã‚’å›é¿ã™ã‚‹ã‚ˆã†ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nLiDARã‚¹ã‚­ãƒ£ãƒ³ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ/scanï¼‰ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚ˆã† LiDARã¯ï¼ŒLight Detection And Rangingã®ç•¥ã§ï¼Œãƒ¬ãƒ¼ã‚¶å…‰ã‚’ä½¿ã£ã¦é›¢ã‚ŒãŸå ´æ‰€ã«ã‚ã‚‹ç‰©ä½“å½¢çŠ¶ã‚„è·é›¢ã‚’æ¸¬å®šã™ã‚‹ãŸã‚ã®ã‚»ãƒ³ã‚µã§ã™ï¼ è¿‘å¹´ã§ã¯ï¼Œè‡ªå‹•è»Šã®è‡ªå‹•é‹è»¢ã«ã‚‚ç”¨ã„ã‚‰ã‚Œã‚‹ã“ã¨ã®å¤šã„ã‚»ãƒ³ã‚µã®ä¸€ã¤ã§ã™ï¼\nroombaã«æ­è¼‰ã•ã‚ŒãŸLiDARã‚»ãƒ³ã‚µï¼ˆrplidarï¼‰ã®å€¤ã¯ï¼Œ/scanã®ãƒˆãƒ”ãƒƒã‚¯ã«æµã‚Œã¦ã„ã¦ï¼Œrostopic echo /scanã‚’ã—ã¦ã¿ã‚‹ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ã©ã‚“ãªæƒ…å ±ãŒæµã‚Œã¦ã„ã‚‹ã‹ã‚ã‹ã‚Šã¾ã™ï¼\nå¤§ããªãƒ‡ãƒ¼ã‚¿ãªã®ã§ä»Šå›ã¯ãƒ†ã‚­ã‚¹ãƒˆã«æ²è¼‰ã™ã‚‹ã®ã¯çœç•¥ã—ã¾ã™ãŒï¼Œrostopic type /scanã‚’ã—ã¦ã¿ã‚‹ã¨ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ï¼Œsensor_msgs/LaserScanå‹ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼ rostopic type /scan root@dynamics:~/roomba_hack# rostopic type /scan sensor_msgs/LaserScan  \nsensor_msgs/LaserScanå‹ã®å®šç¾©ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ã®å®šç¾©ã¯ï¼Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã»ã‹ï¼Œrosmsg info sensor_msgs/LaserScanã™ã‚‹ã“ã¨ã§ã‚‚ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ç¢ºèªã§ãã¾ã™ï¼ rosmsg info sensor_msgs/LaserScan root@dynamics:~/roomba_hack# rosmsg info sensor_msgs/LaserScan std_msgs/Header header uint32 seq time stamp string frame_id float32 angle_min float32 angle_max float32 angle_increment float32 time_increment float32 scan_time float32 range_min float32 range_max float32[] ranges float32[] intensities  \nangle_minã«ã¯ã‚¹ã‚­ãƒ£ãƒ³ã®é–‹å§‹è§’åº¦ï¼Œangle_maxã«ã¯ã‚¹ã‚­ãƒ£ãƒ³ã®çµ‚äº†è§’åº¦ãŒãƒ©ã‚¸ã‚¢ãƒ³ã§è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼ angle_incrementã¯ï¼Œè¨ˆæ¸¬ã—ãŸé–“éš”ãŒãƒ©ã‚¸ã‚¢ãƒ³ã§è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼ range_maxã«ã¯ã‚¹ã‚­ãƒ£ãƒ³ã®é–“ã§æ¤œå‡ºã•ã‚ŒãŸæœ€å¤§ã®è·é›¢ï¼Œrange_minã«ã¯æœ€å°ã®è·é›¢ãŒãƒ¡ãƒ¼ãƒˆãƒ«ã§è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼\nrvizã§LiDARã‚¹ã‚­ãƒ£ãƒ³ã®å€¤ã‚’å¯è¦–åŒ–ã—ã¦ã¿ã‚ˆã† rvizã§LiDARã®ã‚¹ã‚­ãƒ£ãƒ³çµæœã‚’å¯è¦–åŒ–ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nLaserScanã‚’Addã—ã¦ï¼Œtopicã«/scanã‚’è¨­å®šã™ã‚‹ã¨ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œãƒ­ãƒœãƒƒãƒˆã‚’ä¸­å¿ƒã«LiDARã«ã‚ˆã£ã¦è¨ˆæ¸¬ã•ã‚ŒãŸéšœå®³ç‰©ãŒèµ¤ãè¡¨ç¤ºã•ã‚Œã¾ã™ï¼\n  LiDARã‚¹ã‚­ãƒ£ãƒ³ã‚’rvizã§å¯è¦–åŒ–  LiDARã‚’ä½¿ã£ã¦éšœå®³ç‰©ã‚’å›é¿ã—ã‚ˆã† ãã‚Œã§ã¯ï¼ŒLiDARã‚¹ã‚­ãƒ£ãƒ³/scanã®æƒ…å ±ã‚’ä½¿ã£ãŸåˆ¶å¾¡ã®å®Ÿè£…ã®ä¾‹ã¨ã—ã¦navigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã®avoidance.pyã‚’ã¿ã¦ã¿ã¾ã—ã‚‡ã†ï¼\navoidance.py #!/usr/bin/env python3 import numpy as np import rospy from geometry_msgs.msg import Twist from sensor_msgs.msg import LaserScan class Avoidance: def __init__(self): rospy.init_node('avoidance', anonymous=True) # Publisher self.cmd_vel_pub = rospy.Publisher('/planner/cmd_vel', Twist, queue_size=10) # Subscriber scan_sub = rospy.Subscriber('/scan', LaserScan, self.callback_scan) self.min_range = None def callback_scan(self, data): fov = np.deg2rad(60) min_range = data.range_max min_idx = -1 angle = data.angle_min for idx, r in enumerate(data.ranges): angle += data.angle_increment if -fov\u0026lt;angle\u0026lt;fov: if r\u0026lt;min_range: min_range = r min_idx = idx if min_idx \u0026lt; len(data.ranges)/2.0: self.direction = \u0026quot;RIGHT\u0026quot; else: self.direction = \u0026quot;LEFT\u0026quot; self.min_range = min_range def process(self): r = rospy.Rate(10) while not rospy.is_shutdown(): vel = Twist() if self.min_range is not None: if self.min_range \u0026gt;= 0.4: vel.linear.x = 0.2 vel.angular.z = 0.0 else: vel.linear.x = 0.0 if self.direction == \u0026quot;RIGHT\u0026quot;: vel.angular.z = 0.5 elif self.direction == \u0026quot;LEFT\u0026quot;: vel.angular.z = -0.5 self.cmd_vel_pub.publish(vel) r.sleep() if __name__=='__main__': avoidance = Avoidance() try: avoidance.process() except rospy.ROSInitException: pass   ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ï¼ŒLiDARã‚’ä½¿ã£ã¦é€²è¡Œæ–¹å‘ã«å­˜åœ¨ã™ã‚‹éšœå®³ç‰©ã‚’è¦‹ã¤ã‘ï¼Œãã‚Œã‚’å›é¿ã—ãªãŒã‚‰é€²ã‚€ã‚ˆã†ã«ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã—ã¦ã„ã¾ã™ï¼å…·ä½“çš„ã«ã¯ï¼Œ\n ãƒ­ãƒœãƒƒãƒˆã®é€²è¡Œæ–¹å‘ã«ç‰©ä½“ãŒãªã‹ã£ãŸã‚‰ç›´é€² ãƒ­ãƒœãƒƒãƒˆã®å³å´ã«éšœå®³ç‰©ãŒã‚ã£ãŸã‚‰å·¦å›è»¢ ãƒ­ãƒœãƒƒãƒˆã®å·¦å´ã«éšœå®³ç‰©ãŒã‚ã£ãŸã‚‰å³å›è»¢  ã™ã‚‹ã“ã¨ã§éšœå®³ç‰©ã‚’å›é¿ï¼ˆã¶ã¤ã‹ã‚‹å‰ã«æ–¹å‘è»¢æ›ï¼‰ã—ã¦ã„ã¾ã™ï¼\nã§ã¯ï¼Œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¸­èº«ã‚’è¦‹ã¦ã„ãã¾ã™ï¼\n/odomã‚’ä½¿ã£ãŸåˆ¶å¾¡ã®å ´åˆã¨åŒæ§˜ã«ï¼Œãƒãƒ¼ãƒ‰ã‚’å®šç¾©ã™ã‚‹éš›ã«ï¼Œã‚³ãƒãƒ³ãƒ‰ã‚’é€ã‚‹ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ã¨ï¼ŒLiDARã‚¹ã‚­ãƒ£ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒã‚’ä½œæˆã—ã¾ã™ï¼\nclass Avoidance: def __init__(self): rospy.init_node('avoidance', anonymous=True) # Publisher self.cmd_vel_pub = rospy.Publisher('/planner/cmd_vel', Twist, queue_size=10) # Subscriber scan_sub = rospy.Subscriber('/scan', LaserScan, self.callback_scan) self.min_range = None  /scanã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ï¼Œ\ndef callback_scan(self, data): fov = np.deg2rad(60) min_range = data.range_max min_idx = -1 angle = data.angle_min for idx, r in enumerate(data.ranges): angle += data.angle_increment if -fov\u0026lt;angle\u0026lt;fov: if r\u0026lt;min_range: min_range = r min_idx = idx if min_idx \u0026lt; len(data.ranges)/2.0: self.direction = \u0026quot;RIGHT\u0026quot; else: self.direction = \u0026quot;LEFT\u0026quot; self.min_range = min_range  ã¨ãªã£ã¦ãŠã‚Šï¼Œæ­£é¢ã‹ã‚‰å·¦å³60åº¦ã®ç¯„å›²å†…ã§æœ€ã‚‚çŸ­ã„è·é›¢ã‚’self.min_rangeã«æ ¼ç´ã—ï¼Œãã‚ŒãŒå³å´ã«ã‚ã‚‹ã®ã‹å·¦å´ã«ã‚ã‚‹ã®ã‹ã‚’self.directionã«æ ¼ç´ã—ã¦ã„ã¾ã™ï¼ï¼\nã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã¨processãƒ¡ã‚½ãƒƒãƒ‰ãŒï¼ˆ0.1ç§’ãŠãã«ï¼‰å¸¸ã«å®Ÿè¡Œã•ã‚Œã¾ã™ï¼\ndef process(self): r = rospy.Rate(10) while not rospy.is_shutdown(): vel = Twist() if self.min_range is not None: if self.min_range \u0026gt;= 0.4: vel.linear.x = 0.2 vel.angular.z = 0.0 else: vel.linear.x = 0.0 if self.direction == \u0026quot;RIGHT\u0026quot;: vel.angular.z = 0.5 elif self.direction == \u0026quot;LEFT\u0026quot;: vel.angular.z = -0.5 self.cmd_vel_pub.publish(vel) r.sleep()  processãƒ¡ã‚½ãƒƒãƒ‰å†…éƒ¨ã§ã¯ï¼Œæ ¼ç´ã•ã‚ŒãŸself.min_rangeãŒ0.4ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ã‚ˆã‚Šå¤§ãã„å ´åˆã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®å‰ã«ä½•ã‚‚ãªã„ã¨åˆ¤æ–­ã—ã¦ç›´é€²ï¼Œå°ã•ã„å ´åˆã¯ï¼Œself.directionã®å€¤ã‚’è¦‹ã¦ï¼ŒRIGHTã§ã‚ã‚Œã°å³ã«éšœå®³ç‰©ãŒã‚ã‚‹ã¨åˆ¤æ–­ã—ã¦å·¦å›è»¢ï¼ŒLEFTã§ã‚ã‚Œã°å·¦ã«éšœå®³ç‰©ãŒã‚ã‚‹ã¨åˆ¤æ–­ã—ã¦å³å›è»¢ã™ã‚‹ã‚ˆã†ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ãªã£ã¦ã„ã¾ã™ï¼\nãã‚Œã§ã¯ï¼Œå®Ÿéš›ã«LiDARã‚’ä½¿ã£ã¦éšœå®³ç‰©ã‚’å›é¿ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\næ¼”ç¿’ ã€é–‹ç™ºPCã€‘topicã®ç¢ºèª /scanã®å‹ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic type /scan  /scanã®ä¸­èº«ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic echo /scan   LiDARã‚¹ã‚­ãƒ£ãƒ³ã‚’ä½¿ã£ãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ avoidance.pyã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ï¼\nã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã™ã¨ãã«ã¯ï¼Œã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®Yãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‹ã‚‰Bãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦autoãƒ¢ãƒ¼ãƒ‰ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†ï¼\nä»Šå›ã¯ã›ã£ã‹ããªã®ã§ï¼Œlaunchfileã‹ã‚‰èµ·å‹•ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ ã“ã®launchfileã¯ï¼Œnavigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã®launchãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­ã«ã‚ã‚‹avoidance.launchã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ï¼ˆgithubï¼‰ï¼\n(é–‹ç™ºPC)(docker):~/roomba_hack# roslaunch navigation_tutorial avoidance.launch  ãƒ­ãƒœãƒƒãƒˆã®é€²è¡Œæ–¹å‘ã«éšœå®³ç‰©ãŒã‚ã‚‹ã¨ãã«ï¼Œãã‚Œã‚’é¿ã‘ã‚‹ã‚ˆã†ã«æ–¹å‘è»¢æ›ã—ãŸã‚‰æˆåŠŸã§ã™ï¼\ntry it! avoidance.pyã®ä¸­èº«ã‚’èª­ã‚“ã§ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ã¿ã‚ˆã†\n","date":1687392e3,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1687392e3,"objectID":"4115bb19a4232d2372987cbff0c843fc","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap3/sensing3/","publishdate":"2023-06-22T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap3/sensing3/","section":"course","summary":"è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\n","tags":null,"title":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¢","type":"book"},{"authors":null,"categories":null,"content":"ãƒ­ãƒœãƒƒãƒˆé–‹ç™ºã«ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹ROSã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹\nLearn ROSã®æ¦‚è¦ ROS(Robot Operating System)ã¯ã€ãƒ­ãƒœãƒƒãƒˆãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ä¾¿åˆ©ãªæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’ç‰¹å®šã®ç›®çš„ã«ç‰¹åŒ–ã•ã›ã¦ä½¿ã†ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã®ã“ã¨ã§ã™ã€‚ å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã«ã‚ã’ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚\n  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šä¿¡\n ãƒ—ãƒ­ã‚»ã‚¹é–“ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿é–“ã®é€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚    ãƒ‡ãƒã‚¤ã‚¹ãƒ‰ãƒ©ã‚¤ãƒ\n  ROSã«å¯¾å¿œã—ã¦ã„ã‚‹ã‚»ãƒ³ã‚µã‚„ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿ã‚’æ­è¼‰ã—ãŸãƒ­ãƒœãƒƒãƒˆã§ã‚ã‚Œã°ã€é•ã†ãƒ­ãƒœãƒƒãƒˆã§ã‚ã£ã¦ã‚‚ã»ã¼åŒã˜ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦å‹•ã‹ã™ã“ã¨ãŒã§ãã¾ã™ã€‚\nroombaã‚’å‹•ã‹ã™ãŸã‚ã«æ›¸ã„ãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ä½¿ç”¨ã—ã¦HSRã‚’å‹•ã‹ã™ã€ã¨ã„ã£ãŸã“ã¨ãŒã§ãã¾ã™ã€‚\n  https://github.com/ros-drivers\n  http://wiki.ros.org/Sensors\n    ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ä½œã•ã›ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢(ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒãƒ‹ãƒ”ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)ã®åŸºæœ¬æ©Ÿèƒ½ã®å¤§åŠãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚    è¦–è¦šåŒ–ãƒ„ãƒ¼ãƒ«\n ãƒ­ãƒœãƒƒãƒˆã®å†…éƒ¨çŠ¶æ…‹ã‚„ã‚»ãƒ³ã‚µå‡ºåŠ›ã‚’2æ¬¡å…ƒã€3æ¬¡å…ƒã§è¦–è¦šåŒ–ã™ã‚‹Rvizã‚„3æ¬¡å…ƒå‹•åŠ›å­¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã®Gazeboãªã©ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚    ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†\n å¤šç¨®å¤šæ§˜ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª(python, C++, \u0026hellip;)ã€ä¾å­˜é–¢ä¿‚ã§è¨˜è¿°ã•ã‚ŒãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ åŒå£«ã‚’çµ±åˆçš„ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ ã“ã‚Œã«ã‚ˆã‚Šã€çµŒè·¯è¨ˆç”»ãªã©å‡¦ç†ãŒé‡ã„ãƒ—ãƒ­ã‚»ã‚¹ã¯C++ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€ç”»åƒèªè­˜ãªã©æ©Ÿæ¢°å­¦ç¿’ç³»ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯pythonã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€ã¨ã„ã£ãŸã“ã¨ã‚‚ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚    ROSã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šä¿¡ ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã™éš›ã«ã¯ã€å¤šãã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä¸¦åˆ—ã—ã¦å®Ÿè¡Œã—ã€ãã‚Œãã‚ŒãŒãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šã¨ã‚Šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ROSã¯ãã®ã‚ˆã†ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ é–“ã®é€šä¿¡ã«å¿…è¦ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚\n  ãƒãƒ¼ãƒ‰(node)\n ROSã§ã¯ã€ä¸€ã¤ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ å˜ä½ã‚’ã€Œãƒãƒ¼ãƒ‰(node)ã€ã¨å‘¼ã³ã¾ã™ã€‚ åŸºæœ¬çš„ã«ã¯ã€ä¸€ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä¸€ã¤ã®ãƒãƒ¼ãƒ‰ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ å„ãƒãƒ¼ãƒ‰ã¯topicã€serviceã€actionlibãªã©ã®é€šä¿¡æ–¹æ³•ã‚’ä½¿ã£ã¦ã€ä»–ã®ãƒãƒ¼ãƒ‰ã¨ãƒ‡ãƒ¼ã‚¿ã®ã‚„ã‚Šå–ã‚Šã‚’è¡Œã„ã¾ã™ã€‚ã“ã“ã§ã¯topicã«ã¤ã„ã¦èª¬æ˜ã—ã€serviceã¨actionlibã«ã¤ã„ã¦ã¯chaper6ã§èª¬æ˜ã—ã¾ã™ã€‚    ãƒˆãƒ”ãƒƒã‚¯(topic)\n  ROSã§ã®ã€æœ€ã‚‚åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿é€šä¿¡ã®çµŒè·¯ã‚’ã€Œãƒˆãƒ”ãƒƒã‚¯(topic)ã€ã¨å‘¼ã³ã¾ã™ã€‚\n  ãƒãƒ¼ãƒ‰ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒˆãƒ”ãƒƒã‚¯ã¸å‘ã‘ã¦é…ä¿¡(Publish)ã—ã€ã¾ãŸè³¼èª­ã™ã‚‹(Subscribe)ã“ã¨ã§ä»–ã®ãƒãƒ¼ãƒ‰ã¨æƒ…å ±ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n  é…ä¿¡ã‚’è¡Œã†ãƒãƒ¼ãƒ‰ã‚’Publisherã€è³¼èª­ã‚’è¡Œã†ãƒãƒ¼ãƒ‰ã‚’Subscriberã¨å‘¼ã³ã¾ã™ã€‚ãƒãƒ¼ãƒ‰ã¯ã“ã®ã©ã¡ã‚‰ã‹ã«äºŒåˆ†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ã‚ã‘ã§ã¯ãªãã€ä¸€ã¤ã®ãƒãƒ¼ãƒ‰ãŒpublisherã§ã‚ã‚Šã€subscriberã§ã‚‚ã‚ã‚‹ã¨ã„ã†çŠ¶æ³ãŒã»ã¨ã‚“ã©ã§ã™ã€‚\n  ãƒˆãƒ”ãƒƒã‚¯ã«ã¯åå‰ãŒä»˜ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€åŒã˜ãƒˆãƒ”ãƒƒã‚¯ã«è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ãŒãƒ‡ãƒ¼ã‚¿ã‚’é€ã£ãŸã‚Šã€è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ãŒåŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(message)\nãƒˆãƒ”ãƒƒã‚¯ã¸é…ä¿¡ã—ãŸã‚Šã€è³¼èª­ã—ãŸã‚Šã™ã‚‹ã¨ãã®ROSã®ãƒ‡ãƒ¼ã‚¿å‹ã®ã“ã¨ã‚’ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(message)ã€ã¨å‘¼ã³ã¾ã™ã€‚ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‹ã¯msgãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã‚Œã¦ãŠã‚Šã€ä½¿ç”¨ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«ä¾å­˜ã—ãªã„ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«ãªã£ã¦ã„ã¾ã™ã€‚\nä»¥ä¸‹ã«ã€ç‰©ä½“ã‚„ãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ã‚’è¡¨ã™æ™‚ã«ã‚ˆãç”¨ã„ã‚‹geomemtry_msgs/PoseStampedå‹ã®msgãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¤ºã—ã¾ã™ã€‚ ä½ç½®æƒ…å ±ã®æ™‚é–“ã‚„åº§æ¨™ãƒ•ãƒ¬ãƒ¼ãƒ ã®æƒ…å ±ãŒå«ã¾ã‚Œã‚‹headerã¨åº§æ¨™ä½ç½®ã‚’è¡¨ã™poseã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚\nstd_msgs/Header header uint32 seq time stamp string frame_id geometry_msgs/Pose pose geometry_msgs/Point position float64 x float64 y float64 z geometry_msgs/Quaternion orientation float64 x float64 y float64 z float64 w  å„è¡Œã®å·¦å´ã«ã¯ãƒ‡ãƒ¼ã‚¿å‹ãŒã€å³å´ã«ã¯å¤‰æ•°åãŒè¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚\n    Topicé€šä¿¡ã®ã‚¤ãƒ¡ãƒ¼ã‚¸  \n    ROSãƒã‚¹ã‚¿(ROS master)\n  ã€ŒROSãƒã‚¹ã‚¿(ROS master)ã€ã¯ã€ãƒãƒ¼ãƒ‰ã€ãƒˆãƒ”ãƒƒã‚¯ã®åå‰ç™»éŒ²ã‚’è¡Œã„ã€ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ãŒä»–ã®ãƒãƒ¼ãƒ‰ã‹ã‚‰è¦‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚\n  é€šä¿¡ã™ã‚‹ãƒãƒ¼ãƒ‰åã¨ãƒˆãƒ”ãƒƒã‚¯åãŠã‚ˆã³ã‚µãƒ¼ãƒ“ã‚¹åã®å¯¾å¿œãŒæ±ºå®šã—ãŸå¾Œã€ãƒãƒ¼ãƒ‰åŒå£«ãŒã€Œpeer-to-peerã€ã§é€šä¿¡ã—ã¾ã™ã€‚\n  ROSãƒã‚¹ã‚¿ã‚’èµ·å‹•ã™ã‚‹ã«ã¯ã€Œroscoreã€ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ï¼ˆãŒã€ãƒ­ãƒœãƒƒãƒˆã«ã‚ˆã£ã¦ã¯èµ·å‹•æ™‚ã«ã“ã®ã‚³ãƒãƒ³ãƒ‰ãŒè‡ªå‹•ã§å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã€ã‚ã¾ã‚Šæ„è­˜ã™ã‚‹æ©Ÿä¼šã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼‰ã€‚\n    ROSã¨é€£å‹•ã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ROSã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¨é€£å‹•ã—ã¦ä½¿ã†ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ç°¡å˜ãªèª¬æ˜ã«ã¨ã©ã‚ã‚‹ã®ã§ã€è©³ã—ã„ä½¿ã„æ–¹ã¯å¿…è¦ã«ãªã£ãŸéš›ã«èª¿ã¹ã¦ãã ã•ã„ã€‚\n  OpenCV\nè±Šå¯Œãªæ©Ÿèƒ½ã‚’æŒã¤2Dç”»åƒå‡¦ç†ç”¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ ã‚«ãƒ¡ãƒ©ã§æ’®å½±ã—ãŸç”»åƒã‚’å‡¦ç†ã™ã‚‹éš›ã«ä½¿ç”¨ã—ã¾ã™ã€‚\n  PCL(Point Cloud Library)\n 3æ¬¡å…ƒç‚¹ç¾¤å‡¦ç†ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ HSRã‚„Roombaã«ã¯RGBDã‚«ãƒ¡ãƒ©ãŒæ­è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚Dã¯Depthã¨ã„ã†æ„å‘³ã§ã€ç”»åƒã®å„ãƒ”ã‚¯ã‚»ãƒ«ã«è·é›¢æƒ…å ±ã‚’å¯¾å¿œã•ã›ãŸDepthç”»åƒã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nã“ã®ã‚ˆã†ãªä¸‰æ¬¡å…ƒã®ç‚¹ç¾¤ã®æƒ…å ±ã‚’å‡¦ç†ã™ã‚‹éš›ã«PCLã‚’ä½¿ã†ã¨ä¾¿åˆ©ã§ã™ã€‚     OpenSLAM\n åœ°å›³ã‚’åŠ¹æœçš„ã«ä½¿ã†ã“ã¨ã§ã€ã‚ˆã‚Šå®‰å®šã—ãŸãƒ­ãƒœãƒƒãƒˆã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚ ç§»å‹•ãƒ­ãƒœãƒƒãƒˆã®è‡ªå·±ä½ç½®æ¨å®šã¨åœ°å›³ç”Ÿæˆã‚’åŒæ™‚ã«è¡Œã†SLAM(Simultaneous Localization and Mapping)ã¨ã„ã†æ‰‹æ³•ã¯ã€ãã‚Œã ã‘ã§ä¸€ã¤ã®ç ”ç©¶åˆ†é‡ã«ãªã‚‹ç¨‹å¥¥æ·±ã„åˆ†é‡ã§ã€æ´»ç™ºã«ç ”ç©¶ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚ OpenSLAMã¯ã€SLAMã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¬é–‹ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æä¾›ã—ã¦ãŠã‚Šã€æ§˜ã€…ãªSLAMã®æ‰‹æ³•ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚    ã“ã‚Œä»¥å¤–ã«ã‚‚å¤šãã®ãƒ„ãƒ¼ãƒ«ãŒROSã¨é€£å‹•ã—ã¦ã„ã¾ã™ã€‚\nå¯è¦–åŒ–ãƒ„ãƒ¼ãƒ« ãƒ­ãƒœãƒƒãƒˆå†…éƒ¨ã®å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãå‡¦ç†ã•ã‚Œã¦ã„ã‚‹ã‹çŸ¥ã‚ŠãŸã„å ´åˆã€å¤‰æ•°ã®ä¸­èº«ã®æ•°å€¤ãªã©ã‚’ç›´æ¥ã¿ã‚‹ã®ã¯å¤§å¤‰ã§ã™ã€‚ç›´æ„Ÿçš„ã«ã‚ã‹ã‚Šã¥ã‚‰ã„ãŸã‚ãƒŸã‚¹ã‚‚å¢—ãˆã¾ã™ã€‚\nå¯è¦–åŒ–ã‚’ã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºã‚„ãƒ‡ãƒãƒƒã‚°ãŒã‚ˆã‚ŠåŠ¹ç‡ã‚ˆãé€²ã‚ã‚‰ã‚Œã¾ã™ã€‚\n  rqt\nrqtã¯ROSã®GUIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€æ§˜ã€…ãªãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚\nãƒãƒ¼ãƒ‰ã®çŠ¶æ…‹ã‚’å¯è¦–åŒ–ã™ã‚‹rqt_graph(ä¸‹å›³1)ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å€¤ã‚’æ™‚ç³»åˆ—ã«æ²¿ã£ã¦ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹rqt_plot(ä¸‹å›³2)ãªã©ãŒã‚ã‚Šã¾ã™ã€‚\n  å›³1 rqt_graph wikipediaã‚ˆã‚Šå¼•ç”¨    å›³2 rqt_plot wikipediaã‚ˆã‚Šå¼•ç”¨      RViz\nãƒ­ãƒœãƒƒãƒˆã®ä¸‰æ¬¡å…ƒãƒ¢ãƒ‡ãƒ«ã‚„åº§æ¨™ç³»ã€æ¸¬å®šã—ãŸä¸‰æ¬¡å…ƒç‚¹ç¾¤ãªã©ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚\nä¸‰æ¬¡å…ƒç©ºé–“ã®æƒ…å ±ä»¥å¤–ã«ã€ã‚«ãƒ¡ãƒ©ã«å†™ã£ã¦ã„ã‚‹ç”»åƒãªã©ã‚‚è¡¨ç¤ºã§ãã¾ã™ã€‚\n    gazebo\nã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ­ãƒœãƒƒãƒˆç”¨ä¸‰æ¬¡å…ƒå‹•åŠ›å­¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã€‚\nèª¬æ˜ã¯å‰²æ„›ã—ã¾ã™ã€‚\n  æ¼”ç¿’ roombaãƒ‰ãƒ©ã‚¤ãƒã‚’èµ·å‹•ã—ã€å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹   jetsonã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹\n(é–‹ç™ºPC):~$ ssh roomba_dev1 (jetson):~$    dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹\n (jetson):~$ cd ~/23_group_x/roomba_hack (jetson):~/23_group_x/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œæˆã—ã€ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«å…¥ã‚‹ã€‚ root@roomba-dev-jetson:~/roomba_hack# # ä¸Šã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã‚Œã°ã‚³ãƒ³ãƒ†ãƒŠå†…éƒ¨ã«å…¥ã‚Œã¦ã„ã¾ã™ã€‚  ä»Šå¾Œdockerå†…éƒ¨ã§ã‚ã‚‹ã“ã¨ã¯(docker)ã¨è¡¨è¨˜ã—ã¾ã™ã€‚\n  roomba driverãªã©ã‚’èµ·å‹•ã™ã‚‹launchãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹\nã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ«ãƒ³ãƒã®é›»æºãŒå…¥ã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚\n(jetson)(docker):~/roomba_hack# roslaunch roomba_bringup bringup.launch  èµ·å‹•ã«æˆåŠŸã™ã‚Œã°ãƒ«ãƒ³ãƒã‹ã‚‰ãƒ”ãƒƒã¨çŸ­ã„éŸ³ãŒé³´ã‚Šã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã¯èµ¤ã„æ–‡å­—ãŒå‡ºç¶šã‘ã‚‹ã¯ãšã§ã™ã€‚\n   é–‹ç™ºPCã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹   é–‹ç™ºPCã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹\n(é–‹ç™ºPC):~$ cd ~/23_group_x/roomba_hack (é–‹ç™ºPC):~/23_group_x/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x # xã«ã¯roomba_devã®å¾Œã«ã¤ãæ•°å­—ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚   å…ˆã»ã©jetsonå†…ã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã—ãŸãŒã€ä»Šå›ã¯é–‹ç™ºPCå†…ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™ã€‚ ã“ã®ã¨ãå¼•æ•°ã«jetsonã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ã€jetsonå†…ã®ROSãƒã‚¹ã‚¿(å‰è¿°)ã«ã€é–‹ç™ºPCã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚    ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰\n(é–‹ç™ºPC)(docker):~/roomba_hack# cd catkin_ws (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# ls # catkin_wså†…ã«å­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¢ºèªã™ã‚‹ã€‚ (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# catkin_make # ã„ã‚ã„ã‚ãªå‡ºåŠ›ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚ (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# ls # å†åº¦catkin_wså†…ã«å­˜åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¢ºèªã™ã‚‹ã€‚  ã“ã“ã§ã€buildã¨develã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã¨ã€ã†ã¾ãã„ã£ã¦ã„ã¾ã™ã€‚\n build\nC++ã®ã‚³ãƒ¼ãƒ‰ã‚’ç”¨ã„ã‚‹éš›ã«ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚pythonã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ãã«ã¯ã»ã¨ã‚“ã©æ„è­˜ã—ãªã„ã€‚ devel\næ§˜ã€…ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚“ã§ã„ã‚‹ãŒã€ç‰¹ã«setupãƒ•ã‚¡ã‚¤ãƒ«ãŒé‡è¦ã€‚\nã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ç¾åœ¨ã„ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«å«ã¾ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ROSã®ç’°å¢ƒãŒè¨­å®šã•ã‚Œã‚‹ã€‚    setupãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹\n(é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# source devel/setup.bash # setupãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ     ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½¿ã£ã¦ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã™   ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’èµ·å‹•\nã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒé–‹ç™ºPCã«æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n(é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# roslaunch roomba_teleop teleop.launch    ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®ãƒ¢ãƒ¼ãƒ‰\n ç§»å‹•ãƒ»åœæ­¢ è‡ªå‹•ãƒ»ãƒãƒ‹ãƒ¥ã‚¢ãƒ« ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒ»ã‚¢ãƒ³ãƒ‰ãƒƒã‚­ãƒ³ã‚°    ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã«ã‚ˆã‚‹æ“ç¸¦\n ç§»å‹•ãƒ­ãƒƒã‚¯è§£é™¤ L1ã‚’æŠ¼ã—ã¦ã„ã‚‹æ™‚ã®ã¿ç§»å‹•ã‚³ãƒãƒ³ãƒ‰ãŒå‹•ä½œã—ã¾ã™ã€‚ å·¦ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ ç¸¦æ–¹å‘ã§å‰é€²é€Ÿåº¦(æ‰‹å‰ã«å€’ã™ã¨ãƒãƒƒã‚¯)ã€æ¨ªæ–¹å‘ã¯å›è»¢é€Ÿåº¦ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ å·¦çŸ¢å° ãã‚Œãã‚Œã€ä¸€å®šã«ä½é€Ÿåº¦ã§å‰é€²ãƒ»å¾Œé€€ãƒ»å›è»¢ã—ã¾ã™ã€‚       Roombaã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹   é–‹ç™ºPCã®æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§dockerã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹\nbringup.launchåŠã³teleop.launchã‚’å®Ÿè¡Œã—ãŸã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«å é ˜ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€é–‹ç™ºPCã§æ–°ã—ãã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«å…¥ã‚Šã¾ã™ã€‚\nã™ã§ã«é–‹ç™ºPCã§èµ·å‹•ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹å ´åˆã¯ã€\n(é–‹ç™ºPC):~/23_group_x/roomba_hack$ docker exec -it roomba_hack bash # docker exec -it \u0026lt;ã‚³ãƒ³ãƒ†ãƒŠå\u0026gt; bash ã§èµ·å‹•ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚  ã¾ãŸã¯\n(é–‹ç™ºPC):~/23_group_x/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh  ã®ã„ãšã‚Œã‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å…¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n  Roombaã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹\nã•ã¾ã–ã¾ãªã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦Roombaã®æƒ…å ±ã‚’å–å¾—ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n(é–‹ç™ºPC)(docker):~/roomba_hack# rosnode list # ãƒãƒ¼ãƒ‰ã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ (é–‹ç™ºPC)(docker):~/roomba_hack# rostopic list # ãƒˆãƒ”ãƒƒã‚¯ã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ (é–‹ç™ºPC)(docker):~/roomba_hack# rostopic echo /cmd_vel # /cmd_velã¨ã„ã†ãƒˆãƒ”ãƒƒã‚¯ã®ä¸­èº«ã‚’è¡¨ç¤ºã™ã‚‹ # teleop.launchã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’æ“ä½œã™ã‚‹ã¨ã€/cmd_velã®ä¸­èº«ãŒå¤‰åŒ–ã™ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚ (é–‹ç™ºPC)(docker):~/roomba_hack# rqt_graph # ãƒãƒ¼ãƒ‰ã¨ãƒˆãƒ”ãƒƒã‚¯ã®é–¢ä¿‚ã‚’è¡¨ç¤º (é–‹ç™ºPC)(docker):~/roomba_hack# rviz # rvizã‚’èµ·å‹•     ãƒ—ãƒ­ã‚»ã‚¹ã®çµ‚äº†ãƒ»dockerã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰å‡ºã‚‹   ãƒ—ãƒ­ã‚»ã‚¹ã®çµ‚äº†\nä¸€éƒ¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯çµ‚äº†ã™ã‚‹ã¾ã§å‡¦ç†ã‚’ç¶šã‘ã‚‹ãŸã‚ã€æ˜ç¤ºçš„ã«çµ‚äº†ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\nå¤šãã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯Ctrl+Cã§çµ‚äº†ã—ã¾ã™ã€‚\n  dockerã‚³ãƒ³ãƒ†ãƒŠãƒ»ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰å‡ºã‚‹\nã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ä¸Šã§\nexit  ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€\n ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«ã„ã‚‹å ´åˆã¯ã‚³ãƒ³ãƒ†ãƒŠå¤–ã«ã§ã‚‹ã€‚ sshã—ã¦ã„ã‚‹å ´åˆã¯sshã‚’çµ‚äº†ã™ã‚‹ã€‚ ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’çµ‚äº†ã™ã‚‹ã€‚  ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€Ctrl+Dã§ã‚‚åŒæ§˜ã®ã“ã¨ãŒã§ãã¾ã™ã€‚\n  ","date":1686009600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1686009600,"objectID":"20855653654f6e28e5120898d90797bd","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap1/ros/","publishdate":"2023-06-06T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap1/ros/","section":"course","summary":"ãƒ­ãƒœãƒƒãƒˆé–‹ç™ºã«ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹ROSã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹\n","tags":null,"title":"ROSã¨ã¯","type":"book"},{"authors":null,"categories":null,"content":"ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã«ã¤ã„ã¦ç†è§£ã—ã‚ˆã†\nLearn ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ ROSã§ã¯ã€ç‰¹å®šã®æ©Ÿèƒ½ã‚„ã‚¿ã‚¹ã‚¯ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¾ã¨ã‚ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ç®¡ç†ã—ã¾ã™ã€‚ å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ç‹¬ç«‹ã—ã¦é–‹ç™ºãƒ»ä¿å®ˆã•ã‚Œã€ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒç‹¬ç«‹ã—ã¦ã„ã‚‹ã“ã¨ã§ã€ä¸€åº¦é–‹ç™ºã—ãŸæ©Ÿèƒ½ã‚’ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å†åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚å®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚\nä¾‹ã¨ã—ã¦ã€navigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚’ç¤ºã—ã¾ã™ã€‚\nnavigation_tutorial â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ launch â”‚Â â”œâ”€â”€ amcl.launch â”‚Â â”œâ”€â”€ avoidance.launch â”‚Â â”œâ”€â”€ gmapping.launch â”‚Â â”œâ”€â”€ go_straight.launch â”‚Â â”œâ”€â”€ localization.launch â”‚Â â”œâ”€â”€ map_server.launch â”‚Â â”œâ”€â”€ move_base.launch â”‚Â â””â”€â”€ navigation.launch â”œâ”€â”€ package.xml â”œâ”€â”€ params â”‚Â â”œâ”€â”€ base_global_planner_params.yaml â”‚Â â”œâ”€â”€ base_local_planner_params.yaml â”‚Â â”œâ”€â”€ costmap_common_params.yaml â”‚Â â”œâ”€â”€ dwa_local_planner_params.yaml â”‚Â â”œâ”€â”€ global_costmap_params.yaml â”‚Â â”œâ”€â”€ local_costmap_params.yaml â”‚Â â””â”€â”€ move_base_params.yaml â”œâ”€â”€ scripts â”‚Â â”œâ”€â”€ avoidance.py â”‚Â â”œâ”€â”€ simple_control2.py â”‚Â â””â”€â”€ simple_control.py â””â”€â”€ src â”œâ”€â”€ avoidance.cpp â””â”€â”€ go_straight.cpp  scriptsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å½¹å‰² ä¸€èˆ¬çš„ã«ã€scriptsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«pythonã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã€srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«C++ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒé…ç½®ã•ã‚Œã¾ã™ã€‚\nä½œæˆã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯rosrunã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n$ rosrun \u0026lt;package name\u0026gt; \u0026lt;file name\u0026gt; # pythonãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆ $ rosrun navigation_tutorial simple_control2.py # C++ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆ $ rosrun navigation_tutorial go_straight  å®Ÿè¡Œæ™‚ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’æŒ‡å®šã™ã‚‹ã®ã§ã€ç¾åœ¨ã©ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã„ã‚‹ã‹ã«é–¢ä¿‚ãªãå®Ÿè¡ŒãŒå¯èƒ½ã§ã™ã€‚\n launchãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å½¹å‰² launchãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯launchãƒ•ã‚¡ã‚¤ãƒ«ãŒé…ç½®ã•ã‚Œã¦ã„ã¾ã™ã€‚\nlaunchãƒ•ã‚¡ã‚¤ãƒ«ã¯è¤‡æ•°ã®ROSãƒãƒ¼ãƒ‰ã‚’ä¸€æ‹¬ã§èµ·å‹•ã™ã‚‹ãŸã‚ã®è¨­å®šãŒæ›¸ã‹ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã‚’èµ·å‹•ã—ãŸã„æ™‚ã«ã€å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€ã¤ä¸€ã¤ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§å®Ÿè¡Œã—ã¦ã„ãã“ã¨ã¯å¤§å¤‰ã§ã™ãŒã€launchãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ä¸€æ‹¬ã§èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nlaunchãƒ•ã‚¡ã‚¤ãƒ«ã¯roslaunchã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n$ roslaunch \u0026lt;package name\u0026gt; \u0026lt;launch file name\u0026gt; # ä¾‹ $ roslaunch navigation_tutorial move_base.launch  .pyãƒ•ã‚¡ã‚¤ãƒ«ã‚„.cppãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒæ§˜ã€å®Ÿè¡Œæ™‚ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æŒ‡å®šã™ã‚‹ã®ã§ã€ç¾åœ¨ã©ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã„ã‚‹ã‹ã«é–¢ä¿‚ãªãå®Ÿè¡ŒãŒå¯èƒ½ã§ã™ã€‚\n ROSã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ æ–°ã—ã„ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®é–‹ç™ºã¯ã€ä¸€èˆ¬ã«ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¨å‘¼ã°ã‚Œã‚‹ä½œæ¥­ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚‚ã¨ã§è¡Œã‚ã‚Œã¾ã™ã€‚\nãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¯ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã‚„å®Ÿè¡Œã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹ãŸã‚ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã™ã€‚catkin_makeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã¯ä»»æ„ã§ã™ãŒã€ã‚ˆãcatkin_wsã¨ã„ã†åå‰ãŒä½¿ã‚ã‚Œã¾ã™ã€‚\nroomba_hackãƒªãƒã‚¸ãƒˆãƒªä¸‹ã«ã‚ã‚‹catkin_wsã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚’ç¤ºã—ã¾ã™ã€‚\ncatkin_ws â”œâ”€â”€ build â”œâ”€â”€ devel â””â”€â”€ src â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ navigation_tutorial â”‚Â â”œâ”€â”€ CMakeLists.txt â”‚Â â”œâ”€â”€ launch â”‚Â â”œâ”€â”€ package.xml â”‚Â â”œâ”€â”€ params â”‚Â â”œâ”€â”€ scripts â”‚Â â””â”€â”€ src â””â”€â”€ roomba â”œâ”€â”€ roomba_bringup â”‚Â â”œâ”€â”€ CMakeLists.txt â”‚Â â”œâ”€â”€ config â”‚Â â”œâ”€â”€ launch â”‚Â â””â”€â”€ package.xml â”œâ”€â”€ roomba_description â”‚Â â”œâ”€â”€ CMakeLists.txt â”‚Â â”œâ”€â”€ config â”‚Â â”œâ”€â”€ launch â”‚Â â”œâ”€â”€ meshes â”‚Â â”œâ”€â”€ package.xml â”‚Â â””â”€â”€ urdf â”œâ”€â”€ roomba_gazebo â”‚Â â”œâ”€â”€ CMakeLists.txt â”‚Â â”œâ”€â”€ launch â”‚Â â””â”€â”€ package.xml â””â”€â”€ roomba_teleop â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ include â”œâ”€â”€ launch â”œâ”€â”€ package.xml â””â”€â”€ src  catkin_wså†…ã§ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹catkin_makeã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\n$ cd catkin_ws # catkin_wsã«ç§»å‹• $ catkin_make  ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã®æ™‚ã€ä»¥ä¸‹ã®æ‰‹é †ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã™ã€‚\n ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«é…ç½®ã•ã‚ŒãŸROSãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ¤œå‡ºã—ã€ãƒ“ãƒ«ãƒ‰å¯¾è±¡ã¨ã—ã¦èªè­˜ã™ã‚‹ã€‚ å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã€ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ãªå ´åˆã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’è¡Œã†ã€‚ ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’develãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã™ã‚‹ã€‚  ã¾ãŸã€catkin_makeã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œå¾Œã«\n$ source devel/setup.bash  ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ç’°å¢ƒå¤‰æ•°ã«è‡ªåˆ†ãŒä»Šã„ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ãƒ‘ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nROSã®ã‚³ãƒãƒ³ãƒ‰ ROSã®ã‚³ãƒãƒ³ãƒ‰ã®ã†ã¡ã€ã‚ˆãä½¿ç”¨ã™ã‚‹ã‚‚ã®ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚\n  Topicé–¢é€£\n$ rostopic list topicã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ $ rostopic echo \u0026lt;topic name\u0026gt; æŒ‡å®šã•ã‚ŒãŸtopicã®ä¸­èº«ã‚’è¡¨ç¤ºã™ã‚‹ $ rostopic hz \u0026lt;topic name\u0026gt; topicã®é…ä¿¡å‘¨æ³¢æ•°ã‚’å–å¾—ã™ã‚‹ $ rostopic info \u0026lt;topic name\u0026gt; topicã®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ $ rostopic pub \u0026lt;topic name\u0026gt; \u0026lt;topic\u0026gt; topicã‚’é…ä¿¡ã™ã‚‹ $ rostopic type \u0026lt;topic name\u0026gt; topicã®å‹ã‚’ç¢ºèªã™ã‚‹    Nodeé–¢é€£\n$ rosnode list nodeã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ $ rosnode ping \u0026lt;node name\u0026gt; nodeã®æ¥ç¶šãƒ†ã‚¹ãƒˆã‚’è¡Œã† $ rosnode info \u0026lt;node name\u0026gt; nodeã®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ $ rosnode kill \u0026lt;node name\u0026gt; nodeã‚’ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã™ã‚‹    Packageé–¢é€£\n$ rospack list packageã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ $ roscd \u0026lt;package name\u0026gt; æŒ‡å®šã—ãŸpackageå†…ã«ç§»å‹•ã™ã‚‹    ROSã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ›¸ãæ–¹ ãã‚Œã§ã¯å®Ÿéš›ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n#!/usr/bin/env python3 import rospy from geometry_msgs.msg import Twist def time_control(pub, velocity, yawrate, time): # (2) vel = Twist() start_time = rospy.get_rostime().secs while(rospy.get_rostime().secs-start_time\u0026lt;time): vel.linear.x = velocity vel.angular.z = yawrate pub.publish(vel) rospy.sleep(0.1) def simple_controller(): # (1) rospy.init_node('simple_controller', anonymous=True) pub = rospy.Publisher('/cmd_vel', Twist, queue_size=10) time_control(pub, 0.0, 0.0, 0.5) time_control(pub, 0.3, 0.0, 2.0) time_control(pub, 0.0, 0.0, 0.5) time_control(pub, -0.3, 0.0, 2.0) time_control(pub, 0.0, 0.0, 0.5) time_control(pub, 0.0, 0.5, 2.0) time_control(pub, 0.0, 0.0, 0.5) time_control(pub, 0.0, -0.5, 2.0) if __name__=='__main__': # (3) try: simple_controller() except rospy.ROSInitException: pass  (1) simple_controlleré–¢æ•° ã¾ãšsimple_controlleré–¢æ•°å†…ã‚’ã¿ã¦ã„ãã¾ã—ã‚‡ã†ã€‚\nä»¥ä¸‹ã®éƒ¨åˆ†ã§\u0026quot;simple_controller\u0026quot;ã¨ã„ã†åå‰ã®ãƒãƒ¼ãƒ‰ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚\nrospy.init_node('simple_controller', anonymous=True)  ä»¥ä¸‹ã®éƒ¨åˆ†ã§ã€ã“ã®ãƒãƒ¼ãƒ‰ãŒPublisherã§ã‚ã‚‹ã“ã¨ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚\npub = rospy.Publisher('/cmd_vel', Twist, queue_size=10)  ä»Šå›ã®å ´åˆã¯ã€/cmd_velãƒˆãƒ”ãƒƒã‚¯ã‚’Twistå‹ã§é€ä¿¡ã™ã‚‹Publisherã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚\n (2) time_controlé–¢æ•° ç¶šã„ã¦ã€time_controlé–¢æ•°ã§ã™ã€‚\nã“ã®é–¢æ•°ã¯publisherã€é€Ÿåº¦ã€è§’é€Ÿåº¦ã€æ™‚é–“ã‚’å—ã‘å–ã‚Šã€é€Ÿåº¦æŒ‡ä»¤ã‚’publishã—ã¾ã™ã€‚\ndef time_control(pub, velocity, yawrate, time): vel = Twist() start_time = rospy.get_rostime().secs while(rospy.get_rostime().secs-start_time\u0026lt;time): vel.linear.x = velocity vel.angular.z = yawrate pub.publish(vel) rospy.sleep(0.1)  ã“ã“ã§Twistå‹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚\nvel = Twist()  whileæ–‡ã§å—ã‘å–ã£ãŸæ™‚é–“ãŒéãã‚‹ã¾ã§ã®é–“ã€å—ã‘å–ã£ãŸé€Ÿåº¦ã¨å„é€Ÿåº¦ã‚’velã«æ ¼ç´ã—ã€pub.publish(vel)ã§publishã‚’è¡Œãªã£ã¦ã„ã¾ã™ã€‚\nwhile(rospy.get_rostime().secs-start_time\u0026lt;time): vel.linear.x = velocity vel.angular.z = yawrate pub.publish(vel) rospy.sleep(0.1)   (3) ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°__name__ã‚’ç”¨ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å®Ÿè¡Œ (1)ã‚„(2)ã¯é–¢æ•°ã®å®šç¾©ã‚’ã—ã¦ã„ã‚‹ã ã‘ã§ã€å®Ÿéš›ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ãŸéš›ã«ã¯\nif __name__=='__main__':  ä»¥ä¸‹ã®éƒ¨åˆ†ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚\n__name__ã¯pythonã®ç‰¹æ®Šãªå¤‰æ•°ã®ä¸€ã¤ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§è¨­å®šã•ã‚Œã¾ã™ã€‚ pythonã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã‚³ãƒãƒ³ãƒ‰ã§ç›´æ¥å®Ÿè¡Œã™ã‚‹ã‹ã€importã§ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰å‚ç…§ã•ã‚Œã‚‹ã‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã«ã‚ˆã‚Šå®Ÿè¡Œã•ã‚Œã¾ã™ãŒã€__name__ã¯ã“ã®å®Ÿè¡Œæ–¹æ³•ã«ã‚ˆã£ã¦å€¤ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚\n ç›´æ¥å®Ÿè¡Œã•ã‚ŒãŸå ´åˆã€__name__ã«ã¯__main__ã¨è¨€ã†æ–‡å­—åˆ—ãŒä»£å…¥ã•ã‚Œã¾ã™ã€‚ importã•ã‚ŒãŸå ´åˆã€__name__ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«åãŒä»£å…¥ã•ã‚Œã¾ã™ã€‚  ã“ã®æ€§è³ªã‚’åˆ©ç”¨ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒç›´æ¥å®Ÿè¡Œã•ã‚ŒãŸå ´åˆã®ã¿å®Ÿè¡Œã—ãŸã„å‡¦ç†ã‚’ifæ–‡ã§å›²ã‚“ã§ã„ã¾ã™ã€‚\nå¤§æŠµã®å ´åˆã€rosã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã€ä¸Šã«æŒ™ã’ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚ˆã†ã«ã€é–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ã®å®šç¾©ã¨å®Ÿéš›ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹éƒ¨åˆ†ã‚’åˆ†ã‘ã¦è¨˜è¿°ã—ã¾ã™ã€‚\n æ¼”ç¿’ ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘ãã‚Œãã‚Œdockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹• jetsonã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ ssh roomba_dev1 (jetson):~$ cd ~/group_a/roomba_hack (jetson):~/group_a/roomba_hack ./RUN-DOCKER-CONTAINER.sh (jetson)(docker):~/roomba_hack#  é–‹ç™ºPCã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ cd ~/group_a/roomba_hack (é–‹ç™ºPC):~/group_a/roomba_hack# ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x (é–‹ç™ºPC)(docker):~/roomba_hack#   ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘ãƒ“ãƒ«ãƒ‰ã‚’ã—ã¦ãƒ‘ã‚¹ã‚’é€šã™ catkin_makeå¾Œã«develã¨buildãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚\n(é–‹ç™ºPC)(docker):~/roomba_hack# cd catkin_ws (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# rm -rf devel build (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# ls (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# catkin_make (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# ls (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# source ./devel/setup.bash   ã€jetsonã€‘ROSãƒã‚¹ã‚¿ã€å„ç¨®ãƒãƒ¼ãƒ‰ã‚’èµ·å‹• (jetson)(docker):~/roomba_hack# roslaunch roomba_bringup bringup.launch   ROSãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¯è¦–åŒ– ã€é–‹ç™ºPCã€‘topicã®ç¢ºèª Topicé–¢é€£ã®ã‚³ãƒãƒ³ãƒ‰ã®ã¨ã“ã‚ã®rostopic listã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦topicä¸€è¦§ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic list  ç‰¹å®šã®topicã®å‹ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker)# rostopic type /camera/color/image_raw (é–‹ç™ºPC)(docker)# rostopic type /scan  ãã®å‹ãŒå®Ÿéš›ã«ã©ã®ã‚ˆã†ãªæ§‹æˆã‚’ã—ã¦ã„ã‚‹ã®ã‹ã¯rosmsg info \u0026lt;topic type\u0026gt;ã§èª¿ã¹ã‚‰ã‚Œã¾ã™ã€‚\nå‚è€ƒ\nsensor_msgs/LaserScanå‹ http://docs.ros.org/en/melodic/api/sensor_msgs/html/msg/LaserScan.html\nsensor_msgs/Imageå‹ http://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/Image.html\nç‰¹å®šã®topicã®ä¸­èº«ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker)# rostopic echo /camera/color/image_raw (é–‹ç™ºPC)(docker)# rostopic echo /scan  rvizã‚’ç”¨ã„ã¦å¯è¦–åŒ–\n(é–‹ç™ºPC)(docker)# rviz   ã€é–‹ç™ºPCã€‘topicã®publish(é…ä¿¡) topic/cmd_velã®æƒ…å ±ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker)# rostopic info /cmd_vel  topic/cmd_velã®å‹ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker)# rostopic type /cmd_vel  geometry_msgs/Twistå‹ http://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/Twist.html\ntopic/cmd_velã‚’publish\n(é–‹ç™ºPC)(docker)# rostopic pub /cmd_vel geometry_msgs/Twist \u0026quot;linear: x: 1.0 y: 0.0 z: 0.0 angular: x: 0.0 y: 0.0 z: 0.0\u0026quot;  (é–‹ç™ºPC)(docker)# rosrun navigation_tutorial simple_control.py   Try it! æ™‚é–“ãŒä½™ã£ãŸäººå‘ã‘ try it! roomba_bringupãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®bringup.launchã®ä¸­èº«ã‚’èª­ã‚“ã§ã¿ã‚ˆã†\nhint roscdã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ç°¡å˜ã«ç§»å‹•ãŒã§ãã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯catã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚\ntry it! é–‹ç™ºPCã§rosnodeé–¢é€£ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†\ntry it! é–‹ç™ºPCã§rosrun rqt_graph rqt_graphã‚’å®Ÿè¡Œã—ã¦nodeã¨topicã®é–¢é€£ã‚’å¯è¦–åŒ–ã—ã¦ã¿ã‚ˆã†\ntry it! é–‹ç™ºPCã§simple_control.pyã®ä¸­èº«ã‚’èª­ã‚“ã§ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ã¿ã‚ˆã†\nhint ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã¨ãã¯ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ã†ã“ã¨ãŒãŠã™ã™ã‚ã§ã™ã€‚æ–°ã—ãã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦\n(é–‹ç™ºPC):~$ cd group_a/roomba_hack (é–‹ç™ºPC):~group_a/roomba_hack$ code .  ã§VScodeã‚’èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n","date":1649116800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649116800,"objectID":"3a3eac87851dbc29e0c5e1d274ba3f31","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap2/rosbasic/","publishdate":"2022-04-05T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap2/rosbasic/","section":"course","summary":"ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã«ã¤ã„ã¦ç†è§£ã—ã‚ˆã†\n","tags":null,"title":"ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹","type":"book"},{"authors":null,"categories":null,"content":"ã‚»ãƒ³ã‚µã®å€¤ã‚’èª­ã¿å–ã‚Šãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\nLearn ãƒ­ãƒœãƒƒãƒˆã‚»ãƒ³ã‚µã®åŸºç¤çŸ¥è­˜ ãƒ­ãƒœãƒƒãƒˆãŒå‹•ä½œã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚»ãƒ³ã‚µã¯å¤§ãã2ç¨®é¡ã«åˆ†ã‘ã‚‰ã‚Œã‚‹ã€‚\n1ã¤ç›®ãŒå¤–ç•Œã‚»ãƒ³ã‚µã§ã€ã“ã‚Œã¯ãƒ­ãƒœãƒƒãƒˆãŒè¡Œå‹•ã™ã‚‹ç’°å¢ƒã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ã‚»ãƒ³ã‚µãƒ¼ã§ã‚ã‚‹ã€‚ å…·ä½“çš„ãªã‚»ãƒ³ã‚µã¨ã—ã¦ã€\n ãƒ¬ãƒ¼ã‚¶ã‚¹ã‚­ãƒ£ãƒŠ  ãƒ¬ãƒ¼ã‚¶ãƒ¼ãƒ“ãƒ¼ãƒ ã‚’ç…§å°„ã—ã¦ç‰©ä½“ä¸Šã®ç‚¹ã¾ã§ã®è·é›¢ã¨æ–¹å‘ã‚’è¨ˆæ¸¬ã™ã‚‹ã€‚ãƒ¬ãƒ¼ã‚¶ãƒ“ãƒ¼ãƒ ã‚’èµ°æŸ»ã™ã‚‹ã“ã¨ã§ã€ã‚»ãƒ³ã‚µå‘¨å›²ã®åºƒã„ç¯„å›²ã‚’è¨ˆæ¸¬ã—ãŸç‚¹ç¾¤ã‚’å¾—ã‚‰ã‚Œã‚‹ã€‚ ãƒ¬ãƒ¼ã‚¶ã‚¹ã‚­ãƒ£ãƒŠã‚’ç”¨ã„ã¦å¯¾è±¡ç‰©ã¾ã§ã®è·é›¢ã‚„ä½ç½®ã€å½¢çŠ¶ã‚’æ¤œçŸ¥ã™ã‚‹ã“ã¨ã‚’LiDAR(Light Detection And Ranging(å…‰ã«ã‚ˆã‚‹æ¤œçŸ¥ã¨æ¸¬è·))ã¨ã„ã†ã€‚   ãƒ‡ãƒ—ã‚¹ã‚«ãƒ¡ãƒ©  èµ¤å¤–ç·šãªã©ã‚’ç™ºå…‰ã—ã¦è·é›¢æƒ…å ±ã‚’ç”»åƒã¨ã—ã¦è¨ˆæ¸¬ã™ã‚‹ã€‚ãã‚Œã¨åŒæ™‚ã«é€šå¸¸ã®RGBç”»åƒã‚‚å–å¾—ã§ãã‚‹ã‚‚ã®ãŒã‚ã‚‹ã€‚    ãªã©ãŒã‚ã’ã‚‰ã‚Œã‚‹ã€‚\nã‚»ãƒ³ã‚µã®ãƒã‚¤ã‚ºã®å½±éŸ¿ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã€è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚\n2ã¤ç›®ã¯å†…ç•Œã‚»ãƒ³ã‚µã§ã€ã“ã‚Œã¯(ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®ã‚ˆã†ãªå¤‰å½¢å¯èƒ½ãª)ãƒ­ãƒœãƒƒãƒˆãŒè‡ªèº«ã®å†…éƒ¨çŠ¶æ…‹ã‚’æŠŠæ¡ã—ã€ä½ç½®ã‚„å§¿å‹¢ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã‚‹ã‚»ãƒ³ã‚µãƒ¼ã§ã‚ã‚‹ã€‚\n ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€  å›è»¢ä¿¡å·ã‚’é›»æ°—ä¿¡å·ã«å¤‰æ›ã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹ã€‚ ãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ã®æ¨å®šï¼šå°è»Šã«å–ã‚Šä»˜ã‘ã‚‰ã‚ŒãŸãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãŒå›è»¢è§’åº¦ã‚„å›è»¢é€Ÿåº¦ã‚’è¨ˆæ¸¬ã—ã€ãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ã‚„å‘ãã‚’æ¨å®šã™ã‚‹ã€‚ ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®åˆ¶å¾¡ï¼šãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã¯ã€ãƒ™ãƒ¼ã‚¹ã‚„é–¢ç¯€ã«ãƒ¢ãƒ¼ã‚¿ãƒ¼ã¨ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã‚’å‚™ãˆã¦ã„ã‚‹ã€‚ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã¯é–¢ç¯€ã®å›è»¢è§’åº¦ã‚’è¨ˆæ¸¬ã—ã€ã‚¢ãƒ¼ãƒ ã®ä½ç½®åˆ¶å¾¡ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ¼ãƒ ã¯æ‰€æœ›ã®ä½ç½®ã‚„è§’åº¦ã«æ­£ç¢ºã«ç§»å‹•ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚   IMU(Internal Measurement Unit)  ã‚¸ãƒ£ã‚¤ãƒ­ã€åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µã€ç£æ°—ã‚»ãƒ³ã‚µãªã©ãŒä¸€ä½“ã¨ãªã£ãŸã‚‚ã®ã€‚  ã‚¸ãƒ£ã‚¤ãƒ­ã‚»ãƒ³ã‚µã¯å›è»¢è§’ãƒ»å„é€Ÿåº¦ã‚’æ±‚ã‚ã‚‹ã‚»ãƒ³ã‚µã€‚ åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µã¯è¡æ’ƒã®æ¤œå‡ºã€æ­©è¡Œãƒ­ãƒœãƒƒãƒˆã®å§¿å‹¢åˆ¶å¾¡ãªã©ã«ä½¿ã‚ã‚Œã‚‹ã€‚      ãªã©ãŒå†…ç•Œã‚»ãƒ³ã‚µã§ã‚ã‚‹ã€‚\nå‚è€ƒ\n https://www.jsme.or.jp/jsme-medwiki/14:1013897#:~:text=robot%20sensor ","date":1649116800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649116800,"objectID":"ff51cff84b07cbb120bc73f6c20e4a6b","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap2/sensing1/","publishdate":"2022-04-05T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap2/sensing1/","section":"course","summary":"ã‚»ãƒ³ã‚µã®å€¤ã‚’èª­ã¿å–ã‚Šãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\n","tags":null,"title":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘ ","type":"book"},{"authors":null,"categories":null,"content":"Learn Navigationã‚·ã‚¹ãƒ†ãƒ  ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›®çš„ã¯ã€åœ°å›³ä¸Šã®ä»»æ„ã®ç›®æ¨™åœ°ç‚¹ã¸ã€éšœå®³ç‰©ã‚’é¿ã‘ãªãŒã‚‰ãªã‚‹ã¹ãæ—©ãè‡ªå¾‹ã—ã¦ç§»å‹•ã™ã‚‹ã“ã¨ã§ã™ã€‚\nãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã¯ã€\n åœ°å›³ ç›®æ¨™ä½ç½® è‡ªå·±ä½ç½®æ¨å®šçµæœ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚»ãƒ³ã‚µæƒ…å ±(LiDARã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ãªã©)  ãªã©ã‚’å…¥åŠ›ã¨ã—ã¦ã€ãƒ­ãƒœãƒƒãƒˆã¸ã®è¡Œå‹•æŒ‡ä»¤å€¤(é€Ÿåº¦ãªã©)ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚\nãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€åœ°å›³å…¨ä½“ã¨ãƒ­ãƒœãƒƒãƒˆå‘¨è¾º(ã‚»ãƒ³ã‚µã§è¦‹ãˆã‚‹ç¯„å›²)ã®å¤§ãã2ã¤ã«åˆ†ã‘ã¦è€ƒãˆã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\nåœ°å›³å…¨ä½“ã‚’è€ƒãˆã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³ã§ã¯ã€åœ°å›³æƒ…å ±ã¨ã‚´ãƒ¼ãƒ«æƒ…å ±ã‹ã‚‰å¤§ã¾ã‹ãªã‚´ãƒ¼ãƒ«ã¾ã§ã®çµŒè·¯ã‚’ç®—å‡ºã—ã¾ã™ã€‚\nãƒ­ãƒœãƒƒãƒˆå‘¨è¾ºã‚’è€ƒãˆã‚‹ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³ã§ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§ç®—å‡ºã—ãŸçµŒè·¯ã«æ²¿ã†ã‚ˆã†ã«ã—ã¤ã¤ã€å‘¨è¾ºã®éšœå®³ç‰©æƒ…å ±ã‚’é¿ã‘ã‚‹è¡Œå‹•æŒ‡ä»¤å€¤ã‚’ç®—å‡ºã—ã¾ã™ã€‚\nãã‚Œãã‚Œã®çµŒè·¯ã‚’è€ƒãˆã‚‹ã«ã‚ãŸã£ã¦ã€çµŒè·¯ã®ã‚³ã‚¹ãƒˆãŒã©ã†ãªã‚‹ã‹é‡è¦ã«ãªã‚Šã¾ã™ã€‚ ã“ã®ã‚³ã‚¹ãƒˆã‚’è¡¨ç¾ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ãŒç”¨ã„ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\n  Navigationã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦(from ROS wiki)  Cost Map ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã¯ã€çµŒè·¯ã‚’ç®—å‡ºã™ã‚‹ãŸã‚ã«ç”¨ã„ã‚‹ã“ã¨ã‹ã‚‰ã€æ‰±ã„ã‚„ã™ã„ã‚°ãƒªãƒƒãƒˆä¸Šã®å æœ‰æ ¼å­åœ°å›³ã¨ã„ã†å½¢ã§è¡¨ç¾ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\n(ç©ºã‚’é£›ã‚“ã ã‚Šã€3æ¬¡å…ƒåœ°å½¢ã‚’è€ƒãˆãªãã¦ã„ã„å ´åˆã¯ã€åŸºæœ¬2æ¬¡å…ƒã§è¡¨ç¾ã—ã¾ã™ã€‚)\nçµŒè·¯ã¯æ ¼å­åœ°å›³ä¸Šã§ã€ç‚¹ã§æ‰±ã†ã“ã¨ãŒå¤šã„ã§ã™ãŒã€ãƒ­ãƒœãƒƒãƒˆè‡ªèº«ã¯ã‚ã‚‹ç¨‹åº¦ã®å¤§ãã•ã‚’æŒã£ã¦ã„ã‚‹ã®ã§ã€ã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ã§å¾—ã‚‰ã‚ŒãŸç‚¹ã‚®ãƒªã‚®ãƒªã«çµŒè·¯ã‚’ç”Ÿæˆã™ã‚‹ã¨ã€è¡çªã—ã¦ã—ã¾ã—ã¾ã™ã€‚\nãã®ãŸã‚ã€ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã§ã¯ä»¥ä¸‹ã®å›³ã®ã‚ˆã†ã«ã‚¹ã‚­ãƒ£ãƒ³ã§å¾—ã‚‰ã‚ŒãŸç‚¹(å›³ä¸­ã®èµ¤ç‚¹)ã‹ã‚‰ã€ãƒ­ãƒœãƒƒãƒˆãŒå…¥ã£ã¦ã»ã—ããªã„ç¯„å›²ã«ã‚³ã‚¹ãƒˆ(å›³ä¸­ã®é’ãå¡—ã‚Šã¤ã¶ã•ã‚Œã¦ã„ã‚‹ã¨ã“ã‚)ãŒä»˜ä¸ã™ã‚‹ã¨ã„ã†è¡¨ç¾ã‚’ã—ã¾ã™ã€‚\n  ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—æ¦‚è¦(from ROS wiki)  Global Path Planning ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³ã®ä¾‹ã¨ã—ã¦ã€ã‚°ãƒ©ãƒ•æ¢ç´¢ã‚’åˆ©ç”¨ã—ãŸãƒ€ã‚¤ã‚¯ã‚¹ãƒˆãƒ©æ³•ã‚„A*æ³•ãªã©ã§çµŒè·¯æ¢ç´¢ã‚’ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚\n  ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³ã®ä¾‹(from PythonRobotics)  Local Path Planning å±€æ‰€çµŒè·¯è¨ˆç”»(Local Path Planning)ã¯ã€ãƒ­ãƒœãƒƒãƒˆå‘¨è¾ºã®éšœå®³ç‰©ã‚’é¿ã‘ãªãŒã‚‰ã€ç›®æ¨™å€¤ã¸æ—©ãè¡Œã‘ã‚‹ã‚ˆã†ãªçµŒè·¯(ãƒ­ãƒœãƒƒãƒˆã®è¡Œå‹•)ã‚’ç®—å‡ºã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã€‚\nä»£è¡¨çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦Dynamic Window Approach(DWA)ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚   ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³æ¦‚è¦(from ROS wiki) \nã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ¦‚è¦ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚\n ãƒ­ãƒœãƒƒãƒˆã®è¡Œå‹•ç©ºé–“ã‹ã‚‰è¡Œå‹•ã‚’ã‚µãƒ³ãƒ—ãƒ« ã‚µãƒ³ãƒ—ãƒ«ã—ãŸè¡Œå‹•ã¨ãƒ­ãƒœãƒƒãƒˆã®é‹å‹•ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦ã€ä¸€å®šæ™‚é–“ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ã¦çµŒè·¯ã‚’ç”Ÿæˆ ç”Ÿæˆã—ãŸçµŒè·¯ã”ã¨ã«ã€ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã‚„ã‚´ãƒ¼ãƒ«æƒ…å ±ã‹ã‚‰ã‚³ã‚¹ãƒˆã‚’ç®—å‡º ã‚³ã‚¹ãƒˆæœ€å°ã®çµŒè·¯ã‚’é¸æŠã—ã€ãƒ­ãƒœãƒƒãƒˆã®æŒ‡ä»¤å€¤ã¨ã™ã‚‹ 1~4ã‚’ç¹°ã‚Šè¿”ã™  æ¼”ç¿’ Dockerfileã«navigationã‚’è¿½åŠ ã—ã¦Buildã™ã‚‹ \n -- navigationã‚’launchã—ã¦ã€rvizä¸Šã§æŒ‡å®šã—ãŸä½ç½®ã¾ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã•ã›ã¦ã¿ã‚‹ (é–‹ç™ºPC)(docker) roslaunch navigation_tutorial navigation.launch   navigationã‚’launchã—ã¦ã€mapåº§æ¨™ç³»ã®ä½ç½®ã‚’æŒ‡å®šã—ã¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã•ã›ã¦ã¿ã‚‹ \n -- navigationã®paramã‚’ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ move baseã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ navigation_tutorial/params ã®ä¸­ã«yamlå½¢å¼ã§ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚\nlaunchãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯loadã‚³ãƒãƒ³ãƒ‰ã§yamlã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚\n move_base base_local_planner costmap_2d  ","date":1609459200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1609459200,"objectID":"ea25624150d5f3e46f1ef192419e7583","permalink":"https://matsuolab.github.io/roomba_hack_course/course/chap4/navigation/","publishdate":"2021-01-01T00:00:00Z","relpermalink":"/roomba_hack_course/course/chap4/navigation/","section":"course","summary":"","tags":null,"title":"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³","type":"book"},{"authors":null,"categories":null,"content":"Congratulations to Jian Yang and Monica Hall for winning the Best Paper Award at the 2020 Conference on Wowchemy for their paper â€œLearning Wowchemyâ€.\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer tempus augue non tempor egestas. Proin nisl nunc, dignissim in accumsan dapibus, auctor ullamcorper neque. Quisque at elit felis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aenean eget elementum odio. Cras interdum eget risus sit amet aliquet. In volutpat, nisl ut fringilla dignissim, arcu nisl suscipit ante, at accumsan sapien nisl eu eros.\nSed eu dui nec ligula bibendum dapibus. Nullam imperdiet auctor tortor, vel cursus mauris malesuada non. Quisque ultrices euismod dapibus. Aenean sed gravida risus. Sed nisi tortor, vulputate nec quam non, placerat porta nisl. Nunc varius lobortis urna, condimentum facilisis ipsum molestie eu. Ut molestie eleifend ligula sed dignissim. Duis ut tellus turpis. Praesent tincidunt, nunc sed congue malesuada, mauris enim maximus massa, eget interdum turpis urna et ante. Morbi sem nisl, cursus quis mollis et, interdum luctus augue. Aliquam laoreet, leo et accumsan tincidunt, libero neque aliquet lectus, a ultricies lorem mi a orci.\nMauris dapibus sem vel magna convallis laoreet. Donec in venenatis urna, vitae sodales odio. Praesent tortor diam, varius non luctus nec, bibendum vel est. Quisque id sem enim. Maecenas at est leo. Vestibulum tristique pellentesque ex, blandit placerat nunc eleifend sit amet. Fusce eget lectus bibendum, accumsan mi quis, luctus sem. Etiam vitae nulla scelerisque, eleifend odio in, euismod quam. Etiam porta ullamcorper massa, vitae gravida turpis euismod quis. Mauris sodales sem ac ultrices viverra. In placerat ultrices sapien. Suspendisse eu arcu hendrerit, luctus tortor cursus, maximus dolor. Proin et velit et quam gravida dapibus. Donec blandit justo ut consequat tristique.\n","date":1606867200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1606867200,"objectID":"2a0ec8a990dbd78a00c4e15a09364b00","permalink":"https://matsuolab.github.io/roomba_hack_course/post/20-12-02-icml-best-paper/","publishdate":"2020-12-02T00:00:00Z","relpermalink":"/roomba_hack_course/post/20-12-02-icml-best-paper/","section":"post","summary":"Congratulations to Jian Yang and Monica Hall for winning the Best Paper Award at the 2020 Conference on Wowchemy for their paper â€œLearning Wowchemyâ€.\n","tags":null,"title":"Jian Yang and Monica Hall Win the Best Paper Award at Wowchemy 2020","type":"post"},{"authors":null,"categories":null,"content":"Congratulations to Richard Hendricks for winning first place in the Wowchemy Prize.\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer tempus augue non tempor egestas. Proin nisl nunc, dignissim in accumsan dapibus, auctor ullamcorper neque. Quisque at elit felis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aenean eget elementum odio. Cras interdum eget risus sit amet aliquet. In volutpat, nisl ut fringilla dignissim, arcu nisl suscipit ante, at accumsan sapien nisl eu eros.\nSed eu dui nec ligula bibendum dapibus. Nullam imperdiet auctor tortor, vel cursus mauris malesuada non. Quisque ultrices euismod dapibus. Aenean sed gravida risus. Sed nisi tortor, vulputate nec quam non, placerat porta nisl. Nunc varius lobortis urna, condimentum facilisis ipsum molestie eu. Ut molestie eleifend ligula sed dignissim. Duis ut tellus turpis. Praesent tincidunt, nunc sed congue malesuada, mauris enim maximus massa, eget interdum turpis urna et ante. Morbi sem nisl, cursus quis mollis et, interdum luctus augue. Aliquam laoreet, leo et accumsan tincidunt, libero neque aliquet lectus, a ultricies lorem mi a orci.\nMauris dapibus sem vel magna convallis laoreet. Donec in venenatis urna, vitae sodales odio. Praesent tortor diam, varius non luctus nec, bibendum vel est. Quisque id sem enim. Maecenas at est leo. Vestibulum tristique pellentesque ex, blandit placerat nunc eleifend sit amet. Fusce eget lectus bibendum, accumsan mi quis, luctus sem. Etiam vitae nulla scelerisque, eleifend odio in, euismod quam. Etiam porta ullamcorper massa, vitae gravida turpis euismod quis. Mauris sodales sem ac ultrices viverra. In placerat ultrices sapien. Suspendisse eu arcu hendrerit, luctus tortor cursus, maximus dolor. Proin et velit et quam gravida dapibus. Donec blandit justo ut consequat tristique.\n","date":1606780800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1606780800,"objectID":"be2bd15f022f0d83fe9ffd743881e70c","permalink":"https://matsuolab.github.io/roomba_hack_course/post/20-12-01-wowchemy-prize/","publishdate":"2020-12-01T00:00:00Z","relpermalink":"/roomba_hack_course/post/20-12-01-wowchemy-prize/","section":"post","summary":"Congratulations to Richard Hendricks for winning first place in the Wowchemy Prize.\n","tags":null,"title":"Richard Hendricks Wins First Place in the Wowchemy Prize","type":"post"},{"authors":null,"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":-62135596800,"objectID":"f26b5133c34eec1aa0a09390a36c2ade","permalink":"https://matsuolab.github.io/roomba_hack_course/admin/config.yml","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack_course/admin/config.yml","section":"","summary":"","tags":null,"title":"","type":"wowchemycms"},{"authors":null,"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":-62135596800,"objectID":"6d99026b9e19e4fa43d5aadf147c7176","permalink":"https://matsuolab.github.io/roomba_hack_course/contact/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack_course/contact/","section":"","summary":"","tags":null,"title":"","type":"widget_page"}]